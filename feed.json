{
    "version": "https://jsonfeed.org/version/1",
    "title": "每天进步一点点，就是成功的开始",
    "subtitle": "",
    "icon": "https://eth168.top/images/favicon.ico",
    "description": "花非花，雾非雾",
    "home_page_url": "https://eth168.top",
    "items": [
        {
            "id": "https://eth168.top/tools/Canal-tool/",
            "url": "https://eth168.top/tools/Canal-tool/",
            "title": "Canal安装",
            "date_published": "2022-12-19T09:07:43.262Z",
            "content_html": "<h1 id=\"安装和配置canal\"><a class=\"anchor\" href=\"#安装和配置canal\">#</a> 安装和配置 Canal</h1>\n<p>下面我们就开启 mysql 的主从同步机制，让 Canal 来模拟 salve</p>\n<h1 id=\"1开启mysql主从\"><a class=\"anchor\" href=\"#1开启mysql主从\">#</a> 1. 开启 MySQL 主从</h1>\n<p>Canal 是基于 MySQL 的主从同步功能，因此必须先开启 MySQL 的主从功能才可以。</p>\n<p>这里以之前用 Docker 运行的 mysql 为例：</p>\n<h2 id=\"11开启binlog\"><a class=\"anchor\" href=\"#11开启binlog\">#</a> 1.1. 开启 binlog</h2>\n<p>打开 mysql 容器挂载的日志文件，我的在 <code>/tmp/mysql/conf</code>  目录:</p>\n<img data-src=\"/tools/Canal-tool/image-20210813153241537.png\" class=\"\" title=\"image-20210813153241537\">\n<p>修改文件：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vi</span> /tmp/mysql/conf/my.cnf</pre></td></tr></table></figure><p>添加内容：</p>\n<figure class=\"highlight ini\"><figcaption data-lang=\"ini\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key attr-name\">log-bin</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">/var/lib/mysql/mysql-bin</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key attr-name\">binlog-do-db</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">heima</span></pre></td></tr></table></figure><p>配置解读：</p>\n<ul>\n<li><code>log-bin=/var/lib/mysql/mysql-bin</code> ：设置 binary log 文件的存放地址和文件名，叫做 mysql-bin</li>\n<li><code>binlog-do-db=heima</code> ：指定对哪个 database 记录 binary log events，这里记录 heima 这个库</li>\n</ul>\n<p>最终效果：</p>\n<figure class=\"highlight ini\"><figcaption data-lang=\"ini\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">mysqld</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>skip-name-resolve</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key attr-name\">character_set_server</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">utf8</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key attr-name\">datadir</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">/var/lib/mysql</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key attr-name\">server-id</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">1000</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token key attr-name\">log-bin</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">/var/lib/mysql/mysql-bin</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token key attr-name\">binlog-do-db</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">heima</span></pre></td></tr></table></figure><h2 id=\"12设置用户权限\"><a class=\"anchor\" href=\"#12设置用户权限\">#</a> 1.2. 设置用户权限</h2>\n<p>接下来添加一个仅用于数据同步的账户，出于安全考虑，这里仅提供对 heima 这个库的操作权限。</p>\n<pre><code class=\"language-mysql\">create user canal@'%' IDENTIFIED by 'canal';\nGRANT SELECT, REPLICATION SLAVE, REPLICATION CLIENT,SUPER ON *.* TO 'canal'@'%' identified by 'canal';\nFLUSH PRIVILEGES;\n</code></pre>\n<p>重启 mysql 容器即可</p>\n<pre><code>docker restart mysql\n</code></pre>\n<p>测试设置是否成功：在 mysql 控制台，或者 Navicat 中，输入命令：</p>\n<pre><code>show master status;\n</code></pre>\n<img data-src=\"/tools/Canal-tool/image-20200327094735948.png\" class=\"\" title=\"image-20200327094735948\"> \n<h1 id=\"2安装canal\"><a class=\"anchor\" href=\"#2安装canal\">#</a> 2. 安装 Canal</h1>\n<h2 id=\"21创建网络\"><a class=\"anchor\" href=\"#21创建网络\">#</a> 2.1. 创建网络</h2>\n<p>我们需要创建一个网络，将 MySQL、Canal、MQ 放到同一个 Docker 网络中：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> network create heima</pre></td></tr></table></figure><p>让 mysql 加入这个网络：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> network connect heima mysql</pre></td></tr></table></figure><h2 id=\"23安装canal\"><a class=\"anchor\" href=\"#23安装canal\">#</a> 2.3. 安装 Canal</h2>\n<p>课前资料中提供了 canal 的镜像压缩包:</p>\n<img data-src=\"/tools/Canal-tool/image-20210813161804292.png\" class=\"\" title=\"image-20210813161804292\"> \n<p>大家可以上传到虚拟机，然后通过命令导入：</p>\n<pre><code>docker load -i canal.tar\n</code></pre>\n<p>然后运行命令创建 Canal 容器：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-p</span> <span class=\"token number\">11111</span>:11111 <span class=\"token parameter variable\">--name</span> canal <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">canal.destinations</span><span class=\"token operator\">=</span>heima <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">canal.instance.master.address</span><span class=\"token operator\">=</span>mysql:3306  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">canal.instance.dbUsername</span><span class=\"token operator\">=</span>canal  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">canal.instance.dbPassword</span><span class=\"token operator\">=</span>canal  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">canal.instance.connectionCharset</span><span class=\"token operator\">=</span>UTF-8 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">canal.instance.tsdb.enable</span><span class=\"token operator\">=</span>true <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">canal.instance.gtidon</span><span class=\"token operator\">=</span>false  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">canal.instance.filter.regex</span><span class=\"token operator\">=</span>heima<span class=\"token punctuation\">\\</span><span class=\"token punctuation\">\\</span><span class=\"token punctuation\">..</span>* <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token parameter variable\">--network</span> heima <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token parameter variable\">-d</span> canal/canal-server:v1.1.5</pre></td></tr></table></figure><p>说明:</p>\n<ul>\n<li><code>-p 11111:11111</code> ：这是 canal 的默认监听端口</li>\n<li><code>-e canal.instance.master.address=mysql:3306</code> ：数据库地址和端口，如果不知道 mysql 容器地址，可以通过 <code>docker inspect 容器id</code>  来查看</li>\n<li><code>-e canal.instance.dbUsername=canal</code> ：数据库用户名</li>\n<li><code>-e canal.instance.dbPassword=canal</code>  ：数据库密码</li>\n<li><code>-e canal.instance.filter.regex=</code> ：要监听的表名称</li>\n</ul>\n<p>表名称监听支持的语法：</p>\n<pre><code>mysql 数据解析关注的表，Perl正则表达式.\n多个正则之间以逗号(,)分隔，转义符需要双斜杠(\\\\) \n常见例子：\n1.  所有表：.*   or  .*\\\\..*\n2.  canal schema下所有表： canal\\\\..*\n3.  canal下的以canal打头的表：canal\\\\.canal.*\n4.  canal schema下的一张表：canal.test1\n5.  多个规则组合使用然后以逗号隔开：canal\\\\..*,mysql.test1,mysql.test2 \n</code></pre>\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/OpenResty-tool/",
            "url": "https://eth168.top/tools/OpenResty-tool/",
            "title": "OpenResty",
            "date_published": "2022-12-19T07:55:22.309Z",
            "content_html": "<hr />\n<h1 id=\"安装openresty\"><a class=\"anchor\" href=\"#安装openresty\">#</a> 安装 OpenResty</h1>\n<h1 id=\"1安装\"><a class=\"anchor\" href=\"#1安装\">#</a> 1. 安装</h1>\n<p>首先你的 Linux 虚拟机必须联网</p>\n<h2 id=\"1安装开发库\"><a class=\"anchor\" href=\"#1安装开发库\">#</a> <strong>1）安装开发库</strong></h2>\n<p>首先要安装 OpenResty 的依赖开发库，执行命令：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> pcre-devel openssl-devel gcc --skip-broken</pre></td></tr></table></figure><h2 id=\"2安装openresty仓库\"><a class=\"anchor\" href=\"#2安装openresty仓库\">#</a> <strong>2）安装 OpenResty 仓库</strong></h2>\n<p>你可以在你的 CentOS 系统中添加  <code>openresty</code>  仓库，这样就可以便于未来安装或更新我们的软件包（通过  <code>yum check-update</code>  命令）。运行下面的命令就可以添加我们的仓库：</p>\n<pre><code>yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo\n</code></pre>\n<p>如果提示说命令不存在，则运行：</p>\n<pre><code>yum install -y yum-utils \n</code></pre>\n<p>然后再重复上面的命令</p>\n<h2 id=\"3安装openresty\"><a class=\"anchor\" href=\"#3安装openresty\">#</a> <strong>3）安装 OpenResty</strong></h2>\n<p>然后就可以像下面这样安装软件包，比如  <code>openresty</code> ：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> openresty</pre></td></tr></table></figure><h2 id=\"4安装opm工具\"><a class=\"anchor\" href=\"#4安装opm工具\">#</a> <strong>4）安装 opm 工具</strong></h2>\n<p>opm 是 OpenResty 的一个管理工具，可以帮助我们安装一个第三方的 Lua 模块。</p>\n<p>如果你想安装命令行工具  <code>opm</code> ，那么可以像下面这样安装  <code>openresty-opm</code>  包：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> openresty-opm</pre></td></tr></table></figure><h2 id=\"5目录结构\"><a class=\"anchor\" href=\"#5目录结构\">#</a> <strong>5）目录结构</strong></h2>\n<p>默认情况下，OpenResty 安装的目录是：/usr/local/openresty</p>\n<img data-src=\"/tools/OpenResty-tool/image-20200310225539214.png\" class=\"\" title=\"image-20200310225539214\"> \n<p>看到里面的 nginx 目录了吗，OpenResty 就是在 Nginx 基础上集成了一些 Lua 模块。</p>\n<h2 id=\"6配置nginx的环境变量\"><a class=\"anchor\" href=\"#6配置nginx的环境变量\">#</a> <strong>6）配置 nginx 的环境变量</strong></h2>\n<p>打开配置文件：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vi</span> /etc/profile</pre></td></tr></table></figure><p>在最下面加入两行：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">NGINX_HOME</span><span class=\"token operator\">=</span>/usr/local/openresty/nginx</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">$&#123;NGINX_HOME&#125;</span>/sbin:<span class=\"token environment constant\">$PATH</span></pre></td></tr></table></figure><p>NGINX_HOME：后面是 OpenResty 安装目录下的 nginx 的目录</p>\n<p>然后让配置生效：</p>\n<pre><code>source /etc/profile\n</code></pre>\n<h1 id=\"2启动和运行\"><a class=\"anchor\" href=\"#2启动和运行\">#</a> 2. 启动和运行</h1>\n<p>OpenResty 底层是基于 Nginx 的，查看 OpenResty 目录的 nginx 目录，结构与 windows 中安装的 nginx 基本一致：</p>\n<img data-src=\"/tools/OpenResty-tool/image-20210811100653291.png\" class=\"\" title=\"image-20210811100653291\">\n<p>所以运行方式与 nginx 基本一致：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 启动 nginx</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>nginx</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 重新加载配置</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>nginx <span class=\"token parameter variable\">-s</span> reload</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 停止</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>nginx <span class=\"token parameter variable\">-s</span> stop</pre></td></tr></table></figure><p>nginx 的默认配置文件注释太多，影响后续我们的编辑，这里将 nginx.conf 中的注释部分删除，保留有效部分。</p>\n<p>修改 <code>/usr/local/openresty/nginx/conf/nginx.conf</code>  文件，内容如下：</p>\n<figure class=\"highlight nginx\"><figcaption data-lang=\"nginx\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#user  nobody;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">worker_processes</span>  <span class=\"token number\">1</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">error_log</span>  logs/error.log</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">events</span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">worker_connections</span>  <span class=\"token number\">1024</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">http</span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">include</span>       mime.types</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">default_type</span>  application/octet-stream</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">sendfile</span>        <span class=\"token boolean\">on</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">keepalive_timeout</span>  <span class=\"token number\">65</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token directive\"><span class=\"token keyword\">listen</span>       <span class=\"token number\">8081</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token directive\"><span class=\"token keyword\">server_name</span>  localhost</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token directive\"><span class=\"token keyword\">location</span> /</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token directive\"><span class=\"token keyword\">root</span>   html</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token directive\"><span class=\"token keyword\">index</span>  index.html index.htm</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token directive\"><span class=\"token keyword\">error_page</span>   <span class=\"token number\">500</span> <span class=\"token number\">502</span> <span class=\"token number\">503</span> <span class=\"token number\">504</span>  /50x.html</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token directive\"><span class=\"token keyword\">location</span> = /50x.html</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token directive\"><span class=\"token keyword\">root</span>   html</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>在 Linux 的控制台输入命令以启动 nginx：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>nginx</pre></td></tr></table></figure><p>然后访问页面：<span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMTUwLjEwMTo4MDgx\">http://192.168.150.101:8081</span>，注意 ip 地址替换为你自己的虚拟机 IP：</p>\n<h1 id=\"3备注\"><a class=\"anchor\" href=\"#3备注\">#</a> 3. 备注</h1>\n<p>加载 OpenResty 的 lua 模块：</p>\n<figure class=\"highlight nginx\"><figcaption data-lang=\"nginx\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#lua 模块</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">lua_package_path</span> <span class=\"token string\">\"/usr/local/openresty/lualib/?.lua;;\"</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#c 模块     </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">lua_package_cpath</span> <span class=\"token string\">\"/usr/local/openresty/lualib/?.so;;\"</span></span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>common.lua</p>\n<figure class=\"highlight lua\"><figcaption data-lang=\"lua\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 封装函数，发送 http 请求，并解析响应</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">local</span> <span class=\"token keyword\">function</span> <span class=\"token function\">read_http</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">local</span> resp <span class=\"token operator\">=</span> ngx<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span><span class=\"token function\">capture</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        method <span class=\"token operator\">=</span> ngx<span class=\"token punctuation\">.</span>HTTP_GET<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        args <span class=\"token operator\">=</span> params<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> resp <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">-- 记录错误信息，返回 404</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        ngx<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ngx<span class=\"token punctuation\">.</span>ERR<span class=\"token punctuation\">,</span> <span class=\"token string\">\"http not found, path: \"</span><span class=\"token punctuation\">,</span> path <span class=\"token punctuation\">,</span> <span class=\"token string\">\", args: \"</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        ngx<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">404</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> resp<span class=\"token punctuation\">.</span>body</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">-- 将方法导出</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">local</span> _M <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    read_http <span class=\"token operator\">=</span> read_http</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">return</span> _M</pre></td></tr></table></figure><p>释放 Redis 连接 API：</p>\n<figure class=\"highlight lua\"><figcaption data-lang=\"lua\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 关闭 redis 连接的工具方法，其实是放入连接池</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">local</span> <span class=\"token keyword\">function</span> <span class=\"token function\">close_redis</span><span class=\"token punctuation\">(</span>red<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">local</span> pool_max_idle_time <span class=\"token operator\">=</span> <span class=\"token number\">10000</span> <span class=\"token comment\">-- 连接的空闲时间，单位是毫秒</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">local</span> pool_size <span class=\"token operator\">=</span> <span class=\"token number\">100</span> <span class=\"token comment\">-- 连接池大小</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">local</span> ok<span class=\"token punctuation\">,</span> err <span class=\"token operator\">=</span> red<span class=\"token punctuation\">:</span><span class=\"token function\">set_keepalive</span><span class=\"token punctuation\">(</span>pool_max_idle_time<span class=\"token punctuation\">,</span> pool_size<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> ok <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        ngx<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ngx<span class=\"token punctuation\">.</span>ERR<span class=\"token punctuation\">,</span> <span class=\"token string\">\"放入redis连接池失败: \"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr></table></figure><p>读取 Redis 数据的 API：</p>\n<figure class=\"highlight lua\"><figcaption data-lang=\"lua\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 查询 redis 的方法 ip 和 port 是 redis 地址，key 是查询的 key</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">local</span> <span class=\"token keyword\">function</span> <span class=\"token function\">read_redis</span><span class=\"token punctuation\">(</span>ip<span class=\"token punctuation\">,</span> port<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">-- 获取一个连接</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">local</span> ok<span class=\"token punctuation\">,</span> err <span class=\"token operator\">=</span> red<span class=\"token punctuation\">:</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>ip<span class=\"token punctuation\">,</span> port<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> ok <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        ngx<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ngx<span class=\"token punctuation\">.</span>ERR<span class=\"token punctuation\">,</span> <span class=\"token string\">\"连接redis失败 : \"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">nil</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">-- 查询 redis</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">local</span> resp<span class=\"token punctuation\">,</span> err <span class=\"token operator\">=</span> red<span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">-- 查询失败处理</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> resp <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        ngx<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ngx<span class=\"token punctuation\">.</span>ERR<span class=\"token punctuation\">,</span> <span class=\"token string\">\"查询Redis失败: \"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">,</span> <span class=\"token string\">\", key = \"</span> <span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">-- 得到的数据为空处理</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">if</span> resp <span class=\"token operator\">==</span> ngx<span class=\"token punctuation\">.</span>null <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        resp <span class=\"token operator\">=</span> <span class=\"token keyword\">nil</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        ngx<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ngx<span class=\"token punctuation\">.</span>ERR<span class=\"token punctuation\">,</span> <span class=\"token string\">\"查询Redis数据为空, key = \"</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token function\">close_redis</span><span class=\"token punctuation\">(</span>red<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">return</span> resp</pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr></table></figure><p>开启共享词典：</p>\n<figure class=\"highlight nginx\"><figcaption data-lang=\"nginx\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 共享字典，也就是本地缓存，名称叫做：item_cache，大小 150m</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token directive\"><span class=\"token keyword\">lua_shared_dict</span> item_cache <span class=\"token number\">150m</span></span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure>\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/Other/Swagger/",
            "url": "https://eth168.top/Other/Swagger/",
            "title": "Swagger",
            "date_published": "2022-11-09T15:04:15.000Z",
            "content_html": "<h1 id=\"swagger学习\"><a class=\"anchor\" href=\"#swagger学习\">#</a> Swagger 学习</h1>\n<p><code>Swagger</code>  是一款 <code>RESTFUL</code>  接口的文档在线自动生成 + 功能测试功能软件。Swagger 是一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务。目标是使客户端和文件系统作为服务器以同样的速度来更新文件的方法，参数和模型紧密集成到服务器。</p>\n<img data-src=\"/Other/Swagger/111a40b87b4841e98f06513d6f1789ae.png\" class=\"\" title=\"img\">\n<h1 id=\"为什么要用swagger呢\"><a class=\"anchor\" href=\"#为什么要用swagger呢\">#</a> 为什么要用 Swagger 呢？</h1>\n<blockquote>\n<p>大背景：我们现在是前后端分离的时代</p>\n</blockquote>\n<ol>\n<li>\n<p><strong>后端开发的痛点</strong></p>\n<p>每次新需求就要提供很多的接口给前端，另外还需要按照一定的标准写接口文档，对于每个字段的说明都要写清楚。这个不算什么，就是随着业务需求的日益迭代，接口会经常修改，那随之发生的是接口文档也随之变更。有的时候修改了代码，忘记修改文档了，就会受到前端开发人员的问责。</p>\n</li>\n<li>\n<p><strong>前端开发的痛点</strong></p>\n<p>由于每次迭代都是后端先行，那工期十分紧迫，有时候后端开发延期，给前端留的时间不多，那么前端就会很紧张。有的同学说可以定义假接口。是的，没错！但是，假接口也需要数据，有的复杂接口构造数据也很费时。</p>\n</li>\n<li>\n<p><strong>Swagger 的到来</strong></p>\n<p>对于后端开发而言：</p>\n<ul>\n<li>不用再手写 WiKi 接口拼大量的参数，避免手写错误</li>\n<li>对代码侵入性低，采用全注解的方式，开发简单</li>\n<li>方法参数名修改、增加、减少参数都可以直接生效，不用手动维护</li>\n</ul>\n<p>对于前端开发而言：</p>\n<ul>\n<li>后端只需要定义好接口，会自动生成文档，接口功能、参数一目了然</li>\n<li>联调方便，如果出问题，直接测试接口，实时检查参数和返回值，就可以快速定位是前端还是后端的问题</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"springboot集成swagger\"><a class=\"anchor\" href=\"#springboot集成swagger\">#</a> SpringBoot 集成 Swagger</h1>\n<h2 id=\"1-创建一个模块\"><a class=\"anchor\" href=\"#1-创建一个模块\">#</a> 1、创建一个模块</h2>\n<h2 id=\"2-修改pom文件\"><a class=\"anchor\" href=\"#2-修改pom文件\">#</a> 2、修改 pom 文件</h2>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>parent</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-parent<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.3.12.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>parent</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.xxx<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>MySwagger<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.0.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>java.version</span><span class=\"token punctuation\">></span></span>1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>java.version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>project.build.sourceEncoding</span><span class=\"token punctuation\">></span></span>UTF-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>project.build.sourceEncoding</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>project.reporting.outputEncoding</span><span class=\"token punctuation\">></span></span>UTF-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>project.reporting.outputEncoding</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>spring-boot.version</span><span class=\"token punctuation\">></span></span>2.3.12.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>spring-boot.version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">&lt;!--swagger2--></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>io.springfox<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>springfox-swagger2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.9.2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token comment\">&lt;!--swagger-ui--></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>io.springfox<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>springfox-swagger-ui<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.9.2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token comment\">&lt;!--spring-web--></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-web<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token comment\">&lt;!--lombok--></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.projectlombok<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>lombok<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>optional</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>optional</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token comment\">&lt;!--spring-test--></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>exclusions</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>exclusion</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.junit.vintage<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>junit-vintage-engine<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>exclusion</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>exclusions</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token comment\">&lt;!--junit4--></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>junit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>junit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencyManagement</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-dependencies<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>$&#123;spring-boot.version&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>type</span><span class=\"token punctuation\">></span></span>pom<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>type</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>import<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencyManagement</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>build</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugins</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.maven.plugins<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>maven-compiler-plugin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.8.1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span><span class=\"token punctuation\">></span></span>1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>source</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>target</span><span class=\"token punctuation\">></span></span>1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>target</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span><span class=\"token punctuation\">></span></span>UTF-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoding</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-maven-plugin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.3.12.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mainClass</span><span class=\"token punctuation\">></span></span>com.zjj.MySwaggerApplication<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mainClass</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>executions</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>execution</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>repackage<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>goals</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>                            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>goal</span><span class=\"token punctuation\">></span></span>repackage<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>goal</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>goals</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>execution</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>executions</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugins</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>build</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h2 id=\"3-添加配置启动项目\"><a class=\"anchor\" href=\"#3-添加配置启动项目\">#</a> 3、添加配置启动项目</h2>\n<ol>\n<li>\n<p>创建一个 Controller，并添加  <code>@API</code>  注解</p>\n</li>\n<li>\n<p>在配置类上添加  <code>@EnableSwagger2</code>  注解，然后启动项目。访问下面地址</p>\n</li>\n</ol>\n<p><span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo4MDgwL3N3YWdnZXItdWkuaHRtbA==\">http://127.0.0.1:8080/swagger-ui.html</span></p>\n<p>结果显示：</p>\n<img data-src=\"/Other/Swagger/image-20221109163924503.png\" class=\"\" title=\"image-20221109163924503\">\n<p>这样我们就集成成功了！！！！</p>\n<h1 id=\"配置swagger\"><a class=\"anchor\" href=\"#配置swagger\">#</a> 配置 Swagger</h1>\n<h2 id=\"1-配置类中的框架配置\"><a class=\"anchor\" href=\"#1-配置类中的框架配置\">#</a> 1、配置类中的框架配置</h2>\n<h3 id=\"作者信息配置\"><a class=\"anchor\" href=\"#作者信息配置\">#</a> 作者信息配置</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * 配置 Swagger 信息面板的 info</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">ApiInfo</span> <span class=\"token function\">apiInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 作者信息</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">Contact</span> contact <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Contact</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"zjj\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://www.baidu.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"zxxx@qq.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApiInfo</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token string\">\"Swagger测试\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// title</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token string\">\"测试一下\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// desc</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token string\">\"1.0\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 版本</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token string\">\"https://www.baidu.com\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">// 作者信息</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        contact<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token string\">\"Apache 2.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token string\">\"http://www.apache.org/licenses/LICENSE-2.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\">/*  return new ApiInfoBuilder ().</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                title (\"goody9807 的 CSDN 博客\").</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                description (\"swagger 的接入\")</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                .version (\"1.0\").build (); */</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><img data-src=\"/Other/Swagger/image-20221109191422049.png\" class=\"\" title=\"image-20221109191422049\">\n<h3 id=\"接口管理配置\"><a class=\"anchor\" href=\"#接口管理配置\">#</a> 接口管理配置</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * 配置一个 Docker 的 Bean 实例</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">Docket</span> <span class=\"token function\">productApi</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Environment</span> environment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// 设置启动环境</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 我们多个配置文件，开发的和测试的，我们要求在发布版本不能显示</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token class-name\">Profiles</span> profile <span class=\"token operator\">=</span> <span class=\"token class-name\">Profiles</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dev\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">boolean</span> profiles <span class=\"token operator\">=</span> environment<span class=\"token punctuation\">.</span><span class=\"token function\">acceptsProfiles</span><span class=\"token punctuation\">(</span>profile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>profiles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Docket</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DocumentationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SWAGGER_2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token function\">apiInfo</span><span class=\"token punctuation\">(</span><span class=\"token function\">apiInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 一般都要从写，自己重新定义一个</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token comment\">// 允许启动，false 则不能在浏览器中浏览 UI</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token function\">enable</span><span class=\"token punctuation\">(</span>profiles<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">// 配置一些扫描规则</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">//// 指定扫描的注解，没有该注解的不显示在我们的 UI 中</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token comment\">////withClassAnnotation 扫描类上的注解</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token comment\">////withMethodAnnotation 扫描方法上的注解</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token comment\">// .apis(RequestHandlerSelectors.withClassAnnotation(RestController.class))</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token comment\">//// 指定扫描的包，没有该注解的不显示在我们的 UI 中</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token comment\">////basePackage 指定要扫描的包</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token comment\">////any 扫描全部</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token comment\">////none 不扫描</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token comment\">// .apis(RequestHandlerSelectors.basePackage(\"com.zjj\"))</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token comment\">//// 指定路径，正则</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token comment\">// .paths(PathSelectors.ant(\"/test/**\"))</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>是否显示 UI</p>\n<blockquote>\n<p>注意：在切换的时候注意  <code>ip</code>  和  <code>post</code></p>\n</blockquote>\n<img data-src=\"/Other/Swagger/image-20221109185106152.png\" class=\"\" title=\"image-20221109185106152\">\n<h3 id=\"组配置\"><a class=\"anchor\" href=\"#组配置\">#</a> 组配置</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 创建多个 bean 对象 不写就是默认组</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Docket</span> <span class=\"token function\">docker1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Docket</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DocumentationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SWAGGER_2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">groupName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Docket</span> <span class=\"token function\">docker2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Docket</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DocumentationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SWAGGER_2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">groupName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Docket</span> <span class=\"token function\">docker3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Docket</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DocumentationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SWAGGER_2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">groupName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><img data-src=\"/Other/Swagger/image-20221109190338869.png\" class=\"\" title=\"image-20221109190338869\">\n<h2 id=\"2-接口配置\"><a class=\"anchor\" href=\"#2-接口配置\">#</a> 2、接口配置</h2>\n<p>这里常用三个注解  <code>@Api</code>  、  <code>@ApiOperation</code>  、 <code>@ApiParam</code></p>\n<p>他们都是标识要管理的接口的信息，区别在于：</p>\n<p><code>@Api</code> ：只能作<strong>用在类上</strong></p>\n<p><code>@ApiOperation</code> ：只能<strong>作用在接口方法上</strong></p>\n<p><code>@ApiParam</code> ：可以作用在 <strong>参数</strong>、<strong>方法</strong>、<strong>字段</strong>上</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>zjj<span class=\"token punctuation\">.</span>pojo<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">User</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>swagger<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Api</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>swagger<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApiOperation</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>swagger<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApiParam</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token annotation punctuation\">@Api</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"类上的注解\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//value 写了没用，tags 标签还有点用</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyController01</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/test1\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"接口上的注解\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"this is test1\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>     <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test2\"</span><span class=\"token punctuation\">,</span>method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">GET</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"this is test2\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>     <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test3\"</span><span class=\"token punctuation\">,</span>method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">POST</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"this is test3\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"getUser\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"getUser2\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">getUser2</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@ApiParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"参数的注解\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>接口方法上的注解：</strong></p>\n<img data-src=\"/Other/Swagger/image-20221109222002441.png\" class=\"\" title=\"image-20221109222002441\">\n<p><strong>参数上的注解：</strong></p>\n<img data-src=\"/Other/Swagger/image-20221109221511781.png\" class=\"\" title=\"image-20221109221511781\">\n<h2 id=\"3-model配置\"><a class=\"anchor\" href=\"#3-model配置\">#</a> 3、Model 配置</h2>\n<p>实体类的配置我们常用以下注解： <code>@ApiModel</code>  和 <code>ApiModelProperty</code></p>\n<p><code>@ApiModel</code> ：扫描实体类</p>\n<p><code>@APIModelProperty</code> ：扫描属性，对熟悉进行说明</p>\n<img data-src=\"/Other/Swagger/image-20221109190831409.png\" class=\"\" title=\"image-20221109190831409\">\n<h2 id=\"总结\"><a class=\"anchor\" href=\"#总结\">#</a> 总结</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Swagger 注解</th>\n<th style=\"text-align:left\">解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">@Api (tags = &quot;xxx 模块说明&quot;)</td>\n<td style=\"text-align:left\">作用在模块类上</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">@ApiOperation (value = &quot;xxx 接口方法说明&quot;)</td>\n<td style=\"text-align:left\">作用在接口方法上</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">@ApiMode (value = &quot;xxxPojo 说明&quot;)</td>\n<td style=\"text-align:left\">作用在实体类上</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">@ApiModelProperty (value = &quot;xxx 属性说明&quot; ,hidden = true)</td>\n<td style=\"text-align:left\">作用在类方法和属性上<br/>hidden 为 true 表示可以隐藏该属性</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">@ApiParam (value = &quot;xxx 参数说明&quot;)</td>\n<td style=\"text-align:left\">作用在参数、方法和字段上<br/>类似 @ApiModelProperty</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"在线ui基本使用\"><a class=\"anchor\" href=\"#在线ui基本使用\">#</a> 在线 UI 基本使用</h1>\n<ol>\n<li>点击 <strong>Try it out</strong> ，进入我们的接口调试</li>\n</ol>\n<img data-src=\"/Other/Swagger/image-20221109224038237.png\" class=\"\" title=\"image-20221109224038237\">\n<ol start=\"2\">\n<li>按照参数要求设置参数，并发送请求</li>\n</ol>\n<img data-src=\"/Other/Swagger/image-20221109224307339.png\" class=\"\" title=\"image-20221109224307339\">\n<ol start=\"3\">\n<li>查看结果</li>\n</ol>\n<img data-src=\"/Other/Swagger/image-20221109224737609.png\" class=\"\" title=\"image-20221109224737609\">\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "开发技巧",
                "接口调试"
            ]
        },
        {
            "id": "https://eth168.top/tools/nushell/",
            "url": "https://eth168.top/tools/nushell/",
            "title": "nushell",
            "date_published": "2022-11-05T15:14:39.000Z",
            "content_html": "<p><code>NuShell</code>  是一个终端管理工具</p>\n<ul>\n<li>创建具有现代感的灵活的跨平台 Shell</li>\n<li>允许你将命令行应用程序与可理解数据结构的 Shell 进行混合和匹配</li>\n<li>具有现代命令行应用程序提供的用户体验优化</li>\n</ul>\n<p>官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnVzaGVsbC5zaC96aC1DTi8=\">https://www.nushell.sh/zh-CN/</span></p>\n<p>GitHub：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL251c2hlbGwvbnVzaGVsbA==\">https://github.com/nushell/nushell</span></p>\n<img data-src=\"/tools/nushell/ls-example.png\" class=\"\" title=\"Screenshot showing using the ls comman\">\n<h1 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h1>\n<blockquote>\n<p>我们常用的也就三个系统  <code>Windows</code>  、 <code>Linux</code>  、 <code>Macos</code></p>\n</blockquote>\n<ol>\n<li>下载</li>\n</ol>\n<p>这个工具安装使用也很简单，就是在 github 上下载下来，放一个地方上直接用就行了。</p>\n<p>下载地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL251c2hlbGwvbnVzaGVsbC9yZWxlYXNlcw==\">https://github.com/nushell/nushell/releases</span></p>\n<p><mark><strong>注意：</strong> 他这个文件名写的有点绕，看清楚在下载。</mark></p>\n<ol start=\"2\">\n<li>解压使用</li>\n</ol>\n<p>下载完成后，直接解压，他的文件格式目录不变，放在同一个文件夹下即可，然后再  <code>Linux\\Macos</code>  中 <code>nu</code>  或者 <code>Windows</code>  的  <code>nu.exe</code>  直接运行即可。</p>\n<ol start=\"3\">\n<li>补充</li>\n</ol>\n<p>在 Linux 下，将所有的文件都扔到   <code>/usr/local/bin</code>  中即可</p>\n<h1 id=\"其他设置操作\"><a class=\"anchor\" href=\"#其他设置操作\">#</a> 其他设置操作</h1>\n<p>具体的都可以参照我们的文档</p>\n<p>官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnVzaGVsbC5zaC96aC1DTi8=\">https://www.nushell.sh/zh-CN/</span></p>\n<ul>\n<li>设置 NuShell 为默认 Terminal</li>\n<li>.....</li>\n</ul>\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装",
                "Terminal"
            ]
        },
        {
            "id": "https://eth168.top/tools/Zookeeper-tool/",
            "url": "https://eth168.top/tools/Zookeeper-tool/",
            "title": "Zookeeper",
            "date_published": "2022-10-31T15:06:22.718Z",
            "content_html": "<h3 id=\"zookeeper-linux安装\"><a class=\"anchor\" href=\"#zookeeper-linux安装\">#</a> Zookeeper-linux 安装</h3>\n<h4 id=\"1\"><a class=\"anchor\" href=\"#1\">#</a> ——1</h4>\n<h5 id=\"1-zookeeper简介\"><a class=\"anchor\" href=\"#1-zookeeper简介\">#</a> 1     Zookeeper 简介</h5>\n<p>​\tzookeeper 分布式管理软件。常用它做注册中心（依赖 zookeeper 的发布 / 订阅功能）、配置文件中心、分布式锁配置、集群管理等。</p>\n<p>​\tzookeeper 一共就有两个版本。主要使用的是 java 语言写的。</p>\n<h5 id=\"2-安装\"><a class=\"anchor\" href=\"#2-安装\">#</a> 2     安装</h5>\n<h6 id=\"21-上传压缩文件\"><a class=\"anchor\" href=\"#21-上传压缩文件\">#</a> 2.1   上传压缩文件</h6>\n<p>​\t上传到 /usr/local/tmp 中</p>\n<h5 id=\"22-解压\"><a class=\"anchor\" href=\"#22-解压\">#</a> 2.2   解压</h5>\n<pre><code> tar zxf apache-zookeeper-3.5.5-bin.tar.gz\n cp -r apache-zookeeper-3.5.5-bin ../zookeeper\n</code></pre>\n<h5 id=\"23-新建data目录\"><a class=\"anchor\" href=\"#23-新建data目录\">#</a> 2.3   新建 data 目录</h5>\n<p>进入到 zookeeper 中</p>\n<pre><code> cd /usr/local/zookeeper\n mkdir data\n</code></pre>\n<h5 id=\"24-修改配置文件\"><a class=\"anchor\" href=\"#24-修改配置文件\">#</a> 2.4   修改配置文件</h5>\n<p>进入 conf 中</p>\n<pre><code> cd conf\n cp zoo_sample.cfg zoo.cfg\n vim zoo.cfg\n</code></pre>\n<p>修改 dataDir 为 data 文件夹路径</p>\n<pre><code>dataDir=/usr/local/zookeeper/data\n</code></pre>\n<h5 id=\"25-启动zookeeper\"><a class=\"anchor\" href=\"#25-启动zookeeper\">#</a> 2.5   启动 zookeeper</h5>\n<p>进入 bin 文件夹</p>\n<pre><code> cd /usr/local/zookeeper/bin\n ./zkServer.sh start\n</code></pre>\n<p>通过 status 查看启动状态。稍微有个等待时间</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./zkServer.sh status</pre></td></tr></table></figure><h4 id=\"2\"><a class=\"anchor\" href=\"#2\">#</a> ——2</h4>\n<p><strong>资料：</strong></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20va2luZ2tvby9wLzg3MzI0NDguaHRtbA==\">https://www.cnblogs.com/kingkoo/p/8732448.html</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2F2ODA4NzQ2NjY/ZnJvbT1zZWFyY2gmYW1wO3NlaWQ9MTYyOTE0NTAyNTIxMTk5OTEwNCZhbXA7c3BtX2lkX2Zyb209MzMzLjMzNy4wLjA=\">https://www.bilibili.com/video/av80874666?from=search&amp;seid=1629145025211999104&amp;spm_id_from=333.337.0.0</span></p>\n<h5 id=\"1-zookeeper简介-2\"><a class=\"anchor\" href=\"#1-zookeeper简介-2\">#</a> 1     Zookeeper 简介</h5>\n<p>​\tzookeeper 分布式管理软件。常用它做注册中心（依赖 zookeeper 的发布 / 订阅功能）、配置文件中心、分布式锁配置、集群管理等。</p>\n<p>​\tzookeeper 一共就有两个版本。主要使用的是 java 语言写的。</p>\n<h5 id=\"2-安装-2\"><a class=\"anchor\" href=\"#2-安装-2\">#</a> 2     安装</h5>\n<h6 id=\"21-拉取镜像\"><a class=\"anchor\" href=\"#21-拉取镜像\">#</a> 2.1   拉取镜像</h6>\n<ul>\n<li>\n<p>自定义 zookeeper 目录</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> /root/zookeeper</pre></td></tr></table></figure></li>\n</ul>\n<p>#mkdir /root/zookeeper/data #原因参照上面 - 在 docker 中 data 其实也不用在宿主机行自己生成 (目前如此)</p>\n<p>仓库官网查看版本或者用命令直接查</p>\n<pre><code>docker search zookeeper\n</code></pre>\n<p>拉取特定版本（3.5）</p>\n<pre><code>docker pull zookeeper:3.5\n\n```\n</code></pre>\n<h6 id=\"22-创建并启动容器\"><a class=\"anchor\" href=\"#22-创建并启动容器\">#</a> 2.2 创建并启动容器</h6>\n<p>​\t<strong>注：就目前而且 好像直接在 docker 中使用 zookeeper 不需要过多的配置，直接用命令创建吧，下面的解释先不看，具体原因后面补充</strong></p>\n<p>命令：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> zookeeper <span class=\"token parameter variable\">-v</span> /root/zookeeper/data:/data <span class=\"token parameter variable\">-p</span> <span class=\"token number\">2181</span>:2181 <span class=\"token parameter variable\">--restart</span> always zookeeper:3.5</pre></td></tr></table></figure><ul>\n<li><code>--restart always</code> ：始终重启</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYWdlb3ZiL3AvMTUzMjg3OTYuaHRtbA==\">https://www.cnblogs.com/ageovb/p/15328796.html</span></li>\n</ul>\n<p><strong>解释</strong></p>\n<ul>\n<li>\n<p>1、这里为啥只挂载了 data 目录 --》因为当我们 没有直接的安装压缩包时，我们的就没有配置文件，所以我们直接生成，容器中就回自动生成 conf 文件，其中就有我们需要的 一系列配置文件，我们第一次创建的时候就可以如此，我们在进<strong>行配置文件的修改完成</strong>后，要将所有配置文件放到我们  bash 目录中的 conf 文件中去。</p>\n</li>\n<li>\n<p>2、第一次进入容器</p>\n<ul>\n<li>\n<p>在 bash 目录下进入 bin 目录然后输入开启客户端命令</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./zkCli.sh</pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>3、第二次进入容器</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> zookeeper /bin/bash  <span class=\"token parameter variable\">-p</span>    端口号</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>或</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> zookeeper zkCli.sh</pre></td></tr></table></figure></li>\n</ul>\n<p><em><em>只看到这就可</em>，容器创建成功就可以直接用了，还没有出现问题。有待补充</em> *</p>\n<h6 id=\"23-修改配置文件\"><a class=\"anchor\" href=\"#23-修改配置文件\">#</a> 2.3   修改配置文件</h6>\n<ul>\n<li>配置文件来源\n<ul>\n<li>1、可以去我们的资料中直接解压出<strong> conf</strong> 目录粘贴到我们的 zookeeper 目录中去</li>\n<li>2、可以直接进行第 3 步，完事之后直接会在容器中生成。找到 conf 文件，修改其中的 zoo.cfg 文件，</li>\n</ul>\n</li>\n</ul>\n<p>进入容器后，找到 conf 中的 **zoo.cfg 文件，接下来就是修改 <strong>dataDir</strong> 路径为容器中的 data 文件目录。</p>\n<p>前提是要下载 vim ，因为容器中没有，命令是：</p>\n<pre><code>apt-get update\n\napt-get install -y vim\n\ncd conf\n### 没有zoo.cfg 就先拷贝 zoo_sample.cfg 两个其实是一个文件，内容相同\n###cp zoo_sample.cfg zoo.cfg\nvim zoo.cfg\n</code></pre>\n<p>修改 dataDir 为 data 文件夹路径</p>\n<pre><code>dataDir=/usr/local/zookeeper/data\n</code></pre>\n<h3 id=\"zookeeper集群搭建\"><a class=\"anchor\" href=\"#zookeeper集群搭建\">#</a> Zookeeper 集群搭建</h3>\n<h4 id=\"1-2\"><a class=\"anchor\" href=\"#1-2\">#</a> ——1</h4>\n<p>1. 上传压缩包到 /usr/local/tmp 下 并解压。</p>\n<p>2. 在 /usr/local 下新建文件夹 zookeeper</p>\n<pre><code>### mkdir /usr/local/zookeeper\n</code></pre>\n<p>3. 把解压的所有文件复制到 zookeeper 下， 并命名为 zk1</p>\n<pre><code>### cp -r /usr/local/temp/zookeeper-3.4.8 /usr/local/zookeeper/zk1\n</code></pre>\n<p>4. 在 zk1 下新建文件夹 data</p>\n<p>5. 在 data 下新建文件 myid, 里面写上 1</p>\n<pre><code>### vim myid\n</code></pre>\n<p>6. 进入到 zk1/conf 下 把 zoo_sample.cfg 复制一份叫做 zoo.cfg</p>\n<p>7. 编辑 zoo.cfg 内容，设置 dataDIR 为 data 文件夹， 并在文件最下面添加下面内容</p>\n<pre><code>server.1=192.168.93.10:2688:3888\nserver.2=192.168.93.10:2689:3889\nserver.3=192.168.93.10:2690:3890\n</code></pre>\n<p>7.1 server.1 中的 1 是 myid 的内容</p>\n<p>7.2 2688 2689 2690 是 zookeeper 内部端口</p>\n<p>7.3 3888 3889 3890 是 leader 端口</p>\n<p>8. 把 zk1 复制两份，分部叫做 zk2  zk3  并修改 myid 的值为 2，3 修改 zoo.cfg 中 dataDIR 和 clientPort</p>\n<p>9. 启动三个 zookeeper</p>\n<pre><code>### ./zkServer.sh start\n</code></pre>\n<p>10. 查看状态</p>\n<pre><code>### ./zkServer.sh status\n</code></pre>\n<h4 id=\"2-2\"><a class=\"anchor\" href=\"#2-2\">#</a> ——2</h4>\n<p><strong>1、准备</strong> docker-compose.yml<strong> 文件</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>version: <span class=\"token string\">'2'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>services:</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  zoo1:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    image: zookeeper:3.5</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    restart: always</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    container_name: zoo1</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    ports:</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      - <span class=\"token string\">\"2182:2181\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    environment:</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      ZOO_MY_ID: <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      ZOO_SERVERS: <span class=\"token assign-left variable\">server.1</span><span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0:2688:3888 <span class=\"token assign-left variable\">server.2</span><span class=\"token operator\">=</span>zoo2:2689:3888 <span class=\"token assign-left variable\">server.3</span><span class=\"token operator\">=</span>zoo3:2690:3888</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  zoo2:</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    image: zookeeper:3.5</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    restart: always</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    container_name: zoo2</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    ports:</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      - <span class=\"token string\">\"2183:2181\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    environment:</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      ZOO_MY_ID: <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      ZOO_SERVERS: <span class=\"token assign-left variable\">server.1</span><span class=\"token operator\">=</span>zoo1:2688:3888 <span class=\"token assign-left variable\">server.2</span><span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0:2689:3888 <span class=\"token assign-left variable\">server.3</span><span class=\"token operator\">=</span>zoo3:2690:3888</pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  zoo3:</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    image: zookeeper:3.5</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    restart: always</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    container_name: zoo3</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    ports:</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      - <span class=\"token string\">\"2184:2181\"</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    environment:</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      ZOO_MY_ID: <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      ZOO_SERVERS: <span class=\"token assign-left variable\">server.1</span><span class=\"token operator\">=</span>zoo1:2688:3888 <span class=\"token assign-left variable\">server.2</span><span class=\"token operator\">=</span>zoo2:2689:3888 <span class=\"token assign-left variable\">server.3</span><span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0:2690:3888</pre></td></tr></table></figure><p><strong>2、创建镜像</strong></p>\n<ul>\n<li>要在创建的 docker-compose.yml 文件中使用命令</li>\n</ul>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker-compose</span> up <span class=\"token parameter variable\">-d</span></pre></td></tr></table></figure><p><strong>3、进入容器</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> zoo1 /bin/bash</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### 查看 zoo1 的状态</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">cd</span> bin</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>./zkServer.sh status</pre></td></tr></table></figure><ul>\n<li>如果出现，以下情况：</li>\n</ul>\n<pre><code>ZooKeeper JMX enabled by default\nUsing config: /conf/zoo.cfg\nClient port not found in static config file. Looking in dynamic config file.\ngrep: : No such file or directory\nClient port not found in the server configs\nClient port not found. Looking for secureClientPort in the static config.\nUnable to find either secure or unsecure client port in any configs. Terminating.\n</code></pre>\n<p>​\t通过阅读我们知道他在 conf 中的 zoo.cfg 文件中缺少 **clientPort ** 我们只需要自行添加即可</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">### 修改之前我们先装一下 vim</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">apt-get</span> update</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> <span class=\"token function\">vim</span> </pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">### 修改 zoo.fcg 文件</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">vim</span> /conf/zoo.fcg</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">clientPort</span><span class=\"token operator\">=</span><span class=\"token number\">2181</span></pre></td></tr></table></figure><ul>\n<li>\n<p>完事之后<strong>重启</strong> zoo1</p>\n  <img data-src=\"/tools/Zookeeper-tool/1645780920291.png\" class=\"\" width=\"1645780920291\">\n<p>成功！！</p>\n</li>\n</ul>\n<h6 id=\"4-查看所有zookeeper的状态\"><a class=\"anchor\" href=\"#4-查看所有zookeeper的状态\">#</a> 4、查看所有 zookeeper 的状态</h6>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> zoo3 <span class=\"token function\">bash</span> ./bin/zkServer.sh status</pre></td></tr></table></figure><h6 id=\"5-进去客户端\"><a class=\"anchor\" href=\"#5-进去客户端\">#</a> 5、进去客户端</h6>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> zoo3 zkCli.sh</pre></td></tr></table></figure>\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/XShell-tool/",
            "url": "https://eth168.top/tools/XShell-tool/",
            "title": "XShell",
            "date_published": "2022-10-31T15:06:22.715Z",
            "content_html": "<h2 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h2>\n<h2 id=\"配色\"><a class=\"anchor\" href=\"#配色\">#</a> 配色</h2>\n<blockquote>\n<p>所有资源都在网盘和仓库里面</p>\n</blockquote>\n<h4 id=\"zk1\"><a class=\"anchor\" href=\"#zk1\">#</a> zk1</h4>\n<img data-src=\"/tools/XShell-tool/image-20220801173236598.png\" class=\"\">\n<h4 id=\"solarized-dark\"><a class=\"anchor\" href=\"#solarized-dark\">#</a> Solarized Dark</h4>\n<img data-src=\"/tools/XShell-tool/image-20220801173040826.png\" class=\"\">\n<h4 id=\"solarizeddarkmodify\"><a class=\"anchor\" href=\"#solarizeddarkmodify\">#</a> SolarizedDarkModify</h4>\n<img data-src=\"/tools/XShell-tool/image-20220801173129171.png\" class=\"\">\n<h4 id=\"isayme\"><a class=\"anchor\" href=\"#isayme\">#</a> isayme</h4>\n<img data-src=\"/tools/XShell-tool/image-20220801172922893.png\" class=\"\">\n<h4 id=\"ubuntu\"><a class=\"anchor\" href=\"#ubuntu\">#</a> ubuntu</h4>\n<img data-src=\"/tools/XShell-tool/image-20220801173207482.png\" class=\"\">\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装",
                "Terminal"
            ]
        },
        {
            "id": "https://eth168.top/tools/Tomcat-tool/",
            "url": "https://eth168.top/tools/Tomcat-tool/",
            "title": "Tomcat",
            "date_published": "2022-10-31T15:06:22.710Z",
            "content_html": "<h3 id=\"tomcat安装\"><a class=\"anchor\" href=\"#tomcat安装\">#</a> Tomcat 安装</h3>\n<p>下载</p>\n<p>下载地址：<span class=\"exturl\" data-url=\"aHR0cDovL3RvbWNhdC5hcGFjaGUub3JnLw==\">http://tomcat.apache.org/</span></p>\n<img data-src=\"/tools/Tomcat-tool/1646193444708.png\" class=\"\">\n<h4 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h4>\n<p>tomcat 由 apache 开源组织使用 java 开发的一款 web 容器，在使用之前需要安装 JDK 及配置 JAVA_HOME.Tomcat 是绿色软解，<strong>解压就可使用</strong>。如果之前已经安装了其他 tomcat 并且还配置了 CATALINA_HOME 不要忘记修改 CATALINA_HOME 指向我们现在使用的这个 tomcat</p>\n<h4 id=\"tomcat启动\"><a class=\"anchor\" href=\"#tomcat启动\">#</a> Tomcat 启动</h4>\n<p>运行 startup.bat 文件。</p>\n<p>一定要配置 JAVA_HOME   C:\\Program Files\\Java\\jdk1.8.0_161<br />\n 部分电脑需要配置 CATALINA_HOME   D:/<em><strong>/</strong></em>/apache-tomcat-9.0.41<br />\n 记住一个习惯：以后我们装任何一个软件路径都应该避免中文，空格和特殊符号，可以使用_</p>\n<h4 id=\"tomcat关闭\"><a class=\"anchor\" href=\"#tomcat关闭\">#</a> Tomcat 关闭</h4>\n<p>运行 shutdown.bat 文件或者直接关闭掉启动窗口。</p>\n<h4 id=\"访问tomcat\"><a class=\"anchor\" href=\"#访问tomcat\">#</a> 访问 Tomcat</h4>\n<p>访问 Tomcat 的 URL 格式：<span class=\"exturl\" data-url=\"aHR0cDovL2lw\">http://ip</span>:port</p>\n<p>访问本机 Tomcat 的 URL 格式：<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgw\">http://localhost:8080</span></p>\n<h3 id=\"tomcat安装-2\"><a class=\"anchor\" href=\"#tomcat安装-2\">#</a> Tomcat 安装</h3>\n<h4 id=\"1\"><a class=\"anchor\" href=\"#1\">#</a> ——1</h4>\n<h5 id=\"1-下载linux对应版本的tomcat\"><a class=\"anchor\" href=\"#1-下载linux对应版本的tomcat\">#</a> 1、下载 Linux 对应版本的 Tomcat</h5>\n<p>​\t  下载压缩文件     apache-tomcat-7.0.68.tar.gz</p>\n<h5 id=\"2-解压压缩文件\"><a class=\"anchor\" href=\"#2-解压压缩文件\">#</a> 2、解压压缩文件</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#tar -xvf   apache-tomcat-7.0.68.tar.gz -C /usr/local/  #解压到的路径</span></pre></td></tr></table></figure><h5 id=\"3-配置环境变量\"><a class=\"anchor\" href=\"#3-配置环境变量\">#</a> 3、配置环境变量</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span>  /etc/profile</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### 自己定义为位置</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">CATALINA_BASE</span><span class=\"token operator\">=</span>/usr/local/apache-tomcat-7.0.68</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">$CATALINA_BASE</span>/bin:<span class=\"token environment constant\">$PATH</span></pre></td></tr></table></figure><h5 id=\"4-使用环境变量生效\"><a class=\"anchor\" href=\"#4-使用环境变量生效\">#</a> 4、使用环境变量生效</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">source</span> /etc/profile</pre></td></tr></table></figure><h5 id=\"5-启动tomcat服务\"><a class=\"anchor\" href=\"#5-启动tomcat服务\">#</a> 5、启动 Tomcat 服务</h5>\n<ul>\n<li>注：要是远程访问你关注防火墙问题</li>\n</ul>\n<p>启动 Tomcat 服务：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./startup.sh</pre></td></tr></table></figure><p>启动 Tomcat 并输出启动日志 :</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./startup.sh <span class=\"token operator\">&amp;</span> <span class=\"token function\">tail</span> <span class=\"token parameter variable\">-f</span>  <span class=\"token punctuation\">..</span>/logs/catalina.out</pre></td></tr></table></figure>\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/Solr-tool/",
            "url": "https://eth168.top/tools/Solr-tool/",
            "title": "Solr",
            "date_published": "2022-10-31T15:06:22.705Z",
            "content_html": "<h2 id=\"solr安装\"><a class=\"anchor\" href=\"#solr安装\">#</a> Solr 安装</h2>\n<h3 id=\"1\"><a class=\"anchor\" href=\"#1\">#</a> ——1</h3>\n<p>​\tSolr 是使用 Java 编写，所以必选先安装 JDK。</p>\n<h4 id=\"1上传并解压\"><a class=\"anchor\" href=\"#1上传并解压\">#</a> 1. 上传并解压</h4>\n<p>​\t上传压缩包 solr-7.7.2.tgz 到 /usr/local/tmp 中。</p>\n<p>​\t解压</p>\n<pre><code> cd /usr/local/tmp\n tar zxf solr-7.7.2.tgz -C /usr/local/tmp\n</code></pre>\n<h4 id=\"2复制到usrlocal中\"><a class=\"anchor\" href=\"#2复制到usrlocal中\">#</a> 2. 复制到 /usr/local 中</h4>\n<pre><code> cp -r solr-7.7.2 ../solr\n</code></pre>\n<h4 id=\"3修改启动参数\"><a class=\"anchor\" href=\"#3修改启动参数\">#</a> 3. 修改启动参数</h4>\n<p>​\t修改启动参数，否则启动时报警告。提示设置 SOLR_ULIMIT_CHECKS=false</p>\n<pre><code> cd /usr/local/solr/bin\n vim solr.in.sh\n</code></pre>\n<img data-src=\"/tools/Solr-tool/solr-02.jpg\" class=\"\">\n<h4 id=\"4启动solr\"><a class=\"anchor\" href=\"#4启动solr\">#</a> 4. 启动 Solr</h4>\n<p>​\tSolr 内嵌 Jetty，直接启动即可。监听 8983 端口。</p>\n<p>​\tsolr 默认不推荐 root 账户启动，如果是 root 账户启动需要添加 - force 参数。</p>\n<pre><code>## ./solr start -force\n</code></pre>\n<h4 id=\"5-可视化管理界面\"><a class=\"anchor\" href=\"#5-可视化管理界面\">#</a> 5、可视化管理界面</h4>\n<p>​\t在关闭防火墙的前提下，可以在 windows 的浏览器中访问 Solr。</p>\n<p>​\t输入: <span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguOTMuMTA6ODk4Mw==\">http://192.168.93.10:8983</span> 就可以访问 Solr 的可视化管理界面。</p>\n<p>​\t左侧有 5 个菜单。分别是：</p>\n<p>​\t（1）Dashboard：面板显示 Solr 的总体信息。</p>\n<p>​\t（2）Logging：日志</p>\n<p>​\t（3）Core Admin：Solr 的核心。类似于数据的 Database</p>\n<p>​\t（4）Java Perperties：所有 Java 相关属性。</p>\n<p>​\t（5）Thread Dump：线程相关信息。</p>\n<p>​\t（6）如果有 Core，将显示在此处。</p>\n<img data-src=\"/tools/Solr-tool/solr-03.JPG\" class=\"\">\n<h4 id=\"6-新建核心\"><a class=\"anchor\" href=\"#6-新建核心\">#</a> 6、新建核心</h4>\n<p>​\tSolr 安装完成后默认是没有核心的。需要手动配置。</p>\n<p>​\t需要在 solr/server/solr 下新建文件夹，并给定配置文件，否则无法建立。</p>\n<img data-src=\"/tools/Solr-tool/solr-04.JPG\" class=\"\">\n<h5 id=\"61新建目录\"><a class=\"anchor\" href=\"#61新建目录\">#</a> 6.1. 新建目录</h5>\n<p>​\t在 /usr/local/solr/server/solr 中新建自定义名称目录。此处示例名称为 testcore。</p>\n<pre><code> cd /usr/local/solr/server/solr\n mkdir testcore\n</code></pre>\n<h5 id=\"62复制配置文件\"><a class=\"anchor\" href=\"#62复制配置文件\">#</a> 6.2. 复制配置文件</h5>\n<p>​\t在 configsets 里面包含了_default 和 sample_techproducts_configs。里面都是配置文件示例。_default 属于默认配置，较纯净。sample_techproducts_configs 是带有了一些配置示例。</p>\n<pre><code>## cp -r configsets/_default/conf/ testcore/\n</code></pre>\n<h5 id=\"63填写core信息\"><a class=\"anchor\" href=\"#63填写core信息\">#</a> 6.3. 填写 Core 信息</h5>\n<p>​\t在可视化管理界面中 Core Admin 中编写信息后点击 Add Core 后，短暂延迟后 testcore 就会创建成功。schema 处不用更改。</p>\n<img data-src=\"/tools/Solr-tool/solr-05.JPG\" class=\"\">\n<h6 id=\"64出现testcore\"><a class=\"anchor\" href=\"#64出现testcore\">#</a> 6.4. 出现 testcore</h6>\n<p>​\t在客户端管理界面中，选择新建的 Core 后，就可以按照自己项目的需求进行操作了。</p>\n<img data-src=\"/tools/Solr-tool/solr-06.jpg\" class=\"\">\n<h4 id=\"7-分词analysis\"><a class=\"anchor\" href=\"#7-分词analysis\">#</a> 7、分词 Analysis</h4>\n<p>​\t在 Solr 可视化管理界面中，Core 的管理菜单项中都会有 Analysis。表示根据 Scheme.xml (managed-schema) 中配置要求进行解析。</p>\n<p>​\t对英文解析就比较简单了，只要按照空格把英文语句拆分成英文单词即可。</p>\n<img data-src=\"/tools/Solr-tool/solr-07.jpg\" class=\"\">\n<p>​\t但是如果条件是中文时，把一句话按照字进行拆分就不是很合理了。正确的方式是按照合理的词组进行拆分。<img data-src=\"/tools/Solr-tool/solr-08.jpg\" class=\"\"></p>\n<h6 id=\"71配置步骤\"><a class=\"anchor\" href=\"#71配置步骤\">#</a> 7.1. 配置步骤</h6>\n<p>​\t上传 ik-analyzer.jar 到 webapps 中。</p>\n<p>​\t去 https://search.maven.org/search?q=com.github.magese 下载对应版本的 ik-analyzer。可以在资料中直接获取。</p>\n<h6 id=\"711上传jar到指定目录\"><a class=\"anchor\" href=\"#711上传jar到指定目录\">#</a> 7.1.1 上传 jar 到指定目录</h6>\n<p>​\t上传 ik-analyzer-7.7.0.jar 到</p>\n<p>​\t/usr/local/solr/server/solr-webapp/webapp/WEB-INF/lib 目录中</p>\n<h6 id=\"712修改配置文件\"><a class=\"anchor\" href=\"#712修改配置文件\">#</a> 7.1.2 修改配置文件</h6>\n<p>​\t修改 /usr/local/solr/server/solr/testcore/conf/managed-schema</p>\n<pre><code>## vim /usr/local/solr/server/solr/testcore/conf/managed-schema\n</code></pre>\n<p>​\t添加下面内容。</p>\n<p>​\t排版：Esc 退出编辑状态下：gg=G</p>\n<pre><code>&lt;field name=&quot;myfield&quot; type=&quot;text_ik&quot; indexed=&quot;true&quot; stored=&quot;true&quot; /&gt;\n    &lt;fieldType name=&quot;text_ik&quot; class=&quot;solr.TextField&quot;&gt;\n            &lt;analyzer type=&quot;index&quot;&gt;\n                    &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;false&quot; conf=&quot;ik.conf&quot;/&gt;\n                    &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n            &lt;/analyzer&gt;\n            &lt;analyzer type=&quot;query&quot;&gt;\n                    &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;true&quot; conf=&quot;ik.conf&quot;/&gt;\n                    &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n            &lt;/analyzer&gt;\n    &lt;/fieldType&gt;\n</code></pre>\n<h6 id=\"713重启\"><a class=\"anchor\" href=\"#713重启\">#</a> 7.1.3 重启</h6>\n<pre><code>## cd /usr/local/solr/bin\n## ./solr stop -all\n## ./solr start -force\n</code></pre>\n<h6 id=\"714验证\"><a class=\"anchor\" href=\"#714验证\">#</a> 7.1.4 验证</h6>\n<p>​\t可以在可视化管理界面中找到 myfield 属性进行验证。</p>\n<img data-src=\"/tools/Solr-tool/solr-09.jpg\" class=\"\">\n<h6 id=\"72managed-schema配置说明\"><a class=\"anchor\" href=\"#72managed-schema配置说明\">#</a> 7.2.managed-schema 配置说明</h6>\n<h6 id=\"721-fieldtype\"><a class=\"anchor\" href=\"#721-fieldtype\">#</a> 7.2.1&lt; fieldType/&gt;</h6>\n<p>​\t表示定义一个属性类型。在 Solr 中属性类型都是自定义的。在上面配置中 name=”text_ik” 为自定义类型。当某个属性取值为 text_ik 时 IK Analyzer 才能生效。</p>\n<h6 id=\"722-field\"><a class=\"anchor\" href=\"#722-field\">#</a> 7.2.2&lt; field/&gt;</h6>\n<p>​\t表示向 Document 中添加一个属性。</p>\n<p>​\t常用属性：</p>\n<p>​\t\tname: 属性名</p>\n<p>​\t\ttype: 属性类型。所有类型都是 solr 使用<fieldType>配置的</p>\n<p>​\t\tindexed: 是否建立索引</p>\n<p>​\t\tstored: solr 是否把该属性值响应给搜索用户。</p>\n<p>​\t\trequired：该属性是否是必须的。默认 id 是必须的。</p>\n<p>​\t\tmultiValued：如果为 true，表示该属性为复合属性，此属性中包含了多个其他的属性。常用在多个列作为搜索条件时，把这些列定义定义成一个新的复合属性，通过搜索一个复合属性就可以实现搜索多个列。当设置为 true 时与 &lt;copyField source=&quot;&quot;dest=&quot;&quot;/&gt; 结合使用</p>\n<h6 id=\"723-uniquekey\"><a class=\"anchor\" href=\"#723-uniquekey\">#</a> 7.2.3&lt; uniqueKey&gt;</h6>\n<p>​\t唯一主键，Solr 中默认定义 id 属性为唯一主键。ID 的值是不允许重复的。</p>\n<h6 id=\"724-dynamicfield\"><a class=\"anchor\" href=\"#724-dynamicfield\">#</a> 7.2.4&lt; dynamicField&gt;</h6>\n<p>​\t名称中允许 * 进行通配。代表满足特定名称要求的一组属性。</p>\n<pre><code>msb_java    \n</code></pre>\n<p>​\tmsb_bigdata</p>\n<p>​\tmsb_UI</p>\n<p>​        msb_*</p>\n<h4 id=\"8-dataimport\"><a class=\"anchor\" href=\"#8-dataimport\">#</a> 8、Dataimport</h4>\n<p>​\t可以使用 Solr 自带的 Dataimport 功能把数据库中数据快速导入到 solr 中.</p>\n<p>​\t<strong>必须保证 managed-schema 和数据库中表的列对应。，添加配置</strong></p>\n<h6 id=\"81修改配置文件\"><a class=\"anchor\" href=\"#81修改配置文件\">#</a> 8.1. 修改配置文件</h6>\n<p>​\t修改 solrconfig.xml，添加下面内容</p>\n<pre><code> &lt;!-- 配置数据导入的处理器 --&gt;\n  &lt;requestHandler name=&quot;/dataimport&quot; class=&quot;org.apache.solr.handler.dataimport.DataImportHandler&quot;&gt;\n    &lt;lst name=&quot;defaults&quot;&gt;\n\t  &lt;!--  加载data-config.xml  --&gt;\n      &lt;str name=&quot;config&quot;&gt;data-config.xml&lt;/str&gt;\n     &lt;/lst&gt;\n  &lt;/requestHandler&gt;\n</code></pre>\n<h6 id=\"82新建data-configxml\"><a class=\"anchor\" href=\"#82新建data-configxml\">#</a> 8.2. 新建 data-config.xml</h6>\n<p>​\t和 solrconfig.xml 同一目录下新建 data-config.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;dataConfig&gt;\n        &lt;dataSource type=&quot;JdbcDataSource&quot;   \n                driver=&quot;com.mysql.jdbc.Driver&quot;   \n                url=&quot;jdbc:mysql://192.168.1.135:3306/mytest&quot;   \n                user=&quot;root&quot;   \n                password=&quot;root&quot;/&gt;\n        &lt;document&gt;\n            &lt;entity name=&quot;product&quot; query=&quot;SELECT id,name,price from t_product&quot;&gt;\n                &lt;!-- \n                 实现数据库的列和索引库的字段的映射\n                 column 指定数据库的列表\n                 name  指定索引库的字段名字，必须和schema.xml中定义的一样\n                 --&gt;\n                 &lt;field column=&quot;id&quot; name=&quot;id&quot;/&gt;\n                 &lt;field column=&quot;name&quot; name=&quot;name&quot;/&gt;\n\t\t\t\t &lt;field column=&quot;price&quot; name=&quot;price&quot;/&gt;\n            &lt;/entity&gt;\n         &lt;/document&gt;\n&lt;/dataConfig&gt;\n</code></pre>\n<h6 id=\"83添加jar\"><a class=\"anchor\" href=\"#83添加jar\">#</a> 8.3. 添加 jar</h6>\n<p>​\t向 solr-webapp 中添加<strong>三个 jar</strong>。在<strong> dist 中两个还有一个数据库驱动。（自己去 maven-repository 里面找一个 mysql-connector-java ）</strong></p>\n<img data-src=\"/tools/Solr-tool/solr-10.jpg\" class=\"\">\n<h6 id=\"84操作\"><a class=\"anchor\" href=\"#84操作\">#</a> 8.4. 操作</h6>\n<p>​\t重启 solr 后，在可视化管理页面中进行数据导入。</p>\n<p>​\t注意：</p>\n<p>​\t点击导入按钮后，要记得点击刷新按钮。</p>\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/redis-tool/",
            "url": "https://eth168.top/tools/redis-tool/",
            "title": "redis",
            "date_published": "2022-10-31T15:06:22.703Z",
            "content_html": "<h3 id=\"redis安装\"><a class=\"anchor\" href=\"#redis安装\">#</a> redis 安装</h3>\n<h4 id=\"1\"><a class=\"anchor\" href=\"#1\">#</a> ——1</h4>\n<h5 id=\"1安装依赖c语言依赖\"><a class=\"anchor\" href=\"#1安装依赖c语言依赖\">#</a> 1. 安装依赖 C 语言依赖</h5>\n<p>​\tredis 使用 C 语言编写，所以需要安装 C 语言库</p>\n<pre><code> yum install -y gcc-c++ automake autoconf libtool make tcl \n</code></pre>\n<p>​</p>\n<h5 id=\"2上传并解压\"><a class=\"anchor\" href=\"#2上传并解压\">#</a> 2. 上传并解压</h5>\n<p>​\t把 redis-5.0.5.tar.gz 上传到 /usr/local/tmp 中，解压文件</p>\n<pre><code> cd /usr/local/tmp\n\n tar zxf redis-5.0.5.tar.gz\n</code></pre>\n<h5 id=\"3编译并安装\"><a class=\"anchor\" href=\"#3编译并安装\">#</a> 3. 编译并安装</h5>\n<p>​\t进入解压文件夹</p>\n<pre><code>  cd /usr/local/tmp/redis-5.0.5/\n</code></pre>\n<p>​\t编译</p>\n<pre><code> make\n</code></pre>\n<p>​\t安装</p>\n<pre><code> make install PREFIX=/usr/local/redis\n</code></pre>\n<h5 id=\"4开启守护进程\"><a class=\"anchor\" href=\"#4开启守护进程\">#</a> 4. 开启守护进程</h5>\n<p>​\t复制 cd /usr/local/tmp/redis-5.0.5 / 中 redis.conf 配置文件</p>\n<pre><code> cp redis.conf /usr/local/redis/bin/\n</code></pre>\n<p><strong>修改配置文件</strong></p>\n<pre><code> cd /usr/local/redis/bin/\n\n vim redis.conf\n</code></pre>\n<p>​\t把 daemonize 的值由 no 修改为 yes</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/Redis-01.jpg\" alt=\"\" /></p>\n<h5 id=\"5修改外部访问\"><a class=\"anchor\" href=\"#5修改外部访问\">#</a> 5. 修改外部访问</h5>\n<p>​\t在 redis5 中需要修改配置文件 redis.conf 允许外部访问。需要修改两处。</p>\n<p>​\t注释掉下面</p>\n<p>​\tbind 127.0.0.1</p>\n<pre><code> bind 127.0.0.1\n</code></pre>\n<p>​\tprotected-mode yes 改成 no</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/Redis-02.jpg\" alt=\"\" /></p>\n<h5 id=\"6启动并测试\"><a class=\"anchor\" href=\"#6启动并测试\">#</a> 6. 启动并测试</h5>\n<p>​\t启动 redis</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./redis-server redis.conf</pre></td></tr></table></figure><p>​\t重启 redis</p>\n<pre><code>./redis-cli shutdown\n./redis-server redis.conf\n</code></pre>\n<p>​\t启动客户端工具</p>\n<p>​\t在 redis5 中客户端工具对命令会有提供功能。</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./redis-cli</pre></td></tr></table></figure><h4 id=\"2\"><a class=\"anchor\" href=\"#2\">#</a> ——2</h4>\n<h5 id=\"1-拉取镜像文件\"><a class=\"anchor\" href=\"#1-拉取镜像文件\">#</a> 1、拉取镜像文件</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> pull redis<span class=\"token punctuation\">[</span>:<span class=\"token punctuation\">(</span>版本号<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h5 id=\"2-去gitee库中下载redis配置文件docker不自带配置文件也可不进行此步骤\"><a class=\"anchor\" href=\"#2-去gitee库中下载redis配置文件docker不自带配置文件也可不进行此步骤\">#</a> 2、去 gitee 库中下载 redis 配置文件（docker 不自带配置文件）【也可不进行此步骤】</h5>\n<p><strong>建议看完，先别操作，再看三，看完三之后再决定如何操作</strong></p>\n<p>然后按照文章内容进行，忽略下载。</p>\n<p>文章地址： <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamI1MS5uZXQvYXJ0aWNsZS8yMDMyNzQuaHRt\">https://www.jb51.net/article/203274.htm</span></p>\n<p>、</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/1645177895314.png\" alt=\"1645177895314\" /></p>\n<p><strong>docker 镜像中没有 redis.conf 文件，要自己配置</strong></p>\n<pre><code class=\"language-undefined\">git pull --rebase https://gitee.com/zjj3366/mydemo.git master\n</code></pre>\n<h5 id=\"3-创建一个redis-服务容器\"><a class=\"anchor\" href=\"#3-创建一个redis-服务容器\">#</a> 3、创建一个 redis 服务容器</h5>\n<p><strong>第二步进行了的</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-p</span> <span class=\"token number\">6379</span>:6379 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token parameter variable\">--name</span> myredis  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token parameter variable\">-v</span> /usr/local/docker/redis.conf:/etc/redis/redis.conf   <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token parameter variable\">-v</span> /usr/local/docker/data:/data  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token parameter variable\">--restart</span><span class=\"token operator\">=</span>always <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token parameter variable\">-d</span> redis:5.0 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>redis-server  /etc/redis/redis.conf  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token parameter variable\">--appendonly</span> <span class=\"token function\">yes</span></pre></td></tr></table></figure><p><strong>第二步没有进行的</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-p</span> <span class=\"token number\">6379</span>:6379  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token parameter variable\">--name</span> myredis  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token parameter variable\">-v</span> /root/myredis/data:/data <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token parameter variable\">-v</span> /root/myredis/conf/redis.conf:/etc/redis/redis.conf  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token parameter variable\">-d</span> redis:5.0  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>redis-server /etc/redis/redis.conf  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token parameter variable\">--appendonly</span> <span class=\"token function\">yes</span></pre></td></tr></table></figure><p><strong>区别：</strong></p>\n<p>​\t其实也没有什么区别，只是映射的文件不同，也可以将第二步的文件直接创建到第二种创建服务容器的配置文件地址中去，这样也可使用第二个创建方式。</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/1645177877202.png\" alt=\"1645177877202\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/1645177918077.png\" alt=\"1645177918077\" /></p>\n<h2 id=\"快速启动\"><a class=\"anchor\" href=\"#快速启动\">#</a> 快速启动</h2>\n<p><strong>注意：</strong></p>\n<p>​\t配置文件一定要手动创建在特定目录</p>\n<p>​\t配置文件在上面，或者去 github 上面找，直接搜索 redis，然后切换分支找对应版本，然后找 conf 即可。</p>\n<h3 id=\"单机模式\"><a class=\"anchor\" href=\"#单机模式\">#</a> 单机模式</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3N0YW5kYWxvbmUuc2g=\">standalone.sh</span>\t单机模式启动，容器名称：redis，\t\t端口：6379</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-p</span> <span class=\"token number\">6379</span>:6379 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token parameter variable\">--name</span> redis  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token parameter variable\">-v</span> /root/redis/conf/redis.conf:/etc/redis/redis.conf   <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token parameter variable\">-v</span> /root/redis/data:/data  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token parameter variable\">--restart</span><span class=\"token operator\">=</span>always <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token parameter variable\">-d</span> redis:6.2 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>redis-server  /etc/redis/redis.conf <span class=\"token parameter variable\">--appendonly</span> <span class=\"token function\">yes</span></pre></td></tr></table></figure><h3 id=\"集群模式\"><a class=\"anchor\" href=\"#集群模式\">#</a> 集群模式</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2NsdXN0ZXIuc2g=\">cluster.sh</span>\t\t集群模式启动，容器名称：node (1..x)\t端口：600 (1..x)</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token shebang important\">#!/bin/bash</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#for i in (1..3) </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token builtin class-name\">getopts</span> <span class=\"token string\">\":s:m:d:\"</span> opt<span class=\"token punctuation\">;</span><span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token keyword\">case</span> <span class=\"token variable\">$opt</span> <span class=\"token keyword\">in</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        m<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\"># echo \"参数 a 的值 $OPTARG\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"创建的集群数量为：<span class=\"token variable\">$OPTARG</span>\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token assign-left variable\">j</span><span class=\"token operator\">=</span><span class=\"token variable\">$OPTARG</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token assign-left variable\">default_redis_cluster</span><span class=\"token operator\">=</span>j</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token keyword\">for</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span>i <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>$j<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">))</span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-p</span> <span class=\"token number\">600</span><span class=\"token variable\">$i</span>:6379 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token parameter variable\">--name</span> <span class=\"token function\">node</span><span class=\"token variable\">$i</span>  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t<span class=\"token parameter variable\">-v</span> /root/redis/conf/redis.conf:/etc/redis/redis.conf   <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t<span class=\"token parameter variable\">-v</span> /root/redis/data:/data  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token parameter variable\">--restart</span><span class=\"token operator\">=</span>always <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t<span class=\"token parameter variable\">-d</span> redis:6.2 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\tredis-server  /etc/redis/redis.conf <span class=\"token parameter variable\">--appendonly</span> <span class=\"token function\">yes</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t<span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t<span class=\"token builtin class-name\">unset</span> j</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token comment\">#echo \"参数 b 的值 $OPTARG\"</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\tehco <span class=\"token string\">\"修改redis中的一写配置：<span class=\"token variable\">$OPTARG</span>\"</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t<span class=\"token keyword\">for</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span>i<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>$default_redis_cluster<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">))</span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t<span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t<span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token function\">node</span><span class=\"token variable\">$i</span> redis <span class=\"token parameter variable\">-s</span> <span class=\"token variable\">$OPTARG</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>\t<span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>\td<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"redis集群搭建，默认3台设备\"</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t<span class=\"token assign-left variable\">j</span><span class=\"token operator\">=</span><span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t<span class=\"token assign-left variable\">default_redis_cluster</span><span class=\"token operator\">=</span>j</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>\t<span class=\"token keyword\">for</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span>i <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>$default_redis_cluster<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">))</span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>\t<span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>\t<span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-p</span> <span class=\"token number\">600</span><span class=\"token variable\">$i</span>:6379 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>\t<span class=\"token parameter variable\">--name</span> <span class=\"token function\">node</span><span class=\"token variable\">$i</span>  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>\t<span class=\"token parameter variable\">-v</span> /root/redis/conf/redis.conf:/etc/redis/redis.conf   <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>\t<span class=\"token parameter variable\">-v</span> /root/redis/data:/data  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>\t<span class=\"token parameter variable\">--restart</span><span class=\"token operator\">=</span>always <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>\t<span class=\"token parameter variable\">-d</span> redis:6.2 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>\tredis-server  /etc/redis/redis.conf <span class=\"token parameter variable\">--appendonly</span> <span class=\"token function\">yes</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>\t<span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>\t<span class=\"token builtin class-name\">unset</span> j</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>\t<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        ?<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"无效参数！\"</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token keyword\">esac</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token keyword\">done</span></pre></td></tr></table></figure>\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/RabbitMQ-tool/",
            "url": "https://eth168.top/tools/RabbitMQ-tool/",
            "title": "RabbitMQ",
            "date_published": "2022-10-31T15:06:22.701Z",
            "content_html": "<h3 id=\"rabbitmq安装\"><a class=\"anchor\" href=\"#rabbitmq安装\">#</a> RabbitMQ<strong> 安装</strong></h3>\n<h4 id=\"1-上传并解压\"><a class=\"anchor\" href=\"#1-上传并解压\">#</a> 1 <strong>上传并解压</strong></h4>\n<p>​\t上传 rabbitmq-server-generic-unix-3.7.18.tar.xz 到 /usr/loca/tmp 中</p>\n<pre><code>  cd /usr/local/tmp\n  \n  tar xf rabbitmq-server-generic-unix-3.7.18.tar.xz -C /usr/local/tmp\n</code></pre>\n<h4 id=\"2-复制到local下\"><a class=\"anchor\" href=\"#2-复制到local下\">#</a> 2 <strong>复制到 local 下</strong></h4>\n<p>​\t复制解压文件到 /usr/local 下，命名为 rabbitmq</p>\n<pre><code>  cp -r rabbitmq_server-3.7.18 /usr/local/rabbitmq\n</code></pre>\n<h4 id=\"3-配置环境变量\"><a class=\"anchor\" href=\"#3-配置环境变量\">#</a> 3 <strong>配置环境变量</strong></h4>\n<pre><code>  vim /etc/profile\n</code></pre>\n<p>​\t在文件中添加</p>\n<pre><code>export PATH=$PATH:/usr/local/rabbitmq/sbin\n</code></pre>\n<p>​\t解析文件</p>\n<pre><code> source /etc/profile\n</code></pre>\n<h4 id=\"4-开启web管理插件\"><a class=\"anchor\" href=\"#4-开启web管理插件\">#</a> 4 <strong>开启 web 管理插件</strong></h4>\n<p>​\t进入 rabbitmq/sbin 目录</p>\n<pre><code> cd /usr/local/rabbitmq/sbin\n</code></pre>\n<pre><code>查看插件列表\n</code></pre>\n<pre><code>  ./rabbitmq-plugins list\n</code></pre>\n<pre><code>生效管理插件\n</code></pre>\n<pre><code>  ./rabbitmq-plugins enable rabbitmq_management\n</code></pre>\n<h4 id=\"5-后台运行\"><a class=\"anchor\" href=\"#5-后台运行\">#</a> 5 <strong>后台运行</strong></h4>\n<p>​\t启动 rabbitmq。</p>\n<pre><code>  ./rabbitmq-server -detached\n</code></pre>\n<p>​\t停止命令，如果无法停止，使用 kill -9 进程号进行关闭</p>\n<pre><code> ./rabbitmqctl stop_app\n</code></pre>\n<h4 id=\"6-查看web管理界面\"><a class=\"anchor\" href=\"#6-查看web管理界面\">#</a> 6 <strong>查看 web 管理界面</strong></h4>\n<p>​\t默认可以在安装 rabbitmq 的电脑上通过用户名：guest 密码 guest 进行访问 web 管理界面</p>\n<p>​\t端口号：15672（放行端口，或关闭防火墙）</p>\n<p>​\t在虚拟机浏览器中输入：</p>\n<p>​\t<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDoxNTY3Mg==\">http://localhost:15672</span></p>\n<h3 id=\"rabbitmq账户管理\"><a class=\"anchor\" href=\"#rabbitmq账户管理\">#</a> * RabbitMq 账户管理</h3>\n<h4 id=\"1-创建账户\"><a class=\"anchor\" href=\"#1-创建账户\">#</a> 1 <strong>创建账户</strong></h4>\n<p>​\t语法：./rabbitmqctl add_user username password</p>\n<pre><code> cd /usr/local/rabbitmq/sbin\n \n ./rabbitmqctl add_user mashibing mashibing\n</code></pre>\n<h4 id=\"2-给用户授予管理员角色\"><a class=\"anchor\" href=\"#2-给用户授予管理员角色\">#</a> 2 <strong>给用户授予管理员角色</strong></h4>\n<p>​\t其中 smallming 为新建用户的用户名</p>\n<pre><code> ./rabbitmqctl set_user_tags mashibing administrator\n</code></pre>\n<h4 id=\"3-给用户授权\"><a class=\"anchor\" href=\"#3-给用户授权\">#</a> 3 <strong>给用户授权</strong></h4>\n<p>​\t“/” 表示虚拟机</p>\n<p>​\tmashibing 表示用户名</p>\n<p>​\t&quot;.<em>&quot; &quot;.</em>&quot;&quot;.*&quot; 表示完整权限</p>\n<pre><code> ./rabbitmqctl set_permissions -p &quot;/&quot; mashibing &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n</code></pre>\n<h4 id=\"4-登录\"><a class=\"anchor\" href=\"#4-登录\">#</a> 4 <strong>登录</strong></h4>\n<p>​\t使用新建账户和密码在 windows 中访问 rabbitmq 并登录</p>\n<p>​\t在浏览器地址栏输入：</p>\n<p>​\t<span class=\"exturl\" data-url=\"aHR0cDovL2lwOjE1NjcyLw==\">http://ip:15672/</span></p>\n<pre><code>用户名：mashibing\n</code></pre>\n<p>​\t密码：mashibing</p>\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/python-tool/",
            "url": "https://eth168.top/tools/python-tool/",
            "title": "python",
            "date_published": "2022-10-31T15:06:22.698Z",
            "content_html": "<h3 id=\"python升级\"><a class=\"anchor\" href=\"#python升级\">#</a> Python 升级</h3>\n<p>国内镜像：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWdpc3RyeS5ucG1taXJyb3IuY29tL2JpbmFyeS5odG1s\">https://registry.npmmirror.com/binary.html</span></p>\n<h4 id=\"一-查看当前python版本\"><a class=\"anchor\" href=\"#一-查看当前python版本\">#</a> 一、<strong>查看当前 python 版本</strong></h4>\n<pre><code>#[root@ansible ~]# python -V\nPython 2.7.5\n</code></pre>\n<h4 id=\"二-下载新的python包并安装\"><a class=\"anchor\" href=\"#二-下载新的python包并安装\">#</a> 二、<strong>下载新的 python 包并安装</strong></h4>\n<p>​\t进入 python 官网（<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucHl0aG9uLm9yZw==\">https://www.python.org</span>），选择需要的版本。此处我选择当前最新版本 Python3.6.1</p>\n<pre><code>yum install gcc gcc-c++ -y\n\nwget https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tar.xz\n\ntar xvf Python-3.7.3.tar.xz \n\ncd Python-3.7.3/\n\n ./configure\n \nmake\n\nmake install\n</code></pre>\n<h4 id=\"三-验证\"><a class=\"anchor\" href=\"#三-验证\">#</a> 三、<strong>验证</strong></h4>\n<pre><code>#python -V     #一个是旧版本，一个是新版本\nPython 2.7.5\n### python3 -V\nPython 3.7.3\n</code></pre>\n<h4 id=\"四-设置3x为默认版本\"><a class=\"anchor\" href=\"#四-设置3x为默认版本\">#</a> 四、<strong>设置 3.X 为默认版本</strong></h4>\n<p>​\t查看 Python 的路径，在 /usr/bin 下面。可以看到 python 链接的是 python 2.7，所以，执行 python 就相当于执行 python 2.7。</p>\n<pre><code>#[root@ansible ~]# ls -al /usr/bin | grep python\n-rwxr-xr-x.   1 root root       11232 Dec  2  2016 abrt-action-analyze-python\nlrwxrwxrwx.   1 root root           7 May 26  2017 python -&gt; python2\nlrwxrwxrwx.   1 root root           9 May 26  2017 python2 -&gt; python2.7\n-rwxr-xr-x.   1 root root        7136 Nov  6  2016 python2.7\n</code></pre>\n<p>将原来 python 的软链接重命名：</p>\n<pre><code>  mv /usr/bin/python /usr/bin/python.bak\n</code></pre>\n<p>将 python 链接至 python3：</p>\n<pre><code>  ln -s /usr/local/bin/python3 /usr/bin/python\n</code></pre>\n<h4 id=\"五-配置yum\"><a class=\"anchor\" href=\"#五-配置yum\">#</a> 五、<strong>配置 yum</strong></h4>\n<p>​\t升级 Python 之后，由于将默认的 python 指向了 python3，yum 不能正常使用，需要编辑 yum 的配置文件，此时：</p>\n<pre><code>#[root@ansible-admin Python-3.7.3]# yum list\n  File &quot;/usr/bin/yum&quot;, line 30\n    except KeyboardInterrupt, e:\n\nSyntaxError: invalid syntax\n</code></pre>\n<p>​\t修改 /usr/bin/yum 和 /usr/libexec/urlgrabber-ext-down，将 #!/usr/bin/python 改为 #!/usr/bin/python2.7，保存退出即可。</p>\n<blockquote>\n<p>vim /usr/bin/yum</p>\n<p>vim /usr/libexec/urlgrabber-ext-down</p>\n</blockquote>\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/OpenSSL-tool/",
            "url": "https://eth168.top/tools/OpenSSL-tool/",
            "title": "OpenSSL",
            "date_published": "2022-10-31T15:06:22.696Z",
            "content_html": "<h3 id=\"openssl安装教程windows\"><a class=\"anchor\" href=\"#openssl安装教程windows\">#</a> OpenSSL 安装教程（Windows）</h3>\n<p>openssl 官网下载地址：<span class=\"exturl\" data-url=\"aHR0cDovL3NscHJvd2ViLmNvbS9wcm9kdWN0cy9XaW4zMk9wZW5TU0wuaHRtbA==\">http://slproweb.com/products/Win32OpenSSL.html</span></p>\n<h4 id=\"安装环境\"><a class=\"anchor\" href=\"#安装环境\">#</a> 安装环境:</h4>\n<blockquote>\n<p>windows 10<br />\nWin64 OpenSSL v1.1.1i</p>\n</blockquote>\n<h4 id=\"一下载openssl安装版\"><a class=\"anchor\" href=\"#一下载openssl安装版\">#</a> 一。下载 openssl 安装版</h4>\n<p>​\t我这里是 win10 64 位，所以选的中间那个</p>\n<img data-src=\"/tools/OpenSSL-tool/20201222101342278.png\" class=\"\" title=\"按照操作系统选择\"> \n<h4 id=\"二安装过程\"><a class=\"anchor\" href=\"#二安装过程\">#</a> 二。安装过程</h4>\n<p>​\t也没啥特殊的 ，一直 next，只有两点注意：</p>\n<p>1、修改安装地址</p>\n<p>2、最后一步，不要勾选，会掏钱。</p>\n <img data-src=\"/tools/OpenSSL-tool/20201222102601218.png\" class=\"\" title=\"在这里插入图片描述\"> \n <img data-src=\"/tools/OpenSSL-tool/20201222102703276.png\" class=\"\" title=\"在这里插入图片描述\"> \n <img data-src=\"/tools/OpenSSL-tool/20201222102703268.png\" class=\"\" title=\"在这里插入图片描述\"> \n <img data-src=\"/tools/OpenSSL-tool/20201222102721958.png\" class=\"\" title=\"在这里插入图片描述\"> \n<img data-src=\"/tools/OpenSSL-tool/1650347562395.png\" class=\"\">\n<h4 id=\"三配置环境变量\"><a class=\"anchor\" href=\"#三配置环境变量\">#</a> 三。配置环境变量</h4>\n<img data-src=\"/tools/OpenSSL-tool/1650351119292.png\" class=\"\">\n <img data-src=\"/tools/OpenSSL-tool/1650351138506.png\" class=\"\" width=\"1650351138506\">\n<h4 id=\"四测试\"><a class=\"anchor\" href=\"#四测试\">#</a> 四。测试</h4>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>openssl <span class=\"token parameter variable\">-version</span></pre></td></tr></table></figure><img data-src=\"/tools/OpenSSL-tool/1650351011263.png\" class=\"\">\n<h3 id=\"openssl安装linux\"><a class=\"anchor\" href=\"#openssl安装linux\">#</a> OpenSSL 安装（Linux）</h3>\n<h4 id=\"1\"><a class=\"anchor\" href=\"#1\">#</a> ——1</h4>\n<p>参考链接：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3ZlY3Rvcl9kYXRhL2FydGljbGUvZGV0YWlscy8xMDc1NTc5NDE=\">https://blog.csdn.net/vector_data/article/details/107557941</span></p>\n<h5 id=\"1安装依赖c语言依赖\"><a class=\"anchor\" href=\"#1安装依赖c语言依赖\">#</a> 1. 安装依赖 C 语言依赖</h5>\n<p>​\tredis 使用 C 语言编写，所以需要安装 C 语言库</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> gcc zlib</pre></td></tr></table></figure><p>​</p>\n<h5 id=\"2上传并解压\"><a class=\"anchor\" href=\"#2上传并解压\">#</a> 2. 上传并解压</h5>\n<p>​\t把  <code>openssl-1.1.1j.tar.gz</code>  上传到 /usr/local/tmp 中，解压文件</p>\n<pre><code> cd /usr/local/tmp\n\n tar zxf openssl-1.1.1j.tar.gz \n mv openssl-1.1.1j ../openssl\n \n</code></pre>\n<h5 id=\"3编译并安装\"><a class=\"anchor\" href=\"#3编译并安装\">#</a> 3. 编译并安装</h5>\n<p>​\t进入解压文件夹</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/openssl</pre></td></tr></table></figure><p>​\t 配置编译</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./config</pre></td></tr></table></figure><p>​\t编译安装</p>\n<pre><code>make clean &amp;&amp; make install\n</code></pre>\n<p>​\t测试</p>\n<pre><code>openssl version -a\n</code></pre>\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/Nginx-tool/",
            "url": "https://eth168.top/tools/Nginx-tool/",
            "title": "Nginx",
            "date_published": "2022-10-31T15:06:22.692Z",
            "content_html": "<h3 id=\"nginx安装\"><a class=\"anchor\" href=\"#nginx安装\">#</a> nginx 安装</h3>\n<h4 id=\"1\"><a class=\"anchor\" href=\"#1\">#</a> ——1</h4>\n<h5 id=\"安装yum\"><a class=\"anchor\" href=\"#安装yum\">#</a> 安装：yum</h5>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> yum-utils</pre></td></tr></table></figure><h5 id=\"切换目录\"><a class=\"anchor\" href=\"#切换目录\">#</a> 切换目录：</h5>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /etc/yum.repos.d/</pre></td></tr></table></figure><h5 id=\"创建文件\"><a class=\"anchor\" href=\"#创建文件\">#</a> 创建文件：</h5>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span> nginx.repo</pre></td></tr></table></figure><p><em>修改文件内容：</em></p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>nginx-stable<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span>nginx stable repo</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">baseurl</span><span class=\"token operator\">=</span>http://nginx.org/packages/centos/<span class=\"token variable\">$releasever</span>/<span class=\"token variable\">$basearch</span>/</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">gpgcheck</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">enabled</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">gpgkey</span><span class=\"token operator\">=</span>https://nginx.org/keys/nginx_signing.key</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">module_hotfixes</span><span class=\"token operator\">=</span>true</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">[</span>nginx-mainline<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span>nginx mainline repo</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token assign-left variable\">baseurl</span><span class=\"token operator\">=</span>http://nginx.org/packages/mainline/centos/<span class=\"token variable\">$releasever</span>/<span class=\"token variable\">$basearch</span>/</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token assign-left variable\">gpgcheck</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token assign-left variable\">enabled</span><span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token assign-left variable\">gpgkey</span><span class=\"token operator\">=</span>https://nginx.org/keys/nginx_signing.key</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token assign-left variable\">module_hotfixes</span><span class=\"token operator\">=</span>true</pre></td></tr></table></figure><h5 id=\"nginx的安装\"><a class=\"anchor\" href=\"#nginx的安装\">#</a> Nginx 的安装：</h5>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> nginx</pre></td></tr></table></figure><p>安装完成：我们的版本：nginx.x86_64 1:1.20.2-1.el7.ngx</p>\n<div name=\"nginx_install_2\">\n<h4 id=\"2\"><a class=\"anchor\" href=\"#2\">#</a> ——2</h4>\n<h5 id=\"1-拉取镜像\"><a class=\"anchor\" href=\"#1-拉取镜像\">#</a> 1、拉取镜像</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> pull nginx:1.16.1</pre></td></tr></table></figure><h5 id=\"2-创建挂载数据卷\"><a class=\"anchor\" href=\"#2-创建挂载数据卷\">#</a> 2、创建挂载数据卷</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> /root/nginx/conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vim</span> /root/nginx/conf/nginx.conf</pre></td></tr></table></figure><p><code>nginx.conf内容：</code></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>user  root<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>worker_processes  <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>error_log  /var/log/nginx/error.log warn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>pid        /var/run/nginx.pid<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>events <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    worker_connections  <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre> </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>http <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    include       /etc/nginx/mime.types<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    default_type  application/octet-stream<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre> </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    log_format  main  <span class=\"token string\">'$remote_addr - $remote_user [$time_local] \"$request\" '</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                      <span class=\"token string\">'$status $body_bytes_sent \"$http_referer\" '</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                      <span class=\"token string\">'\"$http_user_agent\" \"$http_x_forwarded_for\"'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre> </pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    access_log  /var/log/nginx/access.log  main<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre> </pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    sendfile        on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">#    #tcp_nopush     on;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre> </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    keepalive_timeout  <span class=\"token number\">65</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre> </pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">#    #gzip  on;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    server <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    \tlisten       <span class=\"token number\">80</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    \tserver_name  localhost<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\">#    \t#charset koi8-r;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">#    \t#access_log  /var/log/nginx/host.access.log  main;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    \tlocation / <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        \troot   /usr/share/nginx/html<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        \tindex  index.html index.htm<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    \t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\">#    \t#error_page  404              /404.html;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token comment\">#    \t# redirect server error pages to the static page /50x.html</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    \terror_page   <span class=\"token number\">500</span> <span class=\"token number\">502</span> <span class=\"token number\">503</span> <span class=\"token number\">504</span>  /50x.html<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    \tlocation <span class=\"token operator\">=</span> /50x.html <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        \troot   /usr/share/nginx/html<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    \t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>   </pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h5 id=\"3-创建容器\"><a class=\"anchor\" href=\"#3-创建容器\">#</a> 3、创建容器</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">### 注意 ip 一定要与检测 ip 相同</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token parameter variable\">-p</span> <span class=\"token number\">80</span>:80 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token parameter variable\">--name</span> nginx  <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token parameter variable\">-v</span> /root/nginx/conf/nginx.conf:/etc/nginx/nginx.conf <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token parameter variable\">-d</span> nginx:1.16.1</pre></td></tr></table></figure><h5 id=\"4-查看\"><a class=\"anchor\" href=\"#4-查看\">#</a> 4、查看</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token function\">ps</span></pre></td></tr></table></figure>\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/Nacos-tool/",
            "url": "https://eth168.top/tools/Nacos-tool/",
            "title": "Nacos",
            "date_published": "2022-10-31T15:06:22.690Z",
            "content_html": "<h3 id=\"nacos安装\"><a class=\"anchor\" href=\"#nacos安装\">#</a> Nacos 安装</h3>\n<p><strong>注：</strong></p>\n<ul>\n<li>\n<p>安装之前必须 配置  <a href=\"#jdk_install\">jdk</a></p>\n</li>\n<li>\n<p>安装之前必须 配置  <a href=\"#mysql_install\">mysql5.6.+</a></p>\n</li>\n</ul>\n<div name=\"nacos_install_1\">\n<h4 id=\"1\"><a class=\"anchor\" href=\"#1\">#</a> ——1</h4>\n<h5 id=\"1-准备安装包\"><a class=\"anchor\" href=\"#1-准备安装包\">#</a> 1、准备安装包</h5>\n<p>官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FsaWJhYmEvbmFjb3MvcmVsZWFzZXM=\">https://github.com/alibaba/nacos/releases</span></p>\n<p>本篇我们选择 version：2.0.3</p>\n<h5 id=\"2-上传并解压\"><a class=\"anchor\" href=\"#2-上传并解压\">#</a> 2、上传并解压</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">tar</span> <span class=\"token parameter variable\">-zxvf</span> nacos-server-2.0.3 .tar.gz <span class=\"token parameter variable\">-C</span> /usr/local/</pre></td></tr></table></figure><h5 id=\"3-修改配置\"><a class=\"anchor\" href=\"#3-修改配置\">#</a> 3、修改配置</h5>\n<blockquote>\n<p>1、使用 nacos-mysql.sql</p>\n<p>​\t\t为我们储存数据建立数据库、表</p>\n<p>2、 <code>application.properties里面修改数据储存位置为mysql</code></p>\n</blockquote>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/nacos/conf</pre></td></tr></table></figure><figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 1 建立数据库</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">create</span>  <span class=\"token keyword\">database</span> nacos_config<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">use</span> nacos_config<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>config_info<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'data_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>content<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">longtext</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'content'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>md5<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'md5'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_create<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'创建时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_modified<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'修改时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>src_user<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">text</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'source user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>src_ip<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'source ip'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>app_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'租户字段'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>c_desc<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>c_use<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>effect<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>type<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>c_schema<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>uk_configinfo_datagrouptenant<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8_bin <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'config_info'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>config_info_aggr<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'data_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'group_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>datum_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'datum_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>content<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">longtext</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'内容'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_modified<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'修改时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>app_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'租户字段'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>uk_configinfoaggr_datagrouptenantdatum<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>datum_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8_bin <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'增加租户字段'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>config_info_beta<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'data_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'group_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>app_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'app_name'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>content<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">longtext</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'content'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>beta_ips<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'betaIps'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>md5<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'md5'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_create<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'创建时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_modified<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'修改时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>src_user<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">text</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'source user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>src_ip<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'source ip'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'租户字段'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>uk_configinfobeta_datagrouptenant<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8_bin <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'config_info_beta'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>config_info_tag<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'data_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'group_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'tenant_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tag_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'tag_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>app_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'app_name'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>content<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">longtext</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'content'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>md5<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'md5'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_create<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'创建时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_modified<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'修改时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>src_user<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">text</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'source user'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>src_ip<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'source ip'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>  <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>uk_configinfotag_datagrouptenanttag<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tag_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8_bin <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'config_info_tag'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre></pre></td></tr><tr><td data-num=\"77\"></td><td><pre></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>config_tags_relation<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tag_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'tag_name'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tag_type<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'tag_type'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'data_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'group_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'tenant_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>nid<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>nid<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>  <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>uk_configtagrelation_configidtag<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tag_name<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tag_type<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>  <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>idx_tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8_bin <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'config_tag_relation'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre></pre></td></tr><tr><td data-num=\"91\"></td><td><pre></pre></td></tr><tr><td data-num=\"92\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_capacity<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'主键ID'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'Group ID，空字符表示整个集群'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>quota<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'配额，0表示使用默认值'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>usage<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'使用量'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>max_size<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'单个配置大小上限，单位为字节，0表示使用默认值'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>max_aggr_count<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'聚合子配置最大个数，，0表示使用默认值'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>max_aggr_size<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>max_history_count<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'最大变更历史数量'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_create<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'创建时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_modified<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'修改时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>  <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>uk_group_id<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8_bin <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'集群、各Group容量信息表'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre></pre></td></tr><tr><td data-num=\"107\"></td><td><pre></pre></td></tr><tr><td data-num=\"108\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>his_config_info<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>nid<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>group_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>app_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'app_name'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>content<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">longtext</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>md5<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_create<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_modified<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>src_user<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>src_ip<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>op_type<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">char</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'租户字段'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>nid<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>  <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>idx_gmt_create<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_create<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>  <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>idx_gmt_modified<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_modified<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>  <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>idx_did<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>data_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8_bin <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'多租户改造'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre></pre></td></tr><tr><td data-num=\"128\"></td><td><pre></pre></td></tr><tr><td data-num=\"129\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_capacity<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'主键ID'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'Tenant ID'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>quota<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'配额，0表示使用默认值'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>usage<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'使用量'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>max_size<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'单个配置大小上限，单位为字节，0表示使用默认值'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>max_aggr_count<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'聚合子配置最大个数'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>max_aggr_size<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>max_history_count<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unsigned</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'最大变更历史数量'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_create<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'创建时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_modified<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'修改时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>  <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>uk_tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8_bin <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'租户容量信息表'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre></pre></td></tr><tr><td data-num=\"144\"></td><td><pre></pre></td></tr><tr><td data-num=\"145\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_info<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>kp<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'kp'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">default</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'tenant_id'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">default</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'tenant_name'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_desc<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'tenant_desc'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>create_source<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'create_source'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_create<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'创建时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>  <span class=\"token identifier\"><span class=\"token punctuation\">`</span>gmt_modified<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'修改时间'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre>  <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>uk_tenant_info_kptenantid<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>kp<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>  <span class=\"token keyword\">KEY</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>idx_tenant_id<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>tenant_id<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COLLATE</span><span class=\"token operator\">=</span>utf8_bin <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'tenant_info'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre></pre></td></tr><tr><td data-num=\"159\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>users<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre>\t<span class=\"token identifier\"><span class=\"token punctuation\">`</span>username<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>\t<span class=\"token identifier\"><span class=\"token punctuation\">`</span>password<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre>\t<span class=\"token identifier\"><span class=\"token punctuation\">`</span>enabled<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">boolean</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span></pre></td></tr><tr><td data-num=\"163\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"164\"></td><td><pre></pre></td></tr><tr><td data-num=\"165\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>roles<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"166\"></td><td><pre>\t<span class=\"token identifier\"><span class=\"token punctuation\">`</span>username<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre>\t<span class=\"token identifier\"><span class=\"token punctuation\">`</span>role<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"168\"></td><td><pre>\t<span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">INDEX</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>idx_user_role<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>username<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">ASC</span><span class=\"token punctuation\">,</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>role<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">ASC</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">USING</span> <span class=\"token keyword\">BTREE</span></pre></td></tr><tr><td data-num=\"169\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"170\"></td><td><pre></pre></td></tr><tr><td data-num=\"171\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>permissions<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"172\"></td><td><pre>    <span class=\"token identifier\"><span class=\"token punctuation\">`</span>role<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"173\"></td><td><pre>    <span class=\"token identifier\"><span class=\"token punctuation\">`</span>resource<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"174\"></td><td><pre>    <span class=\"token identifier\"><span class=\"token punctuation\">`</span>action<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"175\"></td><td><pre>    <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">INDEX</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>uk_role_permission<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>role<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>resource<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>action<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">USING</span> <span class=\"token keyword\">BTREE</span></pre></td></tr><tr><td data-num=\"176\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"177\"></td><td><pre></pre></td></tr><tr><td data-num=\"178\"></td><td><pre><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> users <span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">,</span> enabled<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'nacos'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"179\"></td><td><pre></pre></td></tr><tr><td data-num=\"180\"></td><td><pre><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> roles <span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span> role<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'nacos'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ROLE_ADMIN'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">###2 先留取备份</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">cp</span> application.properties application.properties.bk</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">vim</span> application.properties</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">### 在 application.properties 最后添加以下内容</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">spring.datasource.platform</span><span class=\"token operator\">=</span>mysql</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">db.num</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">db.url.0</span><span class=\"token operator\">=</span>jdbc:mysql://127.0.0.1:3306/nacos_config?characterEncoding<span class=\"token operator\">=</span>utf8<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">connectTimeout</span><span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">socketTimeout</span><span class=\"token operator\">=</span><span class=\"token number\">3000</span><span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">autoReconnect</span><span class=\"token operator\">=</span>true<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">serverTimezone</span><span class=\"token operator\">=</span>UTC</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">db.user</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token assign-left variable\">db.password</span><span class=\"token operator\">=</span>root</pre></td></tr></table></figure><h5 id=\"4-开启nacos\"><a class=\"anchor\" href=\"#4-开启nacos\">#</a> 4、开启 nacos</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>/usr/local/nacos/bin/startup.sh</pre></td></tr></table></figure><h5 id=\"5-查看\"><a class=\"anchor\" href=\"#5-查看\">#</a> 5、查看</h5>\n<ul>\n<li>测试之前先关闭防火墙</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMS41Mjo4ODQ4L25hY29z\">http://192.168.1.52:8848/nacos</span></p>\n<h3 id=\"nacos集群配置\"><a class=\"anchor\" href=\"#nacos集群配置\">#</a> Nacos 集群配置</h3>\n<ul>\n<li>前提</li>\n</ul>\n<p>#&gt; 1、安装  <a href=\"#jdk_install\">jdk</a></p>\n<blockquote></blockquote>\n<p>#&gt; 2、安装之前必须 配置  <a href=\"#mysql_install\">mysql5.6.+</a></p>\n<blockquote></blockquote>\n<p>#&gt; 3、配置 <a href=\"#nginx_install_1\">nginx</a></p>\n<blockquote></blockquote>\n<p>#&gt; 4、配置 <a href=\"#nacos_install_1\">Nacos（单机版 - 1）</a></p>\n<ul>\n<li>懒加载</li>\n</ul>\n<blockquote>\n<p>我们启动 nginx 之后可能不会立即开始代理，打开日志等一会，没有结果的时候重配一下</p>\n</blockquote>\n<h4 id=\"1-2\"><a class=\"anchor\" href=\"#1-2\">#</a> ——1</h4>\n<p>#​\t* 此例中   <code>nginx:1.16</code>  安装教程为： <a href=\"#nacos_install_1\">Nacos（单机版 - 1）</a></p>\n<h5 id=\"1-修改集群配置文件\"><a class=\"anchor\" href=\"#1-修改集群配置文件\">#</a> 1、修改集群配置文件</h5>\n<p>​\t这里开始正式配置集群，首先我们要更改   <strong>cluter.conf</strong>   这个配置文件，当然我们也需要备份，但是这里它的<strong>原始名称</strong>为：<strong>cluster.conf.example</strong> ，我们需要把它保留同时复制出一个 cluster.conf 来进行更改</p>\n<p><strong>注：对于要集群启动的所有 nacos 都要做这步操作</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/nacos/conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### 先备份</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">cp</span> cluster.conf.example cluster.conf</pre></td></tr></table></figure><p>修改 <code>cluster.conf</code></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">### 格式： ip 地址：端口号</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">###</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### Copyright 1999-2018 Alibaba Group Holding Ltd.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">###</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">### Licensed under the Apache License, Version 2.0 (the \"License\");</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">### you may not use this file except in compliance with the License.</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">### You may obtain a copy of the License at</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">###</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">###      http://www.apache.org/licenses/LICENSE-2.0</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">###</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">### Unless required by applicable law or agreed to in writing, software</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">### distributed under the License is distributed on an \"AS IS\" BASIS,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">### WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">### See the License for the specific language governing permissions and</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">### limitations under the License.</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">###</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">###it is ip</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">###example</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">###192.168.16.101:8847</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">###192.168.16.102</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">###192.168.16.10</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">###ip:port</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token number\">192.168</span>.124.133:3333</pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token number\">192.168</span>.124.133:4444</pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token number\">192.168</span>.124.133:5555</pre></td></tr></table></figure><h5 id=\"2-编辑nacos的启动脚本startupsh\"><a class=\"anchor\" href=\"#2-编辑nacos的启动脚本startupsh\">#</a> 2、<span class=\"exturl\" data-url=\"aHR0cDovL3huLS1OYWNvc3N0YXJ0dXAtYmg3dDI5bmx0MGd1azlicnA0YXZ1aDd2NWUuc2g=\">编辑 Nacos 的启动脚本 startup.sh</span></h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/nacos/bin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### 先备份</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">cp</span> startup.sh starup.sh.bk</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">vim</span>  startup.sh</pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">###1  在 while 的变量中添加 o 并且在 case 中添加对应处理</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        o<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>            <span class=\"token assign-left variable\">PORT</span><span class=\"token operator\">=</span><span class=\"token variable\">$OPTARG</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">###2  在 nohup 和 \"$JAVA_OPT_EXT_FIX\" 之前配置这个</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     <span class=\"token variable\">$JAVA</span> <span class=\"token parameter variable\">-Dserver.port</span><span class=\"token operator\">=</span><span class=\"token variable\">$&#123;PORT&#125;</span></pre></td></tr></table></figure><img data-src=\"/tools/Nacos-tool/1648643016965.png\" class=\"\">\n<img data-src=\"/tools/Nacos-tool/1648643157451.png\" class=\"\">\n<h5 id=\"3-配置nginx\"><a class=\"anchor\" href=\"#3-配置nginx\">#</a> 3、配置 nginx</h5>\n<p>下图是 http 的转发，但是还是 TCP 的更好</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>upstream  cluster<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\tserver <span class=\"token number\">192.168</span>.1.52:3333<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\tserver <span class=\"token number\">192.168</span>.1.52:4444<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tserver <span class=\"token number\">192.168</span>.1.52:5555<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tproxy_pass  http://cluter<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><strong>图片中  <code>cluster</code>  写错了 少了一个 <code>s</code>  ，其实问题也不大，但是要专业～～</strong></p>\n<img data-src=\"/tools/Nacos-tool/1648643539716.png\" class=\"\">\n<p>TCP 格式：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>worker_processes  <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>events <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    worker_connections  <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>stream <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      upstream nacos <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        server <span class=\"token number\">192.168</span>.1.52:8848<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        server <span class=\"token number\">192.168</span>.1.52:8868<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        server <span class=\"token number\">192.168</span>.1.52:8888<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>     server <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        listen  <span class=\"token number\">81</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        proxy_pass nacos<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>     <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h5 id=\"4-启动nginx\"><a class=\"anchor\" href=\"#4-启动nginx\">#</a> 4、启动 Nginx</h5>\n<pre><code class=\"language-shell\">\n</code></pre>\n<h5 id=\"5-查看测试\"><a class=\"anchor\" href=\"#5-查看测试\">#</a> 5、查看测试</h5>\n<p><span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMS41Mjo4MC9uYWNvcw==\">http://192.168.1.52:80/nacos</span></p>\n<h5 id=\"6-nacos持久化\"><a class=\"anchor\" href=\"#6-nacos持久化\">#</a> 6、Nacos 持久化</h5>\n<p>我们在配置的时候没有修改他的数据库，用的是自带的 deery，如果是真的要部署要修改成 mysql。这个熟悉</p>\n<ol>\n<li>在 Linux 系统上执行 SQL 脚本，具体位置在 nacos 目录下的 conf 中，这里的操作和之前是一样的，我们可以直接打开这个文件然后拷贝到数据库中执行，当然也是要创建数据库使用数据库然后在复制脚本内容，执行即可</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create database nacos_config<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>use nacos_config<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><img data-src=\"/tools/Nacos-tool/image-20210929175710498.png\" class=\"\">\n<ol start=\"2\">\n<li>修改 application.properties 配置文件，但是修改之前我们最好做一个备份。</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cp application<span class=\"token punctuation\">.</span>properties application<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>init</pre></td></tr></table></figure><ol start=\"3\">\n<li>这里的修改和我们之间的在 win 上的修改是完全一样的，所以我们只要打开这个文件，加上对应的内容即可</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>spring<span class=\"token punctuation\">.</span>datasource<span class=\"token punctuation\">.</span>platform<span class=\"token operator\">=</span>mysql</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>db<span class=\"token punctuation\">.</span>num<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">.</span><span class=\"token number\">0</span><span class=\"token operator\">=</span>jdbc<span class=\"token operator\">:</span>mysql<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">:</span><span class=\"token number\">3306</span><span class=\"token operator\">/</span>nacos_config<span class=\"token operator\">?</span>characterEncoding<span class=\"token operator\">=</span>utf8<span class=\"token operator\">&amp;</span>connectTimeout<span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token operator\">&amp;</span>socketTimeout<span class=\"token operator\">=</span><span class=\"token number\">3000</span><span class=\"token operator\">&amp;</span>autoReconnect<span class=\"token operator\">=</span><span class=\"token boolean\">true</span><span class=\"token operator\">&amp;</span>serverTimezone<span class=\"token operator\">=</span><span class=\"token constant\">UTC</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>db<span class=\"token punctuation\">.</span>user<span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>db<span class=\"token punctuation\">.</span>password<span class=\"token operator\">=</span><span class=\"token number\">123456</span></pre></td></tr></table></figure><ol start=\"4\">\n<li>还要注意一点，如果是一台机子上部署要修改服务端口</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>#<span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span> <span class=\"token class-name\">Spring</span> <span class=\"token class-name\">Boot</span> <span class=\"token class-name\">Related</span> <span class=\"token class-name\">Configurations</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span>#</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>##### <span class=\"token class-name\">Default</span> web context path<span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>server<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>contextPath<span class=\"token operator\">=</span><span class=\"token operator\">/</span>nacos</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>##### <span class=\"token class-name\">Default</span> web server port<span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>###f服务端口</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>server<span class=\"token punctuation\">.</span>port<span class=\"token operator\">=</span><span class=\"token number\">8888</span><span class=\"token operator\">/</span><span class=\"token number\">8868</span></pre></td></tr></table></figure>\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/MySQL-tool/",
            "url": "https://eth168.top/tools/MySQL-tool/",
            "title": "MySQL",
            "date_published": "2022-10-31T15:06:22.688Z",
            "content_html": "<h3 id=\"mysql安装windows\"><a class=\"anchor\" href=\"#mysql安装windows\">#</a> MySQL 安装（Windows）</h3>\n<h4 id=\"1mysql的版本\"><a class=\"anchor\" href=\"#1mysql的版本\">#</a> 【1】MySQL 的版本：</h4>\n<p>近期主要历史版本有 5.0/5.1/5.5/5.6/5.7，目前最新版本是 MySQL8。6.0 曾经是个内部试验版本，已取消了。</p>\n<p>MySQL8.0 的版本历史</p>\n<ol>\n<li>2016-09-12 第一个 DM (development milestone) 版本 8.0.0 发布</li>\n<li>2018-04-19 第一个 GA (General Availability) 版本开始，8.0.11 发布</li>\n<li>2018-07-27 8.0.12GA 发布</li>\n<li>2018-10-22 8.0.13GA 发布</li>\n<li>2019-01-21 8.0.14GA 发布</li>\n<li>2019-02-01 8.0.15GA 发布</li>\n<li>最新的版本是 8.0.18,2019 年 10 月 14 日正式发布</li>\n<li>.... 后续更新</li>\n</ol>\n<h4 id=\"2官方下载地址\"><a class=\"anchor\" href=\"#2官方下载地址\">#</a> 【2】官方下载地址：</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXYubXlzcWwuY29tL2Rvd25sb2Fkcy93aW5kb3dzL2luc3RhbGxlci84LjAuaHRtbA==\">https://dev.mysql.com/downloads/windows/installer/8.0.html</span></p>\n<img data-src=\"/tools/MySQL-tool/1646193598821.png\" class=\"\">\n<h4 id=\"3安装过程\"><a class=\"anchor\" href=\"#3安装过程\">#</a> 【3】安装过程：</h4>\n<p><strong>1. 双击 MySQL 安装文件 mysql-installer-community-8.0.18.0.msi，出现安装类型选项。</strong></p>\n<ul>\n<li>\n<p>Developer Default：开发者默认</p>\n</li>\n<li>\n<p>Server only：只安装服务器端</p>\n</li>\n<li>\n<p>Client only：只安装客户端</p>\n</li>\n<li>\n<p>Full：安装全部选项</p>\n</li>\n<li>\n<p>Custom：自定义安装</p>\n</li>\n</ul>\n<img data-src=\"/tools/MySQL-tool/1646193860553.png\" class=\"\">\n<p><strong>2. 选择，然后继续：</strong></p>\n<img data-src=\"/tools/MySQL-tool/1646193913998.png\" class=\"\">\n<p><strong>3. 进入产品配置向导，配置多个安装细节，点击 Next 按钮即可。</strong></p>\n<img data-src=\"/tools/MySQL-tool/1646193920702.png\" class=\"\">\n<p><strong>4. 高可靠性 High Availability，采用默认选项即可。</strong></p>\n<ul>\n<li>\n<p>Standalone MySQL Server/Classic MySQL Replication: 独立 MySQL 服务器 / 经典 MySQL 复制</p>\n</li>\n<li>\n<p>InnoDB Cluster:InnoDB 集群</p>\n</li>\n</ul>\n<img data-src=\"/tools/MySQL-tool/1646193926612.png\" class=\"\">\n<p><strong>5. 类型和网络 Type and Networking，采用默认选项即可。记住 MySQL 的监听端口默认是 3306。</strong></p>\n<img data-src=\"/tools/MySQL-tool/1646193950590.png\" class=\"\">\n<p><strong>6. 身份验证方法 Authentication Method，采用默认选项即可。</strong></p>\n <img data-src=\"/tools/MySQL-tool/1646193956569.png\" class=\"\" width=\"1646193956569\">\n<p><strong>7. 账户和角色 Accounts and Roles。MySQL 管理员账户名称是 root，在此处指定 root 用户的密码。还可以在此处通过 Add User 按钮添加其他新账户，此处省略该操作。</strong></p>\n<img data-src=\"/tools/MySQL-tool/1646193968510.png\" class=\"\">\n<p><strong>8.Windows 服务：Windows Service。</strong></p>\n<ul>\n<li>\n<p>Configure MySQL Server as a Windows Service: 给 MySQL 服务器配置一个服务项。</p>\n</li>\n<li>\n<p>Windows Service Name: 服务名称，采用默认名称 MySQL80 即可。</p>\n</li>\n<li>\n<p>Start the MySQL at System Startup：系统启动时开启 MySQL 服务</p>\n</li>\n</ul>\n<img data-src=\"/tools/MySQL-tool/1646193985805.png\" class=\"\">\n<p><strong>9.Apply Configuration：点击 Execute 按钮执行开始应用这些配置项。</strong></p>\n<ul>\n<li>\n<p>Writing configuration file: 写配置文件。</p>\n</li>\n<li>\n<p>Updating Windows Firewall rules：更新 Windows 防火墙规则</p>\n</li>\n<li>\n<p>Adjusting Windows services：调整 Windows 服务</p>\n</li>\n<li>\n<p>Initializing database：初始化数据库</p>\n</li>\n<li>\n<p>Starting the server： 启动服务器</p>\n</li>\n<li>\n<p>Applying security setting：应用安全设置</p>\n</li>\n<li>\n<p>Updating the Start menu link：更新开始菜单快捷方式链接</p>\n</li>\n</ul>\n<img data-src=\"/tools/MySQL-tool/1646194015388.png\" class=\"\">\n<p><strong>PS：如果配置出错，查看右侧的 log，查看对应错误信息。</strong><br />\n<strong>执行完成后，如下图所示。单击 Finish 完成安装，进入产品配置环节。</strong></p>\n<img data-src=\"/tools/MySQL-tool/1646194023800.png\" class=\"\">\n<p><strong>10. 产品配置 Product Configuration 到此结束：点击 Next 按钮。</strong></p>\n<img data-src=\"/tools/MySQL-tool/1646194031356.png\" class=\"\">\n<p><strong>11. 安装完成 Installation Complete。点击 Finish 按钮完成安装。</strong></p>\n<img data-src=\"/tools/MySQL-tool/1646194038230.png\" class=\"\">\n<h4 id=\"4mysql配置-登录\"><a class=\"anchor\" href=\"#4mysql配置-登录\">#</a> 【4】MySQL 配置、登录</h4>\n<p><strong>【1】登录：</strong><br />\n访问 MySQL 服务器对应的命令：mysql.exe , 位置：C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin</p>\n<img data-src=\"/tools/MySQL-tool/1646194179663.png\" class=\"\">\n<p>（mysql.exe 需要带参数执行，所以直接在图形界面下执行该命令会自动结束）</p>\n<p>打开控制命令台：win+r:</p>\n<img data-src=\"/tools/MySQL-tool/1646194204312.png\" class=\"\">\n<p>执行 mysql.exe 命令的时候出现错误：</p>\n<img data-src=\"/tools/MySQL-tool/1646194212295.png\" class=\"\">\n<p>需要配置环境变量 path:</p>\n<img data-src=\"/tools/MySQL-tool/1646194221073.png\" class=\"\">\n<p><strong>注意：控制命令台必须重启才会生效：</strong></p>\n<p><strong>登录的命令：mysql  -hlocalhost -uroot –p</strong></p>\n<ul>\n<li>\n<p>mysql：bin 目录下的文件 mysql.exe。mysql 是 MySQL 的命令行工具，是一个客户端软件，可以对任何主机的 mysql 服务（即后台运行的 mysqld）发起连接。</p>\n</li>\n<li>\n<p>-h：host 主机名。后面跟要访问的数据库服务器的地址；<strong>如果是登录本机，可以省略</strong></p>\n</li>\n<li>\n<p>-u：user 用户名。后面跟登录数据的用户名，第一次安装后以 root 用户来登录，是 MySQL 的管理员用户</p>\n</li>\n<li>\n<p>-p:   password 密码。一般不直接输入，而是回车后以保密方式输入。</p>\n  <img data-src=\"/tools/MySQL-tool/1646194262329.png\" class=\"\" width=\"1646194262329\">\n</li>\n</ul>\n<p><strong>【2】访问数据库</strong></p>\n<p>显示 MySQL 中的数据库列表：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>show databases<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>默认有四个自带的数据库，每个数据库中可以有多个数据库表、视图等对象。</p>\n<p>切换当前数据库的命令：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>use mysql<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul>\n<li>\n<p>MySQL 下可以有多个数据库，如果要访问哪个数据库，需要将其置为当前数据库。</p>\n</li>\n<li>\n<p>该命令的作用就是将数据库 mysql（默认提供的四个数据库之一的名字）置为当前数据库</p>\n</li>\n</ul>\n<p>显示当前数据库的所有数据库表：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>show tables<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>MySQL 层次：不同项目对应不同的数据库组成 - 每个数据库中有很多表  - 每个表中有很多数据</p>\n<p><strong>【3】退出数据库</strong></p>\n<p>退出数据库可以使用 quit 或者 exit 命令完成，也可以用 \\q;  完成退出操作</p>\n<img data-src=\"/tools/MySQL-tool/1646194349092.png\" class=\"\">\n<h4 id=\"5卸载\"><a class=\"anchor\" href=\"#5卸载\">#</a> 【5】卸载</h4>\n<p><strong>1) 停止 MySQL 服务：在命令行模式下执行 net stop mysql 或者在 Windows 服务窗口下停止服务</strong></p>\n<img data-src=\"/tools/MySQL-tool/1646194422719.png\" class=\"\">\n<p><strong>2) 在控制面板中删除 MySQL 软件</strong></p>\n<img data-src=\"/tools/MySQL-tool/1646194431091.png\" class=\"\">\n<p><strong>3) 删除软件文件夹：直接删除安装文件夹 C:\\Program Files\\MySQL，其实此时该文件夹已经被删除或者剩下一个空文件夹。</strong></p>\n<p><strong>4) 删除数据文件夹：直接删除文件夹 C:\\ProgramData\\MySQL。此步不要忘记，否则会影响 MySQL 的再次安装。</strong><br />\n<strong>（ProgramData 文件夹可能是隐藏的，显示出来即可）</strong><br />\n<strong>（MySQL 文件下的内容才是真正的 MySQL 中数据）</strong></p>\n<p><strong>5) 删除 path 环境变量中关于 MySQL 安装路径的配置</strong></p>\n<h3 id=\"mysql-安装linux\"><a class=\"anchor\" href=\"#mysql-安装linux\">#</a> MySQL 安装（Linux）</h3>\n<h4 id=\"11\"><a class=\"anchor\" href=\"#11\">#</a> ——1.1</h4>\n<p>MySQL 安装</p>\n<h5 id=\"1-卸载原来的版本\"><a class=\"anchor\" href=\"#1-卸载原来的版本\">#</a> 1、卸载原来的版本</h5>\n<h6 id=\"1-查看mysql的安装情况\"><a class=\"anchor\" href=\"#1-查看mysql的安装情况\">#</a> 1、查看 mysql 的安装情况</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-i</span> mysql</pre></td></tr></table></figure><img data-src=\"/tools/MySQL-tool/1570605325400.png\" class=\"\">\n<h6 id=\"2-删除上图安装的软件\"><a class=\"anchor\" href=\"#2-删除上图安装的软件\">#</a> 2、删除上图安装的软件</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ev</span> <span class=\"token parameter variable\">--nodeps</span> mysql57-community-release-el5-7.noarch</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ev</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-server-5.7.18-1.el5.x86_64</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ev</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-client-5.7.18-1.el5.x86_64</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ev</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-libs-5.7.18-1.el5.x86_64</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ev</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-common-5.7.18-1.el5.x86_64</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ev</span> <span class=\"token parameter variable\">--nodeps</span> mysql-5.7.18-1.el5.x86_64</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-ev</span> <span class=\"token parameter variable\">--nodeps</span> mysql-community-libs-compat-5.7.18-1.el5.x86_64</pre></td></tr></table></figure><h6 id=\"3-都删除成功之后查找相关的mysql的文件\"><a class=\"anchor\" href=\"#3-都删除成功之后查找相关的mysql的文件\">#</a> 3、都删除成功之后，查找相关的 mysql 的文件</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">find</span> / <span class=\"token parameter variable\">-name</span> mysql</pre></td></tr></table></figure><img data-src=\"/tools/MySQL-tool/1570605553095.png\" class=\"\">\n<h6 id=\"4-删除全部文件\"><a class=\"anchor\" href=\"#4-删除全部文件\">#</a> 4、删除全部文件</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /etc/selinux/targeted/active/modules/100/mysql</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /root/mysql</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /root/mysql/data/mysql</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /var/lib/mysql</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /var/lib/mysql/mysql</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /usr/share/mysql</pre></td></tr></table></figure><h6 id=\"5-再次执行命令\"><a class=\"anchor\" href=\"#5-再次执行命令\">#</a> 5、再次执行命令</h6>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-i</span> mysql</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">### 如果没有显式则表示卸载完成</span></pre></td></tr></table></figure><h5 id=\"2-删除mariadb-libs不可省略\"><a class=\"anchor\" href=\"#2-删除mariadb-libs不可省略\">#</a> 2、删除 mariadb-libs (不可省略)</h5>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">### 检查 mariadb-libs</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">rpm</span> -qa<span class=\"token operator\">|</span><span class=\"token function\">grep</span> mariadb</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### 卸载 mariadb-libs</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>yum remove mariadb-libs</pre></td></tr></table></figure><h5 id=\"3-安装mysql\"><a class=\"anchor\" href=\"#3-安装mysql\">#</a> 3、安装 MySQL</h5>\n<h6 id=\"1输入\"><a class=\"anchor\" href=\"#1输入\">#</a> 1，输入</h6>\n<p>wegt <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXYubXlzcWwuY29tL2dldC9teXNxbCVFNyU4OSU4OCVFNiU5QyVBQyVFNSU4RiVCNy1jb21tdW5pdHktcmVsZWFzZS1lbCVFNSVBNCVBNyVFNyU4OSU4OCVFNiU5QyVBQy0lRTUlQjAlOEYlRTclODklODglRTYlOUMlQUMubm9hcmNoLnJwbQ==\">https://dev.mysql.com/get/mysql 版本号 - community-release-el 大版本 - 小版本.noarch.rpm</span></p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> https://dev.mysql.com/get/mysql57-community-release-el5-7.noarch.rpm</pre></td></tr></table></figure><h6 id=\"2-安装数据源\"><a class=\"anchor\" href=\"#2-安装数据源\">#</a> 2、安装数据源</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> mysql57-community-release-el5-7.noarch.rpm</pre></td></tr></table></figure><h6 id=\"3-查看mysql源是否安装成功\"><a class=\"anchor\" href=\"#3-查看mysql源是否安装成功\">#</a> 3、查看 mysql 源是否安装成功</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum repolist enabled <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"mysql.*-community.*\"</span></pre></td></tr></table></figure><h6 id=\"4-安装数据库\"><a class=\"anchor\" href=\"#4-安装数据库\">#</a> 4、安装数据库</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> mysql-community-server</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">### 如果过期可以在运行安装程序之前导入密钥</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">rpm</span> <span class=\"token parameter variable\">--import</span> https://repo.mysql.com/RPM-GPG-KEY-mysql-2022</pre></td></tr></table></figure><h6 id=\"5-启动mysql\"><a class=\"anchor\" href=\"#5-启动mysql\">#</a> 5、启动 mysql</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">### centos7</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systemctl restart mysqld</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>systemctl status mysqld</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">### centos6</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">service</span> mysqld start</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">service</span> mysqld status</pre></td></tr></table></figure><h6 id=\"6-显示mysql的随机密码\"><a class=\"anchor\" href=\"#6-显示mysql的随机密码\">#</a> 6、显示 mysql 的随机密码</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">grep</span> <span class=\"token string\">'temporary password'</span> /var/log/mysqld.log</pre></td></tr></table></figure><img data-src=\"/tools/MySQL-tool/image-20220827193405451.png\" class=\"\">\n<h6 id=\"7-登录并修改mysql密码\"><a class=\"anchor\" href=\"#7-登录并修改mysql密码\">#</a> 7、登录并修改 mysql 密码</h6>\n<p>登录：mysql -u root -p   \t\t然后输入上面生成的密码</p>\n<p><strong><em>修改自定义密码，设置自己想要的密码</em></strong></p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- ALTER USER 'root'@'localhost' IDENTIFIED BY ' 密码 ';</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'root'</span><span class=\"token variable\">@'localhost'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><strong><em>失败了的话就修改策略，将策略降低一下就可以了</em></strong></p>\n<p>查看密码策略：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SHOW</span> VARIABLES <span class=\"token operator\">LIKE</span> <span class=\"token string\">'validate_password%'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>修改密码策略</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 修改密码长度：（长度）</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password<span class=\"token punctuation\">.</span>length<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">-- 修改密码等级：（等级）</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password<span class=\"token punctuation\">.</span>policy<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h5 id=\"4-其他配置\"><a class=\"anchor\" href=\"#4-其他配置\">#</a> 4、其他配置</h5>\n<h6 id=\"1开机自启\"><a class=\"anchor\" href=\"#1开机自启\">#</a> 1. 开机自启</h6>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">### 开机启动</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systemctl <span class=\"token builtin class-name\">enable</span> mysql</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### 关闭自动启动</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>systemctl disable mysqld</pre></td></tr></table></figure><h6 id=\"2远程连接\"><a class=\"anchor\" href=\"#2远程连接\">#</a> 2. 远程连接</h6>\n<h6 id=\"方法一-创建一个用户-支持远程连接\"><a class=\"anchor\" href=\"#方法一-创建一个用户-支持远程连接\">#</a> 方法一、创建一个用户 支持远程连接</h6>\n<p>①登录 ：mysql -u root -p</p>\n<p>②创建用户： create user 'aaa'@'%' identified by '123456';</p>\n<p>③授权所有权限给 user 这个新用户 ：grant all on <em>.</em> to 'aaa'@'%';</p>\n<p>④退出 mysql：quit;</p>\n<h6 id=\"方法二-设置root用户支持远程连接\"><a class=\"anchor\" href=\"#方法二-设置root用户支持远程连接\">#</a> 方法二、设置 root 用户支持远程连接</h6>\n<p>①登录：mysql -u root -p （ 注：系统提示输入数据库 root 用户的密码，输入完成后即进入 mysql 控制台，这个命令的第一个 mysql 是执行命令，第二个 mysql 是系统数据名称，不一样的。）</p>\n<p>②设置权限：</p>\n<p>赋予权限格式： grant 权限 on 数据库对象 to 用户 @IP (或者相应正则)</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 新建用户规则或者直接修改 root 用户的规则 ，2 选一</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">use</span> mysql<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">-- 这里表示赋予该用户所有数据库所有表（*.* 表示所有表），% 表示所有 IP 地址。</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">ALL</span> <span class=\"token keyword\">PRIVILEGES</span> <span class=\"token keyword\">ON</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'root'</span><span class=\"token variable\">@'%'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'123456'</span> <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">OPTION</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">-- 使 root 能再任何 host 访问</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">update</span> <span class=\"token keyword\">user</span> <span class=\"token keyword\">set</span> host <span class=\"token operator\">=</span> <span class=\"token string\">'%'</span> <span class=\"token keyword\">where</span> <span class=\"token keyword\">user</span> <span class=\"token operator\">=</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>      </pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">-- 刷新</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>FLUSH <span class=\"token keyword\">PRIVILEGES</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>③查看：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">use</span> mysql<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">SELECT</span> HOST<span class=\"token punctuation\">,</span><span class=\"token keyword\">USER</span> <span class=\"token keyword\">FROM</span> <span class=\"token keyword\">USER</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><img data-src=\"/tools/MySQL-tool/920952e9041b4af1a8a49eb64e0f4430.jpeg\" class=\"\">\n<p>④退出 mysql：quit;</p>\n<h4 id=\"2\"><a class=\"anchor\" href=\"#2\">#</a> ——2</h4>\n<h5 id=\"1-查询镜像\"><a class=\"anchor\" href=\"#1-查询镜像\">#</a> 1、查询镜像</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> search mysql</pre></td></tr></table></figure><h5 id=\"2-拉取镜像\"><a class=\"anchor\" href=\"#2-拉取镜像\">#</a> 2、拉取镜像</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> pull mysql:5.7</pre></td></tr></table></figure><h5 id=\"3-构建容器\"><a class=\"anchor\" href=\"#3-构建容器\">#</a> 3、构建容器</h5>\n<p>先自己创建配置文件基础模板（<strong>要是后期要修改配置文件必须加入 模板中的两个元素，不然容器启动会出错</strong>）</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> /root/mysql/conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vim</span>  /root/mysql/conf/my.cnf</pre></td></tr></table></figure><p><strong>模板内容：</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">### Copyright (c) 2016, 2021, Oracle and/or its affiliates.</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">###</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### This program is free software; you can redistribute it and/or modify</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">### it under the terms of the GNU General Public License, version 2.0,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">### as published by the Free Software Foundation.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">###</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">### This program is also distributed with certain software (including</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">### but not limited to OpenSSL) that is licensed under separate terms,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">### as designated in a particular file or component or in included license</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">### documentation.  The authors of MySQL hereby grant you an additional</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">### permission to link the program and your derivative works with the</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">### separately licensed software that they have included with MySQL.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">###</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">### This program is distributed in the hope that it will be useful,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">### but WITHOUT ANY WARRANTY; without even the implied warranty of</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">### MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">### GNU General Public License, version 2.0, for more details.</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">###</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">### You should have received a copy of the GNU General Public License</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">### along with this program; if not, write to the Free Software</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">### Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token operator\">!</span>includedir /etc/mysql/conf.d/</pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token operator\">!</span>includedir /etc/mysql/mysql.conf.d/</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">[</span>mysql<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>default-character-set<span class=\"token operator\">=</span>utf8</pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">[</span>mysqld<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token assign-left variable\">character_set_server</span><span class=\"token operator\">=</span>utf8</pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token assign-left variable\">init_connect</span><span class=\"token operator\">=</span><span class=\"token string\">'SET NAMES utf8'</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>lower_case_table_names <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr></table></figure><p><strong>构建容器</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> run <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token parameter variable\">-p</span> <span class=\"token number\">3306</span>:3306 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token parameter variable\">-v</span> /root/mysql/data:/var/lib/mysql <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token parameter variable\">-v</span> /root/mysql/logs:/logs <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token parameter variable\">-v</span> /root/.bashrc:/root/.bashrc <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token parameter variable\">-v</span> /root/mysql/conf/my.cnf:/etc/mysql/my.cnf <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">MYSQL_ROOT_PASSWORD</span><span class=\"token operator\">=</span>root <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token parameter variable\">--name</span> mysql <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token parameter variable\">--hostname</span> node1 <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token parameter variable\">--restart</span><span class=\"token operator\">=</span>always <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token parameter variable\">-d</span> mysql:5.7</pre></td></tr></table></figure><p><strong>注</strong>：出错时将本地映射文件检查一下，要是不需要配置，只需映射直接删掉就可，以后再改配置文件</p>\n<h5 id=\"4-进入容器\"><a class=\"anchor\" href=\"#4-进入容器\">#</a> 4、进入容器</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> mysql /bin/bash</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>或者</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> mysql mysql <span class=\"token parameter variable\">-uroot</span> <span class=\"token parameter variable\">-p</span></pre></td></tr></table></figure><h5 id=\"5-查看远程连接\"><a class=\"anchor\" href=\"#5-查看远程连接\">#</a> 5、查看远程连接</h5>\n<p>还有一些方法也可以试一下</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span>.赋予权限格式：grant 权限 on 数据库对象 to 用户@IP<span class=\"token punctuation\">(</span>或者相应正则<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>　　　　注：可以赋予select,delete,update,insert,index等权限精确到某一个数据库某一个表。</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>　　　　GRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'用户名'</span>@<span class=\"token string\">'%'</span> IDENTIFIED BY <span class=\"token string\">'密码'</span> WITH GRANT OPTION<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t  GRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'root'</span>@<span class=\"token string\">'%'</span> IDENTIFIED BY <span class=\"token string\">'123456'</span> WITH GRANT OPTION<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>　　　　这里表示赋予该用户所有数据库所有表（*.*表示所有表），%表示所有IP地址。</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token number\">2</span>.刷新权限：FLUSH PRIVILEGES<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token number\">3</span>.查看权限：select user,host from mysql.user<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>二.意外</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>　　<span class=\"token number\">1</span>.配置文件种指定了blind-address：</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">#　　　　查看 Mysql 配置文件种（一般是 /etc/my.cnf 种）是否指定了 blind-address，这表示只能是某个或某几个 ip 能连接。如果有就将它注释了，前面加 #号注释。然后从启 mysql。</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    　重启mysql：service mysqld restart,如果安装的是Mariadb（我的就是）,则需要使用systemctl restart mariadb.service</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    　</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token number\">2</span>.防火墙的原因：</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>　　　　可能会报：ERROR <span class=\"token number\">2003</span> <span class=\"token punctuation\">(</span>HY000<span class=\"token punctuation\">)</span>: Can<span class=\"token string\">'t connect to MySQL server on '</span>你要连接的IP<span class=\"token string\">' (111)。</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>　　　　原因：1.可能是Mysql端口不对（默认是3306），只需加参数 -P 你的端口指定就行；</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>　　　　</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>　　　2.还有可能是有防火墙阻止，可以通过telnet来测试（可以直接关闭防火墙）。</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>　　　　　　　　　　防火墙相关命令：</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>　　　　　　　　　　　　（1）查看防火墙状态：service  iptables status或者systemctl status firewalld或者firewall-cmd --state</pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>　　　　　　　　　　　　（2）暂时关闭防火墙：systemctl stop firewalld或者service  iptables stop或者systemctl stop firewalld.service</pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>　　　　　　　　　　　　（3）永久关闭防火墙：systemctl disable firewalld或者chkconfig iptables off或者systemctl disable firewalld.service</pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>　　　　　　　　　　　　（4）重启防火墙：systemctl enable firewalld或者service iptables restart  或者systemctl restart firewalld.service</pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre> 　　　　　　　　　　　　 (5)永久关闭后重启：chkconfig iptables on</pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>　　</pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>　　3.端口未开启：（我遇到的就是这个原因）</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>　　　　　　Mysql：ERROR 2003 (HY000) 110（连接超时）</pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>　　　　　　查看你的服务器是否把对应端口打开，未打开启动就行了。　</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>　　　　　　</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>   4.Navicat连接MySQL，出现2059 - authentication plugin '</span>caching_sha2_password<span class=\"token string\">'的解决方案</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  \t</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  \t0先进入容器，</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  \tdocker exec -it mysql mysql -uroot -p</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  \t</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>#  \t1#修改加密规则password是自己的密码，root也是登陆账户，下同。</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  \tuse mysql;</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    ALTER USER '</span>root<span class=\"token string\">'@'</span>localhost<span class=\"token string\">' IDENTIFIED BY '</span>root<span class=\"token string\">' PASSWORD EXPIRE NEVER; </pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"53\"></td><td><pre>##\t2 #更新一下用户的密码 </pre></td></tr><tr><td data-num=\"54\"></td><td><pre>\tALTER USER '</span>root<span class=\"token string\">'@'</span>localhost<span class=\"token string\">' IDENTIFIED WITH mysql_native_password BY '</span>root<span class=\"token string\">';</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>##\t3#刷新权限 </pre></td></tr><tr><td data-num=\"57\"></td><td><pre>\tFLUSH PRIVILEGES; </pre></td></tr><tr><td data-num=\"58\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>##\t4#更新一下用户的密码</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>\tALTER USER '</span>root<span class=\"token string\">'@'</span>%<span class=\"token string\">' IDENTIFIED WITH mysql_native_password BY '</span>root'<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"22\"><a class=\"anchor\" href=\"#22\">#</a> ——2.2</h4>\n<p>Docker-compose 安装，配置文件去仓库里面拉</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRlZS5jb20vempqMzM2Ni9teS1ub3Rlcy90cmVlL21hc3Rlci9Eb2NrZXIvTXlTUUw=\">https://gitee.com/zjj3366/my-notes/tree/master/Docker/MySQL</span></p>\n<p>结束后直接用即可</p>\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/MyCat-tool/",
            "url": "https://eth168.top/tools/MyCat-tool/",
            "title": "MyCat",
            "date_published": "2022-10-31T15:06:22.685Z",
            "content_html": "<h2 id=\"mycatlinux\"><a class=\"anchor\" href=\"#mycatlinux\">#</a> MyCat（Linux）</h2>\n<h3 id=\"server安装\"><a class=\"anchor\" href=\"#server安装\">#</a> (Server 安装)</h3>\n<ul>\n<li>前提：</li>\n</ul>\n<p>#* 1、<a href=\"#jdk_install\">jdk 安装</a></p>\n<p>#* 2、<a href=\"#mysql_install\">mysql 安装</a></p>\n<ul>\n<li>\n<p>官网：<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5teWNhdC5vcmcuY24v\">http://www.mycat.org.cn/</span></p>\n</li>\n<li>\n<p>首先准备四台虚拟机，安装好 mysql，方便后续做读写分离和主从复制。<strong>(3.3 内容)</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">192.168</span>.85.45 node01</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">192.168</span>.85.46 node02</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">192.168</span>.85.47 node03</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">192.168</span>.85.48 node04</pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"1-下载mycat\"><a class=\"anchor\" href=\"#1-下载mycat\">#</a> 1、下载 MyCat</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2RsLm15Y2F0Lm9yZy5jbi8xLjYuNy42LzIwMjEwOTMwMjEzMDQ5L015Y2F0LXNlcnZlci0xLjYuNy42LXJlbGVhc2UtMjAyMTA5MzAyMTMwNDktbGludXgudGFyLmd6\">http://dl.mycat.org.cn/1.6.7.6/20210930213049/Mycat-server-1.6.7.6-release-20210930213049-linux.tar.gz</span></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>windows下载安装包</pre></td></tr></table></figure><h4 id=\"2-上传并解压压缩文件\"><a class=\"anchor\" href=\"#2-上传并解压压缩文件\">#</a> 2、上传并解压压缩文件</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">tar</span> <span class=\"token parameter variable\">-zxvf</span> Mycat-server-1.6.7.5-release-20200422133810-linux.tar.gz <span class=\"token parameter variable\">-C</span> /usr/local/</pre></td></tr></table></figure><h4 id=\"3-修改配置\"><a class=\"anchor\" href=\"#3-修改配置\">#</a> 3、修改配置</h4>\n<p>0、配置环境变量（可选）</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span> /etc/profile</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">### 添加如下配置信息：</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">MYCAT_HOME</span><span class=\"token operator\">=</span>/usr/local/mycat</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">$MYCAT_HOME</span>/bin:<span class=\"token environment constant\">$PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$JAVA_HOME</span>/bin</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">### 生效</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token builtin class-name\">source</span> /etc/profile</pre></td></tr></table></figure><p><strong>修改 server.xml schema.xml 之前先备份</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/mycat</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span> conf</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">cp</span> server.xml server.xml.list</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">cp</span> schema.xml schema.xml.list</pre></td></tr></table></figure><p>1、修改完成后的  <strong>server.xml</strong></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">&lt;!-- - - Licensed under the Apache License, Version 2.0 (the \"License\"); </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        - you may not use this file except in compliance with the License. - You </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        may obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        - - Unless required by applicable law or agreed to in writing, software - </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        distributed under the License is distributed on an \"AS IS\" BASIS, - WITHOUT </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        License for the specific language governing permissions and - limitations </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        under the License. --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">mycat:server</span> <span class=\"token name\">SYSTEM</span> <span class=\"token string\">\"server.dtd\"</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">mycat:</span>server</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>mycat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://io.mycat/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>user</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">defaultAccount</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>root<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>schemas<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>TESTDB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>defaultSchema<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>TESTDB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>user</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">mycat:</span>server</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>2、修改完成后的 schema.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">mycat:schema</span> <span class=\"token name\">SYSTEM</span> <span class=\"token string\">\"schema.dtd\"</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">mycat:</span>schema</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>mycat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://io.mycat/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>schema</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>TESTDB<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">checkSQLschema</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">sqlMaxLimit</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dataNode</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dn1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>schema</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dataNode</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dn1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dataHost</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>host1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">database</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>msb<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dataHost</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>host1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">maxCon</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1000<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">minCon</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">balance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                          <span class=\"token attr-name\">writeType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dbType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mysql<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dbDriver</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>native<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">switchType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span>  <span class=\"token attr-name\">slaveThreshold</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>heartbeat</span><span class=\"token punctuation\">></span></span>select user()<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>heartbeat</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>writeHost</span> <span class=\"token attr-name\">host</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hostM1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>192.168.1.45:3306<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">user</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                                   <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>readHost</span> <span class=\"token attr-name\">host</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hostS1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>192.168.1.46:3306<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">user</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>readHost</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>writeHost</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dataHost</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">mycat:</span>schema</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>3、修改 <strong>hosts</strong>  文件</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span> /etc/hosts</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### 添加</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">###ip name</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">192.168</span>.1.164 node01</pre></td></tr></table></figure><h4 id=\"4-启动mycat\"><a class=\"anchor\" href=\"#4-启动mycat\">#</a> 4、启动 mycat</h4>\n<p>​\t\tmycat 的启动有两种方式，一种是控制台启动，一种是后台启动，在初学的时候建议大家使用控制台启动的方式，当配置文件写错之后，可以方便的看到错误，及时修改，但是在生产环境中，使用后台启动的方式比较稳妥。</p>\n<p>​\t\t<strong>控制台启动：</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usrlocal/mycat/bin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>./mycat console</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">### 加入环境变量后可直接启动</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>mycat console</pre></td></tr></table></figure><p>​\t\t<strong>后台启动：</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usrlocal/mycat/bin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>./mycat start</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">### 加入环境变量后可直接启动</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>mycat start</pre></td></tr></table></figure><p>​\t\t按照如上配置在安装的时候应该不会报错，如果出现错误，根据错误的提示解决即可。</p>\n<h4 id=\"5-登录验证\"><a class=\"anchor\" href=\"#5-登录验证\">#</a> 5、登录验证</h4>\n<p>​\t\t<strong>管理窗口的登录</strong></p>\n<p>​\t\t从另外的虚拟机去登录访问当前 mycat，输入如下命令即可</p>\n<pre><code>mysql -uroot -proot -P 9066 -h ip\n</code></pre>\n<p>​\t\t此时访问的是 mycat 的管理窗口，可以通过 show @@help 查看可以执行的命令</p>\n<p>​\t\t<strong>数据窗口的登录</strong></p>\n<p>​\t\t从另外的虚拟机去登录访问 mycat，输入命令如下：【用户设置】</p>\n<pre><code>mysql -uroot -proot -P8066 -h ip\n</code></pre>\n<p>​\t\t当都能够成功的时候以为着 mycat 已经搭建完成。</p>\n<h3 id=\"mycat-web\"><a class=\"anchor\" href=\"#mycat-web\">#</a> mycat-web</h3>\n<h4 id=\"1\"><a class=\"anchor\" href=\"#1\">#</a> ——1</h4>\n<h5 id=\"1-下载mycat-web安装包\"><a class=\"anchor\" href=\"#1-下载mycat-web安装包\">#</a> 1、下载 mycat-web 安装包</h5>\n<p>​\t官方地址：<span class=\"exturl\" data-url=\"aHR0cDovL2RsLm15Y2F0Lm9yZy5jbi8=\">http://dl.mycat.org.cn/</span></p>\n<h5 id=\"2-解压安装包到usrlocal目录\"><a class=\"anchor\" href=\"#2-解压安装包到usrlocal目录\">#</a> 2、解压安装包到 /usr/local 目录</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">tar</span> <span class=\"token parameter variable\">-zxvf</span> Mycat-web-1.0-SNAPSHOT-20170102153329-linux.tar.gz <span class=\"token parameter variable\">-C</span> /usr/local/</pre></td></tr></table></figure><h4 id=\"3-进入mycat-web的目录运行启动命令\"><a class=\"anchor\" href=\"#3-进入mycat-web的目录运行启动命令\">#</a> 3、进入 mycat-web 的目录运行启动命令</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./start.sh <span class=\"token operator\">&amp;</span></pre></td></tr></table></figure><h4 id=\"4-mycat-web的服务端口是8082查看服务是否启动\"><a class=\"anchor\" href=\"#4-mycat-web的服务端口是8082查看服务是否启动\">#</a> 4、mycat-web 的服务端口是 8082，查看服务是否启动</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">netstat</span> <span class=\"token parameter variable\">-nlpt</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token number\">8082</span></pre></td></tr></table></figure><h4 id=\"5-通过地址访问服务\"><a class=\"anchor\" href=\"#5-通过地址访问服务\">#</a> 5、通过地址访问服务</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">192.168</span>.1.164:8082/mycat/</pre></td></tr></table></figure><h4 id=\"6-mycat-web配置\"><a class=\"anchor\" href=\"#6-mycat-web配置\">#</a> 6、mycat-web 配置</h4>\n<h5 id=\"61-配置zookeeper可选\"><a class=\"anchor\" href=\"#61-配置zookeeper可选\">#</a> 6.1、配置 zookeeper (可选)</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/mycat-web/mycat-web/WEB-INF/classes</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">### 修改 mycat.properties 文件，可以修改 zookeeper 的地址</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">vim</span> mycat.properties</pre></td></tr></table></figure><h5 id=\"62-添加mycat实例\"><a class=\"anchor\" href=\"#62-添加mycat实例\">#</a> 6.2、添加 mycat 实例</h5>\n<pre><code>* 在页面的mycat配置\n\n* mycat服务管理中添加mycat实例，需要填写相关的参数\n</code></pre>\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/Maven-tool/",
            "url": "https://eth168.top/tools/Maven-tool/",
            "title": "Maven-tool",
            "date_published": "2022-10-31T15:06:22.683Z",
            "content_html": "<h3 id=\"maven-安装\"><a class=\"anchor\" href=\"#maven-安装\">#</a> Maven 安装</h3>\n<blockquote>\n<p>要是新版本  <code>IDEA</code>  则不需要修改  <code>Maven</code>  ,  <code>IDEA</code>  中默认整合了  <code>Maven</code> ，只不过是版本问题</p>\n</blockquote>\n<img data-src=\"/tools/Maven-tool/image-20220513150641401.png\" class=\"\">\n<h4 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h4>\n<p>下载地址： <span class=\"exturl\" data-url=\"aHR0cDovL21hdmVuLmFwYWNoZS5vcmcv\">http://maven.apache.org/</span></p>\n<img data-src=\"/tools/Maven-tool/image-20220513150648442.png\" class=\"\">\n<img data-src=\"/tools/Maven-tool/image-20220513150655417.png\" class=\"\">\n<p>目录结构：</p>\n<img data-src=\"/tools/Maven-tool/image-20220513150703248.png\" class=\"\">\n<p>bin：存放的是执行文件，命令<br />\n在 IDEA 中可以直接集成 Maven:</p>\n<img data-src=\"/tools/Maven-tool/image-20220513150710943.png\" class=\"\">\n<p>conf 目录：下面有一个非常重要的配置文件 --》settings.xml---》maven 的核心配置文件 / 全局配置文件。</p>\n<div name=\".m2_create\">\n<blockquote>\n<p>** 注：** 如果没有  <code>.m2</code>  目录 ，自己手动执行 mvn 命令：</p>\n</blockquote>\n<pre><code>mvn help:system\n</code></pre>\n<h4 id=\"远程仓库\"><a class=\"anchor\" href=\"#远程仓库\">#</a> 远程仓库</h4>\n<p>默认的远程仓库使用的 Apache 提供的中央仓库：<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tdm5yZXBvc2l0b3J5LmNvbS8=\">https://mvnrepository.com/</span></p>\n<h4 id=\"仓库配置\"><a class=\"anchor\" href=\"#仓库配置\">#</a> 仓库配置</h4>\n<p>#修改 <a href=\"#.m2_create\">.m2/settings.xm（没有就戳我！！！！）</a></p>\n<blockquote>\n<p>一般都在本地：C:\\Users\\Lenovo\\.m2\\settings.xml</p>\n</blockquote>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">&lt;!--</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Licensed to the Apache Software Foundation (ASF) under one</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>or more contributor license agreements.  See the NOTICE file</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>distributed with this work for additional information</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>regarding copyright ownership.  The ASF licenses this file</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>to you under the Apache License, Version 2.0 (the</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\"License\"); you may not use this file except in compliance</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>with the License.  You may obtain a copy of the License at</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    http://www.apache.org/licenses/LICENSE-2.0</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>Unless required by applicable law or agreed to in writing,</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>software distributed under the License is distributed on an</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>KIND, either express or implied.  See the License for the</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>specific language governing permissions and limitations</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>under the License.</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>--></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">&lt;!--</pre></td></tr><tr><td data-num=\"23\"></td><td><pre> | This is the configuration file for Maven. It can be specified at two levels:</pre></td></tr><tr><td data-num=\"24\"></td><td><pre> |</pre></td></tr><tr><td data-num=\"25\"></td><td><pre> |  1. User Level. This settings.xml file provides configuration for a single user,</pre></td></tr><tr><td data-num=\"26\"></td><td><pre> |                 and is normally provided in $&#123;user.home&#125;/.m2/settings.xml.</pre></td></tr><tr><td data-num=\"27\"></td><td><pre> |</pre></td></tr><tr><td data-num=\"28\"></td><td><pre> |                 NOTE: This location can be overridden with the CLI option:</pre></td></tr><tr><td data-num=\"29\"></td><td><pre> |</pre></td></tr><tr><td data-num=\"30\"></td><td><pre> |                 -s /path/to/user/settings.xml</pre></td></tr><tr><td data-num=\"31\"></td><td><pre> |</pre></td></tr><tr><td data-num=\"32\"></td><td><pre> |  2. Global Level. This settings.xml file provides configuration for all Maven</pre></td></tr><tr><td data-num=\"33\"></td><td><pre> |                 users on a machine (assuming they're all using the same Maven</pre></td></tr><tr><td data-num=\"34\"></td><td><pre> |                 installation). It's normally provided in</pre></td></tr><tr><td data-num=\"35\"></td><td><pre> |                 $&#123;maven.home&#125;/conf/settings.xml.</pre></td></tr><tr><td data-num=\"36\"></td><td><pre> |</pre></td></tr><tr><td data-num=\"37\"></td><td><pre> |                 NOTE: This location can be overridden with the CLI option:</pre></td></tr><tr><td data-num=\"38\"></td><td><pre> |</pre></td></tr><tr><td data-num=\"39\"></td><td><pre> |                 -gs /path/to/global/settings.xml</pre></td></tr><tr><td data-num=\"40\"></td><td><pre> |</pre></td></tr><tr><td data-num=\"41\"></td><td><pre> | The sections in this sample file are intended to give you a running start at</pre></td></tr><tr><td data-num=\"42\"></td><td><pre> | getting the most out of your Maven installation. Where appropriate, the default</pre></td></tr><tr><td data-num=\"43\"></td><td><pre> | values (values used when the setting is not specified) are provided.</pre></td></tr><tr><td data-num=\"44\"></td><td><pre> |</pre></td></tr><tr><td data-num=\"45\"></td><td><pre> |--></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>settings</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/SETTINGS/1.0.0<span class=\"token punctuation\">\"</span></span> </pre></td></tr><tr><td data-num=\"47\"></td><td><pre>          <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span> </pre></td></tr><tr><td data-num=\"48\"></td><td><pre>          <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>\t\t  </pre></td></tr><tr><td data-num=\"50\"></td><td><pre>\t\t  <span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token comment\">&lt;!-- localRepository</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>   | The path to the local repository maven will use to store artifacts.</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>   | Default: $&#123;user.home&#125;/.m2/repository</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>  &lt;localRepository>/path/to/local/repo&lt;/localRepository></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>  --></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>   <span class=\"token comment\">&lt;!--Maven 本地仓库 --></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>localRepository</span><span class=\"token punctuation\">></span></span>D:\\_Porgram_IT\\maven-repository<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>localRepository</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token comment\">&lt;!-- interactiveMode</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>   | This will determine whether maven prompts you when it needs input. If set to false,</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>   | maven will use a sensible default value, perhaps based on some other setting, for</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>   | the parameter in question.</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>   | Default: true</pre></td></tr><tr><td data-num=\"66\"></td><td><pre>  &lt;interactiveMode>true&lt;/interactiveMode></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  --></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>  <span class=\"token comment\">&lt;!-- offline</pre></td></tr><tr><td data-num=\"70\"></td><td><pre>   | Determines whether maven should attempt to connect to the network when executing a build.</pre></td></tr><tr><td data-num=\"71\"></td><td><pre>   | This will have an effect on artifact downloads, artifact deployment, and others.</pre></td></tr><tr><td data-num=\"72\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"73\"></td><td><pre>   | Default: false</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>  &lt;offline>false&lt;/offline></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>  --></span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>  <span class=\"token comment\">&lt;!-- pluginGroups</pre></td></tr><tr><td data-num=\"78\"></td><td><pre>   | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.</pre></td></tr><tr><td data-num=\"79\"></td><td><pre>   | when invoking a command line like \"mvn prefix:goal\". Maven will automatically add the group identifiers</pre></td></tr><tr><td data-num=\"80\"></td><td><pre>   | \"org.apache.maven.plugins\" and \"org.codehaus.mojo\" if these are not already contained in the list.</pre></td></tr><tr><td data-num=\"81\"></td><td><pre>   |--></span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pluginGroups</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    <span class=\"token comment\">&lt;!-- pluginGroup</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>     | Specifies a further group identifier to use for plugin lookup.</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>    &lt;pluginGroup>com.your.plugins&lt;/pluginGroup></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>    --></span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pluginGroups</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>  <span class=\"token comment\">&lt;!-- proxies</pre></td></tr><tr><td data-num=\"90\"></td><td><pre>   | This is a list of proxies which can be used on this machine to connect to the network.</pre></td></tr><tr><td data-num=\"91\"></td><td><pre>   | Unless otherwise specified (by system property or command-line switch), the first proxy</pre></td></tr><tr><td data-num=\"92\"></td><td><pre>   | specification in this list marked as active will be used.</pre></td></tr><tr><td data-num=\"93\"></td><td><pre>   |--></span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>proxies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    <span class=\"token comment\">&lt;!-- proxy</pre></td></tr><tr><td data-num=\"96\"></td><td><pre>     | Specification for one proxy, to be used in connecting to the network.</pre></td></tr><tr><td data-num=\"97\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    &lt;proxy></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>      &lt;id>optional&lt;/id></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>      &lt;active>true&lt;/active></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>      &lt;protocol>http&lt;/protocol></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>      &lt;username>proxyuser&lt;/username></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>      &lt;password>proxypass&lt;/password></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>      &lt;host>proxy.host.net&lt;/host></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>      &lt;port>80&lt;/port></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>      &lt;nonProxyHosts>local.net|some.host.com&lt;/nonProxyHosts></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>    &lt;/proxy></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    --></span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>proxies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>  <span class=\"token comment\">&lt;!-- servers</pre></td></tr><tr><td data-num=\"112\"></td><td><pre>   | This is a list of authentication profiles, keyed by the server-id used within the system.</pre></td></tr><tr><td data-num=\"113\"></td><td><pre>   | Authentication profiles can be used whenever maven must make a connection to a remote server.</pre></td></tr><tr><td data-num=\"114\"></td><td><pre>   |--></span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>    <span class=\"token comment\">&lt;!-- server</pre></td></tr><tr><td data-num=\"117\"></td><td><pre>     | Specifies the authentication information to use when connecting to a particular server, identified by</pre></td></tr><tr><td data-num=\"118\"></td><td><pre>     | a unique name within the system (referred to by the 'id' attribute below).</pre></td></tr><tr><td data-num=\"119\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"120\"></td><td><pre>     | NOTE: You should either specify username/password OR privateKey/passphrase, since these pairings are</pre></td></tr><tr><td data-num=\"121\"></td><td><pre>     |       used together.</pre></td></tr><tr><td data-num=\"122\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    &lt;server></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>      &lt;id>deploymentRepo&lt;/id></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>      &lt;username>repouser&lt;/username></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>      &lt;password>repopwd&lt;/password></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>    &lt;/server></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>    --></span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Another sample, using keys to authenticate.</pre></td></tr><tr><td data-num=\"131\"></td><td><pre>    &lt;server></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>      &lt;id>siteServer&lt;/id></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>      &lt;privateKey>/path/to/private/key&lt;/privateKey></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>      &lt;passphrase>optional; leave empty if not used.&lt;/passphrase></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>    &lt;/server></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>    --></span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>  <span class=\"token comment\">&lt;!-- mirrors</pre></td></tr><tr><td data-num=\"140\"></td><td><pre>   | This is a list of mirrors to be used in downloading artifacts from remote repositories.</pre></td></tr><tr><td data-num=\"141\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"142\"></td><td><pre>   | It works like this: a POM may declare a repository to use in resolving certain artifacts.</pre></td></tr><tr><td data-num=\"143\"></td><td><pre>   | However, this repository may have problems with heavy traffic at times, so people have mirrored</pre></td></tr><tr><td data-num=\"144\"></td><td><pre>   | it to several places.</pre></td></tr><tr><td data-num=\"145\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"146\"></td><td><pre>   | That repository definition will have a unique id, so we can create a mirror reference for that</pre></td></tr><tr><td data-num=\"147\"></td><td><pre>   | repository, to be used as an alternate download site. The mirror site will be the preferred</pre></td></tr><tr><td data-num=\"148\"></td><td><pre>   | server for that repository.</pre></td></tr><tr><td data-num=\"149\"></td><td><pre>   |--></span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirrors</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirror</span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"152\"></td><td><pre>\t\t<span class=\"token comment\">&lt;!-- 指定镜像 ID（可自己改名） --></span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>nexus-aliyun<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"154\"></td><td><pre>\t\t<span class=\"token comment\">&lt;!-- 匹配中央仓库（阿里云的仓库名称，不可以自己起名，必须这么写）--></span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirrorOf</span><span class=\"token punctuation\">></span></span>central<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirrorOf</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>\t\t<span class=\"token comment\">&lt;!-- 指定镜像名称（可自己改名）  --></span>   </pre></td></tr><tr><td data-num=\"157\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>Nexus aliyun<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"158\"></td><td><pre>\t\t<span class=\"token comment\">&lt;!-- 指定镜像路径（镜像地址） --></span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>http://maven.aliyun.com/nexus/content/groups/public<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"160\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"162\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirror</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"163\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>alimaven<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"164\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirrorOf</span><span class=\"token punctuation\">></span></span>central<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirrorOf</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"165\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>aliyun maven<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"166\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>http://maven.aliyun.com/nexus/content/groups/public/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"167\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"168\"></td><td><pre>    <span class=\"token comment\">&lt;!-- mirror</pre></td></tr><tr><td data-num=\"169\"></td><td><pre>     | Specifies a repository mirror site to use instead of a given repository. The repository that</pre></td></tr><tr><td data-num=\"170\"></td><td><pre>     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used</pre></td></tr><tr><td data-num=\"171\"></td><td><pre>     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.</pre></td></tr><tr><td data-num=\"172\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"173\"></td><td><pre>    &lt;mirror></pre></td></tr><tr><td data-num=\"174\"></td><td><pre>      &lt;id>mirrorId&lt;/id></pre></td></tr><tr><td data-num=\"175\"></td><td><pre>      &lt;mirrorOf>repositoryId&lt;/mirrorOf></pre></td></tr><tr><td data-num=\"176\"></td><td><pre>      &lt;name>Human Readable Name for this Mirror.&lt;/name></pre></td></tr><tr><td data-num=\"177\"></td><td><pre>      &lt;url>http://my.repository.com/repo/path&lt;/url></pre></td></tr><tr><td data-num=\"178\"></td><td><pre>    &lt;/mirror></pre></td></tr><tr><td data-num=\"179\"></td><td><pre>     --></span></pre></td></tr><tr><td data-num=\"180\"></td><td><pre>\t </pre></td></tr><tr><td data-num=\"181\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirrors</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"182\"></td><td><pre></pre></td></tr><tr><td data-num=\"183\"></td><td><pre>  <span class=\"token comment\">&lt;!-- profiles</pre></td></tr><tr><td data-num=\"184\"></td><td><pre>   | This is a list of profiles which can be activated in a variety of ways, and which can modify</pre></td></tr><tr><td data-num=\"185\"></td><td><pre>   | the build process. Profiles provided in the settings.xml are intended to provide local machine-</pre></td></tr><tr><td data-num=\"186\"></td><td><pre>   | specific paths and repository locations which allow the build to work in the local environment.</pre></td></tr><tr><td data-num=\"187\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"188\"></td><td><pre>   | For example, if you have an integration testing plugin - like cactus - that needs to know where</pre></td></tr><tr><td data-num=\"189\"></td><td><pre>   | your Tomcat instance is installed, you can provide a variable here such that the variable is</pre></td></tr><tr><td data-num=\"190\"></td><td><pre>   | dereferenced during the build process to configure the cactus plugin.</pre></td></tr><tr><td data-num=\"191\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"192\"></td><td><pre>   | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles</pre></td></tr><tr><td data-num=\"193\"></td><td><pre>   | section of this document (settings.xml) - will be discussed later. Another way essentially</pre></td></tr><tr><td data-num=\"194\"></td><td><pre>   | relies on the detection of a system property, either matching a particular value for the property,</pre></td></tr><tr><td data-num=\"195\"></td><td><pre>   | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a</pre></td></tr><tr><td data-num=\"196\"></td><td><pre>   | value of '1.4' might activate a profile when the build is executed on a JDK version of '1.4.2_07'.</pre></td></tr><tr><td data-num=\"197\"></td><td><pre>   | Finally, the list of active profiles can be specified directly from the command line.</pre></td></tr><tr><td data-num=\"198\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"199\"></td><td><pre>   | NOTE: For profiles defined in the settings.xml, you are restricted to specifying only artifact</pre></td></tr><tr><td data-num=\"200\"></td><td><pre>   |       repositories, plugin repositories, and free-form properties to be used as configuration</pre></td></tr><tr><td data-num=\"201\"></td><td><pre>   |       variables for plugins in the POM.</pre></td></tr><tr><td data-num=\"202\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"203\"></td><td><pre>   |--></span></pre></td></tr><tr><td data-num=\"204\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>profiles</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"205\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>profile</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"206\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>jdk-1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"207\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>activation</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"208\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>activeByDefault</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>activeByDefault</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"209\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>jdk</span><span class=\"token punctuation\">></span></span>1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>jdk</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"210\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>activation</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"211\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"212\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maven.compiler.source</span><span class=\"token punctuation\">></span></span>1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maven.compiler.source</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"213\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maven.compiler.target</span><span class=\"token punctuation\">></span></span>1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maven.compiler.target</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"214\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maven.compiler.compilerVersion</span><span class=\"token punctuation\">></span></span>1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maven.compiler.compilerVersion</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"215\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"216\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>profile</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"217\"></td><td><pre></pre></td></tr><tr><td data-num=\"218\"></td><td><pre>    <span class=\"token comment\">&lt;!-- profile</pre></td></tr><tr><td data-num=\"219\"></td><td><pre>     | Specifies a set of introductions to the build process, to be activated using one or more of the</pre></td></tr><tr><td data-num=\"220\"></td><td><pre>     | mechanisms described above. For inheritance purposes, and to activate profiles via &lt;activatedProfiles/></pre></td></tr><tr><td data-num=\"221\"></td><td><pre>     | or the command line, profiles have to have an ID that is unique.</pre></td></tr><tr><td data-num=\"222\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"223\"></td><td><pre>     | An encouraged best practice for profile identification is to use a consistent naming convention</pre></td></tr><tr><td data-num=\"224\"></td><td><pre>     | for profiles, such as 'env-dev', 'env-test', 'env-production', 'user-jdcasey', 'user-brett', etc.</pre></td></tr><tr><td data-num=\"225\"></td><td><pre>     | This will make it more intuitive to understand what the set of introduced profiles is attempting</pre></td></tr><tr><td data-num=\"226\"></td><td><pre>     | to accomplish, particularly when you only have a list of profile id's for debug.</pre></td></tr><tr><td data-num=\"227\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"228\"></td><td><pre>     | This profile example uses the JDK version to trigger activation, and provides a JDK-specific repo.</pre></td></tr><tr><td data-num=\"229\"></td><td><pre>    &lt;profile></pre></td></tr><tr><td data-num=\"230\"></td><td><pre>      &lt;id>jdk-1.4&lt;/id></pre></td></tr><tr><td data-num=\"231\"></td><td><pre></pre></td></tr><tr><td data-num=\"232\"></td><td><pre>      &lt;activation></pre></td></tr><tr><td data-num=\"233\"></td><td><pre>        &lt;jdk>1.4&lt;/jdk></pre></td></tr><tr><td data-num=\"234\"></td><td><pre>      &lt;/activation></pre></td></tr><tr><td data-num=\"235\"></td><td><pre></pre></td></tr><tr><td data-num=\"236\"></td><td><pre>      &lt;repositories></pre></td></tr><tr><td data-num=\"237\"></td><td><pre>        &lt;repository></pre></td></tr><tr><td data-num=\"238\"></td><td><pre>          &lt;id>jdk14&lt;/id></pre></td></tr><tr><td data-num=\"239\"></td><td><pre>          &lt;name>Repository for JDK 1.4 builds&lt;/name></pre></td></tr><tr><td data-num=\"240\"></td><td><pre>          &lt;url>http://www.myhost.com/maven/jdk14&lt;/url></pre></td></tr><tr><td data-num=\"241\"></td><td><pre>          &lt;layout>default&lt;/layout></pre></td></tr><tr><td data-num=\"242\"></td><td><pre>          &lt;snapshotPolicy>always&lt;/snapshotPolicy></pre></td></tr><tr><td data-num=\"243\"></td><td><pre>        &lt;/repository></pre></td></tr><tr><td data-num=\"244\"></td><td><pre>      &lt;/repositories></pre></td></tr><tr><td data-num=\"245\"></td><td><pre>    &lt;/profile></pre></td></tr><tr><td data-num=\"246\"></td><td><pre>    --></span></pre></td></tr><tr><td data-num=\"247\"></td><td><pre></pre></td></tr><tr><td data-num=\"248\"></td><td><pre>    <span class=\"token comment\">&lt;!--</pre></td></tr><tr><td data-num=\"249\"></td><td><pre>     | Here is another profile, activated by the system property 'target-env' with a value of 'dev',</pre></td></tr><tr><td data-num=\"250\"></td><td><pre>     | which provides a specific path to the Tomcat instance. To use this, your plugin configuration</pre></td></tr><tr><td data-num=\"251\"></td><td><pre>     | might hypothetically look like:</pre></td></tr><tr><td data-num=\"252\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"253\"></td><td><pre>     | ...</pre></td></tr><tr><td data-num=\"254\"></td><td><pre>     | &lt;plugin></pre></td></tr><tr><td data-num=\"255\"></td><td><pre>     |   &lt;groupId>org.myco.myplugins&lt;/groupId></pre></td></tr><tr><td data-num=\"256\"></td><td><pre>     |   &lt;artifactId>myplugin&lt;/artifactId></pre></td></tr><tr><td data-num=\"257\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"258\"></td><td><pre>     |   &lt;configuration></pre></td></tr><tr><td data-num=\"259\"></td><td><pre>     |     &lt;tomcatLocation>$&#123;tomcatPath&#125;&lt;/tomcatLocation></pre></td></tr><tr><td data-num=\"260\"></td><td><pre>     |   &lt;/configuration></pre></td></tr><tr><td data-num=\"261\"></td><td><pre>     | &lt;/plugin></pre></td></tr><tr><td data-num=\"262\"></td><td><pre>     | ...</pre></td></tr><tr><td data-num=\"263\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"264\"></td><td><pre>     | NOTE: If you just wanted to inject this configuration whenever someone set 'target-env' to</pre></td></tr><tr><td data-num=\"265\"></td><td><pre>     |       anything, you could just leave off the &lt;value/> inside the activation-property.</pre></td></tr><tr><td data-num=\"266\"></td><td><pre>     |</pre></td></tr><tr><td data-num=\"267\"></td><td><pre>    &lt;profile></pre></td></tr><tr><td data-num=\"268\"></td><td><pre>      &lt;id>env-dev&lt;/id></pre></td></tr><tr><td data-num=\"269\"></td><td><pre></pre></td></tr><tr><td data-num=\"270\"></td><td><pre>      &lt;activation></pre></td></tr><tr><td data-num=\"271\"></td><td><pre>        &lt;property></pre></td></tr><tr><td data-num=\"272\"></td><td><pre>          &lt;name>target-env&lt;/name></pre></td></tr><tr><td data-num=\"273\"></td><td><pre>          &lt;value>dev&lt;/value></pre></td></tr><tr><td data-num=\"274\"></td><td><pre>        &lt;/property></pre></td></tr><tr><td data-num=\"275\"></td><td><pre>      &lt;/activation></pre></td></tr><tr><td data-num=\"276\"></td><td><pre></pre></td></tr><tr><td data-num=\"277\"></td><td><pre>      &lt;properties></pre></td></tr><tr><td data-num=\"278\"></td><td><pre>        &lt;tomcatPath>/path/to/tomcat/instance&lt;/tomcatPath></pre></td></tr><tr><td data-num=\"279\"></td><td><pre>      &lt;/properties></pre></td></tr><tr><td data-num=\"280\"></td><td><pre>    &lt;/profile></pre></td></tr><tr><td data-num=\"281\"></td><td><pre>    --></span></pre></td></tr><tr><td data-num=\"282\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>profiles</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"283\"></td><td><pre></pre></td></tr><tr><td data-num=\"284\"></td><td><pre>  <span class=\"token comment\">&lt;!-- activeProfiles</pre></td></tr><tr><td data-num=\"285\"></td><td><pre>   | List of profiles that are active for all builds.</pre></td></tr><tr><td data-num=\"286\"></td><td><pre>   |</pre></td></tr><tr><td data-num=\"287\"></td><td><pre>  &lt;activeProfiles></pre></td></tr><tr><td data-num=\"288\"></td><td><pre>    &lt;activeProfile>alwaysActiveProfile&lt;/activeProfile></pre></td></tr><tr><td data-num=\"289\"></td><td><pre>    &lt;activeProfile>anotherAlwaysActiveProfile&lt;/activeProfile></pre></td></tr><tr><td data-num=\"290\"></td><td><pre>  &lt;/activeProfiles></pre></td></tr><tr><td data-num=\"291\"></td><td><pre>  --></span></pre></td></tr><tr><td data-num=\"292\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>settings</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure>\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/Keepalived-tool/",
            "url": "https://eth168.top/tools/Keepalived-tool/",
            "title": "Keepalived",
            "date_published": "2022-10-31T15:06:22.681Z",
            "content_html": "<h3 id=\"keepalived安装\"><a class=\"anchor\" href=\"#keepalived安装\">#</a> Keepalived 安装</h3>\n<h4 id=\"1\"><a class=\"anchor\" href=\"#1\">#</a> ——1</h4>\n<h5 id=\"1-准备好keepalived安装包\"><a class=\"anchor\" href=\"#1-准备好keepalived安装包\">#</a> 1、准备好 Keepalived 安装包</h5>\n<h5 id=\"2-解压到usrlocal目录\"><a class=\"anchor\" href=\"#2-解压到usrlocal目录\">#</a> 2、解压到 /usr/local 目录</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">tar</span> <span class=\"token parameter variable\">-zxvf</span> /usr/local/tmp/keepalived-1.4.5.tar.gz <span class=\"token parameter variable\">-C</span> /usr/local/</pre></td></tr></table></figure><h5 id=\"3-安装需要依赖的环境组件\"><a class=\"anchor\" href=\"#3-安装需要依赖的环境组件\">#</a> 3、安装需要依赖的环境组件</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> gcc openssl-devel popt-devel <span class=\"token parameter variable\">-y</span></pre></td></tr></table></figure><h5 id=\"4-进入到解压目录进行编译\"><a class=\"anchor\" href=\"#4-进入到解压目录进行编译\">#</a> 4、进入到解压目录，进行编译</h5>\n<pre><code>cd /usr/local/keepalived-1.4.5\n./configure --prefix=/usr/local/keepalived\t\n</code></pre>\n<h5 id=\"5-编译完成之后进行安装\"><a class=\"anchor\" href=\"#5-编译完成之后进行安装\">#</a> 5、编译完成之后，进行安装</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">make</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">make</span> <span class=\"token function\">install</span></pre></td></tr></table></figure><h5 id=\"6-将keepalived的服务注册为系统服务\"><a class=\"anchor\" href=\"#6-将keepalived的服务注册为系统服务\">#</a> 6、将 keepalived 的服务注册为系统服务</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">cp</span>  <span class=\"token parameter variable\">-rf</span>   /usr/local/keepalived-1.4.5/keepalived/etc/init.d/keepalived /etc/init.d/</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">mkdir</span> /etc/keepalived</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">cp</span>   <span class=\"token parameter variable\">-rf</span>  /usr/local/keepalived/etc/keepalived/keepalived.conf /etc/keepalived/</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">cp</span>   <span class=\"token parameter variable\">-rf</span>  /usr/local/keepalived-1.4.5/keepalived/etc/sysconfig/keepalived /etc/sysconfig/</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">cp</span>   <span class=\"token parameter variable\">-rf</span>  /usr/local/keepalived/sbin/keepalived /usr/sbin/</pre></td></tr></table></figure><h5 id=\"7-修改配置文件\"><a class=\"anchor\" href=\"#7-修改配置文件\">#</a> 7、修改配置文件</h5>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span>  /etc/keepalived/keepalived.conf</pre></td></tr></table></figure><p><strong>CentOS-6   下的配置文件</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">!</span> Configuration File <span class=\"token keyword\">for</span> keepalived</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>global_defs <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   notification_email <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     acassen@firewall.loc</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     failover@firewall.loc</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     sysadmin@firewall.loc</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   notification_email_from Alexandre.Cassen@firewall.loc</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>   smtp_server <span class=\"token number\">127.0</span>.0.1</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>   smtp_connect_timeout <span class=\"token number\">30</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>   router_id LVS_DEVEL</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>   vrrp_skip_check_adv_addr</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>   vrrp_garp_interval <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>   vrrp_gna_interval <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>vrrp_instance VI_1 <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">##\t# 配置为主</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    state MASTER</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">#    # 设置网卡</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    interface eth0</pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">#     # 虚拟路由 ID，全局唯一</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    virtual_router_id <span class=\"token number\">51</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">#    # 优先级，权重值</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    priority <span class=\"token number\">100</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    advert_int <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    authentication <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        auth_type PASS</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        auth_pass <span class=\"token number\">1111</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    virtual_ipaddress <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>         <span class=\"token number\">192.168</span>.1.100/24  dev eth0 label eth0:3:</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>CentOS-7   下的配置文件</strong></p>\n<pre><code class=\"language-conf\">! Configuration File for keepalived\nglobal_defs &#123;\n   notification_email &#123;\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   &#125;\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 127.0.0.1\n   smtp_connect_timeout 30\n   router_id LVS_DEVEL\n   vrrp_skip_check_adv_addr\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n&#125;\n\nvrrp_instance VI_1 &#123;\n##\t# 配置为主\n    state MASTER\n#    # 设置网卡\n    interface ens33\n#     # 虚拟路由ID，全局唯一\n    virtual_router_id 51\n#    # 优先级，权重值\n    priority 100\n    advert_int 1\n    authentication &#123;\n        auth_type PASS\n        auth_pass 1111\n    &#125;\n    virtual_ipaddress &#123;\n        192.168.1.100/24 \n    &#125;\n&#125;\n\n</code></pre>\n<h6 id=\"8-启动keepalived\"><a class=\"anchor\" href=\"#8-启动keepalived\">#</a> 8、启动 keepalived</h6>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">service</span> keepalived start</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">### 或者</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>systemctl start keepalived.service</pre></td></tr></table></figure><h6 id=\"9-登录验证\"><a class=\"anchor\" href=\"#9-登录验证\">#</a> 9、登录验证</h6>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mysql <span class=\"token parameter variable\">-uroot</span> <span class=\"token parameter variable\">-p123456</span> <span class=\"token parameter variable\">-h</span> <span class=\"token number\">192.168</span>.1.100 <span class=\"token parameter variable\">-P</span> <span class=\"token number\">48066</span></pre></td></tr></table></figure>\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/Kafka-tool/",
            "url": "https://eth168.top/tools/Kafka-tool/",
            "title": "Kafka",
            "date_published": "2022-10-31T15:06:22.678Z",
            "content_html": "<h3 id=\"kafka-安装\"><a class=\"anchor\" href=\"#kafka-安装\">#</a> Kafka 安装</h3>\n<blockquote>\n<p>安装前提，kafka 安装运行最低支持 jdk7；本篇演示版本是基于 jdk1.8；</p>\n</blockquote>\n<p>官方下载地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHAlM0EvL2thZmthLmFwYWNoZS5vcmcvZG93bmxvYWRz\">Apache Kafka</span></p>\n<p>kafka 是由 scala 语言编写，下载稳定版本，即前一个版本</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/v2-9f6503ade62cfa48df87cc9da984e87d_720w.jpg\" alt=\"img\" /></p>\n<p>点击进入后，按如下方式点击下载</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/v2-bd19bea83d1cb978fbeed614ee126da6_720w.jpg\" alt=\"img\" /></p>\n<p>下载完成后进行解压缩</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">tar</span> <span class=\"token parameter variable\">-zxvf</span> kafka_2.12-2.8.0.tgz </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">mv</span> kafka_2.12-2.8.0 /usr/local/kafka</pre></td></tr></table></figure><p>解压完成后进入 kafka 目录</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/kafka</pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/v2-dfe360dfc7561953761f8ce69f782f4d_720w.png\" alt=\"img\" /></p>\n<p>kafka 是基于 Zookeeper 的消息管理系统，所以启动的时候是需要使用到 Zookeeper ，但其内置了 Zookeeper ，所以只需要根据 bin 目录下的文件进行启动即可</p>\n<p>启动 Zookeeper 服务端命令</p>\n<figure class=\"highlight text\"><figcaption data-lang=\"text\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./bin/zookeeper-server-start.sh ./config/zookeeper.properties</pre></td></tr></table></figure><p>Zookeeper 启动成功后会出现  <code>binding to port 0.0.0.0/0.0.0.0:2181</code>  所示结果表示启动成功；</p>\n<p><img data-src=\"https://pic1.zhimg.com/80/v2-6be2f91cd4ec47d589d3c5b58584c4b8_720w.png\" alt=\"img\" /></p>\n<p>启动 kafka 服务端命令</p>\n<figure class=\"highlight text\"><figcaption data-lang=\"text\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./bin/kafka-server-start.sh  ./config/server.properties</pre></td></tr></table></figure>\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        },
        {
            "id": "https://eth168.top/tools/JRebel-tool/",
            "url": "https://eth168.top/tools/JRebel-tool/",
            "title": "JRebel安装",
            "date_published": "2022-10-31T15:06:22.675Z",
            "content_html": "<h3 id=\"资料在网盘里面\"><a class=\"anchor\" href=\"#资料在网盘里面\">#</a> 资料在网盘里面</h3>\n\n<div id=\"gitalk-container\"></div>\n<script src=\"https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js\"></script><link rel=\"stylesheet\" href=\"https://unpkg.com/gitalk/dist/gitalk.css\"><script src=\"https://unpkg.com/gitalk/dist/gitalk.min.js\"></script>\n\n\t\t<script>\n\t\tvar gitalkConfig = {\"clientID\":\"6db178ba46c8af8f6a6f\",\"clientSecret\":\"90f730e5956024596558df00975cd8eae28cae3d\",\"repo\":\"bk-comment01\",\"owner\":\"onlymarryu\",\"admin\":[\"onlymarryu\"],\"distractionFreeMode\":false,\"language\":\"zh-CN\",\"proxy\":\"https://gitalk-comments.netlify.app/github_access_token\",\"perPage\":15};\n\t    gitalkConfig.id = md5(location.pathname);\n\t\tvar gitalk = new Gitalk(gitalkConfig);\n\t    gitalk.render(\"gitalk-container\");\n\t    </script>",
            "tags": [
                "工具软件安装"
            ]
        }
    ]
}