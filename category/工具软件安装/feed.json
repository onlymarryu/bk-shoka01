{
    "version": "https://jsonfeed.org/version/1",
    "title": "记录“美食”每刻 • All posts by \"工具软件安装\" category",
    "description": "记录“美食”每刻",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2022/10/15/tools-All/",
            "url": "http://example.com/2022/10/15/tools-All/",
            "title": "所有工具安装合集",
            "date_published": "2022-10-15T06:00:00.000Z",
            "content_html": "<div align='center' ><font size='70'>工具安装</font></div>\n# 目录\n\n<p>[TOC]</p>\n<h1 id=\"注解：\"><a href=\"#注解：\" class=\"headerlink\" title=\"注解：\"></a>注解：</h1><ul>\n<li><p>——1 .x：单机安装</p>\n</li>\n<li><p>——2 .x：Docker安装</p>\n</li>\n<li><p>X ：方式 X  ,default&#x3D;1 不写</p>\n</li>\n<li><p><strong>注所有所需文件均可在gitee上找到</strong></p>\n</li>\n</ul>\n<h1 id=\"———————————————\"><a href=\"#———————————————\" class=\"headerlink\" title=\"———————————————\"></a>———————————————</h1><h1 id=\"PATH———Linux\"><a href=\"#PATH———Linux\" class=\"headerlink\" title=\"PATH———Linux\"></a>PATH———Linux</h1><h2 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h2><h3 id=\"CentOS–7\"><a href=\"#CentOS–7\" class=\"headerlink\" title=\"CentOS–7\"></a>CentOS–7</h3><p><strong>1.下载镜像文件</strong></p>\n<p>  <span class=\"exturl\" data-url=\"aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuLw==\"> 清华大学开源软件镜像站</span>  </p>\n<p><strong>2.开始安装</strong></p>\n<img data-src=\"/2022/10/15/tools-All/1646489101763.png\" class=\"\">\n\n\n\n\n\n\n\n\n<img data-src=\"/2022/10/15/tools-All/1646489187835.png\" class=\"\">\n\n\n\n\n\n\n<img data-src=\"/2022/10/15/tools-All/1646489210450.png\" class=\"\">\n\n\n\n\n\n\n\n\n<img data-src=\"/2022/10/15/tools-All/1646489375149.png\" class=\"\">\n\n\n\n\n\n\n\n\n<img data-src=\"/2022/10/15/tools-All/1646489450527.png\" class=\"\">\n\n\n\n\n\n\n<p><strong>3.开始进去虚拟机配置我们的软件</strong></p>\n<p><strong>3.1语言</strong></p>\n<img data-src=\"/2022/10/15/tools-All/1646489591914.png\" class=\"\">\n\n\n\n\n<p><strong>3.2时区、软件选择</strong></p>\n<p>软件选择：按照自己的需求选，第一次多选也不要少选</p>\n<img data-src=\"/2022/10/15/tools-All/1646489600666.png\" class=\"\">\n\n\n\n\n<p>4.硬、软配置完成，开始安装，同时要创建管理员Root 和 基础用户</p>\n\n\n\n\n\n\n\n\n\n\n\n\n<p>5.安装成功</p>\n\n\n\n\n\n\n\n\n\n<p><strong>系统配置</strong></p>\n<div name=\"Linux_install_centos7\">进入系统后~</div>\n1、首先配置网络\n\n<p>要先切换到 root 用户上去，不然没权限。</p>\n<pre><code class=\"shell\">方式一\nsudo -i\npassword:当前普通用户密码\n\n方式二\nsu -\npassword：root用户密码\n</code></pre>\n<p> 将  **ONBOOT ** 改为 yes ： </p>\n<pre><code class=\"shell\"> vim /etc/sysconfig/network-scripts/ifcfg-ens33\n</code></pre>\n\n\n\n\n\n\n\n<p>重启网络</p>\n<pre><code class=\"shell\"># CentOS6\nservice network restart\n#CentOS7\nsystemlctl restart network \n\n# 检查是否通畅\nping 114.114.114.114\n</code></pre>\n<p>2、 安装net-tools 和 vim（<strong>有的话可直接跳过</strong>）</p>\n<pre><code class=\"shell\">yum install -y net-tools vim\n</code></pre>\n<p>检查自己的ip</p>\n<pre><code class=\"shell\">ifconfig\n</code></pre>\n\n\n\n\n\n\n\n<p>3 启动sshd服务</p>\n<pre><code class=\"shell\">service sshd start\n</code></pre>\n<div name=\"Linux_minInstall_4\"></div >\n4、修改登录，让Root用户直接登录\n\n<p><a href=\"#problem-6\">具体步骤</a>   \t\t</p>\n<div name=\"Linux_minInstall_5\"></div >\n5、修改DNS连接,让xshell访问快一点\n\n<p><a href=\"#problem-5\">具体步骤</a></p>\n<p>6、 <strong>关闭指定端口防火墙：</strong> </p>\n<pre><code class=\"shell\">systemctl status firewalld  \n\n#开启80端口\n\nfirewall-cmd --zone=public --add-port=80/tcp --permanent  \n\n#开启3306端口\n\nfirewall-cmd --zone=public --add-port=3306/tcp --permanent  \n\n#重启防火墙：\n\nfirewall-cmd --reload\n\n关闭防火墙 ，重启失效(Linux系统一重启Linux中的防火墙又会被开起)\nservice firewalld stop\n禁用防火墙，永久有效\nsystemctl disable firewalld 或者  systemctl disable firewalld.service\n启动防火墙 (对禁用的防火墙进行启动)\nsystemctl enable firewalld\n</code></pre>\n<h2 id=\"Docker安装\"><a href=\"#Docker安装\" class=\"headerlink\" title=\"Docker安装\"></a>Docker安装</h2><p>docker官网，自己选定自己的Linux版本，按照官方文档配置即可，以下CentOS7的</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL2luc3RhbGwvY2VudG9zLw==\">https://docs.docker.com/engine/install/centos/</span></p>\n<h4 id=\"1、卸载原有的环境：\"><a href=\"#1、卸载原有的环境：\" class=\"headerlink\" title=\"1、卸载原有的环境：\"></a>1、卸载原有的环境：</h4><pre><code class=\"shell\">sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-selinux \\\n                  docker-engine-selinux \\\n                  docker-engine\n</code></pre>\n<h4 id=\"2、安装对应的依赖环境和镜像地址\"><a href=\"#2、安装对应的依赖环境和镜像地址\" class=\"headerlink\" title=\"2、安装对应的依赖环境和镜像地址\"></a>2、安装对应的依赖环境和镜像地址</h4><pre><code class=\"shell\">sudo yum install -y yum-utils \n</code></pre>\n<p>官方安装(慢)</p>\n<pre><code class=\"shell\">sudo yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo\n</code></pre>\n<p>安装过慢设置镜像 </p>\n<pre><code class=\"shell\">sudo yum-config-manager \\ --add-repo \\ http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n</code></pre>\n<h4 id=\"3、直接安装docker-CE\"><a href=\"#3、直接安装docker-CE\" class=\"headerlink\" title=\"3、直接安装docker CE\"></a>3、直接安装docker CE</h4><pre><code class=\"shell\">sudo yum install -y docker-ce docker-ce-cli containerd.io\n</code></pre>\n<p>报错时，大概率为<strong>镜像仓库问题</strong> ，直接执行 <strong>步骤五</strong> 的补充，再安装</p>\n<h4 id=\"4、启动docker服务\"><a href=\"#4、启动docker服务\" class=\"headerlink\" title=\"4、启动docker服务\"></a>4、启动docker服务</h4><pre><code class=\"shell\">systemctl start docker \n</code></pre>\n<h4 id=\"5、查看docker的版本\"><a href=\"#5、查看docker的版本\" class=\"headerlink\" title=\"5、查看docker的版本\"></a>5、查看docker的版本</h4><pre><code class=\"shell\">docker version \n</code></pre>\n<p>**补充：通过官方的镜像地址下载docker会比较慢， **</p>\n<ul>\n<li>配置阿里云的镜像地址： <strong>经历过3的镜像库问题也就是配置阿里云镜像地址</strong></li>\n</ul>\n<pre><code class=\"shell\">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n</code></pre>\n<ul>\n<li>yum更新下即可：</li>\n</ul>\n<pre><code class=\"shell\">yum makecache fast \n</code></pre>\n<h4 id=\"6、开机启动docker\"><a href=\"#6、开机启动docker\" class=\"headerlink\" title=\"6、开机启动docker\"></a>6、开机启动docker</h4><pre><code class=\"shell\">sudo systemctl enable docker\n</code></pre>\n<ul>\n<li>补充：docker pull 下载镜像太慢，更换源进行网络加速的解决方案</li>\n</ul>\n<pre><code class=\"shell\">步骤1：\nsudo mkdir -p /etc/docker\n\n步骤2：\nsudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;\n&#123;\n  &quot;registry-mirrors&quot;: [&quot;https://glhlrb75.mirror.aliyuncs.com&quot;]\n&#125;\nEOF\n或者（老师的）\nsudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;\n&#123; \n    &quot;registry-mirrors&quot;: [&quot;https://v9j5rufo.mirror.aliyuncs.com&quot;] \n&#125;\nEOF\n\n步骤3：\nsudo systemctl daemon-reload\n\n步骤4：\nsudo systemctl restart docker\n</code></pre>\n<h4 id=\"7、使用\"><a href=\"#7、使用\" class=\"headerlink\" title=\"7、使用\"></a>7、使用</h4><p><a href=\"https://blog.csdn.net/qq_25760623/article/details/88657491\"><strong>阿里云安装docker：</strong></a></p>\n<p> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI1NzYwNjIzL2FydGljbGUvZGV0YWlscy84ODY1NzQ5MQ==\">https://blog.csdn.net/qq_25760623/article/details/88657491</span> </p>\n<h2 id=\"Docker-Compose安装\"><a href=\"#Docker-Compose安装\" class=\"headerlink\" title=\"Docker-Compose安装\"></a>Docker-Compose安装</h2><h3 id=\"方式一\"><a href=\"#方式一\" class=\"headerlink\" title=\"方式一\"></a>方式一</h3><p>官网地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vY29tcG9zZQ==\">https://docs.docker.com/compose</span> </p>\n<p><strong>推荐</strong>： 国内地址：<span class=\"exturl\" data-url=\"aHR0cDovL2dldC5kYW9jbG91ZC5pby8jaW5zdGFsbC1jb21wb3Nl\">http://get.daocloud.io/#install-compose</span></p>\n<pre><code class=\"shell\">sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker- compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose\n</code></pre>\n<p>速度比较慢的话使用下面的地址： </p>\n<pre><code class=\"shell\">curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.0/docker- compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose\n</code></pre>\n<p>修改文件夹权限 </p>\n<pre><code class=\"shell\">chmod +x /usr/local/bin/docker-compose\n</code></pre>\n<p>建立软连接 </p>\n<pre><code class=\"shell\">ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n</code></pre>\n<p>校验是否安装成功</p>\n<pre><code class=\"shell\">docker-compose --version\n</code></pre>\n<h3 id=\"方式二\"><a href=\"#方式二\" class=\"headerlink\" title=\"方式二\"></a>方式二</h3><p><strong>手动下载 docker-compose 到本地，然后上传到 linux 服务器的 &#x2F;usr&#x2F;local&#x2F;bin 路径下</strong></p>\n<p>（1）百度网盘：链接: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMW9fMlhzSUxmd2NBN21Sbi1mN0Exd0E=\">https://pan.baidu.com/s/1o_2XsILfwcA7mRn-f7A1wA</span> 提取码: qiue  —— 网盘中 docker-compose 版本：2.2.2</p>\n<p>（2）也可以去GitHub上下：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9jb21wb3NlL3JlbGVhc2Vz\">https://github.com/docker/compose/releases</span></p>\n<p><img data-src=\"https://tools-all2020.cnblogs.com/blog/1376119/202112/1376119-20211222005944642-1364547608.png\" alt=\"img\"></p>\n<ol start=\"5\">\n<li>重命名：</li>\n</ol>\n<p>mv docker-compose-linux-x86_64 docker-compose</p>\n<ol start=\"6\">\n<li>授权：</li>\n</ol>\n<p> chmod +x .&#x2F;docker-compose </p>\n<ol start=\"7\">\n<li>查看版本：</li>\n</ol>\n<p>docker-compose –version</p>\n<p><img data-src=\"https://tools-all2020.cnblogs.com/blog/1376119/202112/1376119-20211222005757511-1189151957.png\" alt=\"img\"></p>\n<h3 id=\"升级（方式三）\"><a href=\"#升级（方式三）\" class=\"headerlink\" title=\"升级（方式三）\"></a>升级（方式三）</h3><ul>\n<li>下载，命令如下👇：</li>\n</ul>\n<pre><code class=\"shell\">sudo curl -L https://get.daocloud.io/docker/compose/releases/download/1.26.2/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose\n</code></pre>\n<blockquote>\n<p>因Github国内访问不太稳定所以使用DaoCloud提供加速：<span class=\"exturl\" data-url=\"aHR0cDovL2dldC5kYW9jbG91ZC5pby8jaW5zdGFsbC1jb21wb3Nl\">链接</span>，你<strong>可以通过URL中的版本号，自定义下载你所需要的版本文件。</strong></p>\n</blockquote>\n<ul>\n<li>对命令进行一个授权</li>\n</ul>\n<pre><code class=\"shell\">sudo chmod +x /usr/local/bin/docker-compose\n</code></pre>\n<ul>\n<li>查看compose版本命令</li>\n</ul>\n<pre><code class=\"shell\">docker-compose --version\n</code></pre>\n<ul>\n<li>卸载</li>\n</ul>\n<pre><code class=\"shell\">sudo rm /usr/local/bin/docker-compose\n</code></pre>\n<h2 id=\"Python升级\"><a href=\"#Python升级\" class=\"headerlink\" title=\"Python升级\"></a>Python升级</h2><h4 id=\"一、查看当前python版本\"><a href=\"#一、查看当前python版本\" class=\"headerlink\" title=\"一、查看当前python版本\"></a>一、<strong>查看当前python版本</strong></h4><pre><code>[root@ansible ~]# python -V\nPython 2.7.5\n</code></pre>\n<h4 id=\"二、下载新的python包并安装\"><a href=\"#二、下载新的python包并安装\" class=\"headerlink\" title=\"二、下载新的python包并安装\"></a>二、<strong>下载新的python包并安装</strong></h4><p>​\t进入python官网（<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucHl0aG9uLm9yZyks6YCJ5oup6ZyA6KaB55qE54mI5pysLuatpOWkhOaIkemAieaLqeW9k+WJjeacgOaWsOeJiOacrHB5dGhvbjMuNi4xLw==\">https://www.python.org），选择需要的版本。此处我选择当前最新版本Python3.6.1</span></p>\n<pre><code>yum install gcc gcc-c++ -y\n\nwget https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tar.xz\n\ntar xvf Python-3.7.3.tar.xz \n\ncd Python-3.7.3/\n\n ./configure\n \nmake\n\nmake install\n</code></pre>\n<h4 id=\"三、验证\"><a href=\"#三、验证\" class=\"headerlink\" title=\"三、验证\"></a>三、<strong>验证</strong></h4><pre><code>#python -V     #一个是旧版本，一个是新版本\nPython 2.7.5\n# python3 -V\nPython 3.7.3\n</code></pre>\n<h4 id=\"四、设置3-X为默认版本\"><a href=\"#四、设置3-X为默认版本\" class=\"headerlink\" title=\"四、设置3.X为默认版本\"></a>四、<strong>设置3.X为默认版本</strong></h4><p>​\t查看 Python 的路径，在 &#x2F;usr&#x2F;bin 下面。可以看到 python 链接的是 python 2.7，所以，执行 python 就相当于执行 python 2.7。</p>\n<pre><code>[root@ansible ~]# ls -al /usr/bin | grep python\n-rwxr-xr-x.   1 root root       11232 Dec  2  2016 abrt-action-analyze-python\nlrwxrwxrwx.   1 root root           7 May 26  2017 python -&gt; python2\nlrwxrwxrwx.   1 root root           9 May 26  2017 python2 -&gt; python2.7\n-rwxr-xr-x.   1 root root        7136 Nov  6  2016 python2.7\n</code></pre>\n<p>将原来 python 的软链接重命名：</p>\n<pre><code>  mv /usr/bin/python /usr/bin/python.bak\n</code></pre>\n<p>将 python 链接至 python3：</p>\n<pre><code>  ln -s /usr/local/bin/python3 /usr/bin/python\n</code></pre>\n<h4 id=\"五、配置yum\"><a href=\"#五、配置yum\" class=\"headerlink\" title=\"五、配置yum\"></a>五、<strong>配置yum</strong></h4><p>​\t升级 Python 之后，由于将默认的 python 指向了 python3，yum 不能正常使用，需要编辑 yum 的配置文件，此时：</p>\n<pre><code>[root@ansible-admin Python-3.7.3]# yum list\n  File &quot;/usr/bin/yum&quot;, line 30\n    except KeyboardInterrupt, e:\n\nSyntaxError: invalid syntax\n</code></pre>\n<p>​\t修改&#x2F;usr&#x2F;bin&#x2F;yum和&#x2F;usr&#x2F;libexec&#x2F;urlgrabber-ext-down，将 #!&#x2F;usr&#x2F;bin&#x2F;python 改为 #!&#x2F;usr&#x2F;bin&#x2F;python2.7，保存退出即可。</p>\n<blockquote>\n<p>vim &#x2F;usr&#x2F;bin&#x2F;yum</p>\n<p>vim &#x2F;usr&#x2F;libexec&#x2F;urlgrabber-ext-down</p>\n</blockquote>\n<div name=\"jdk_install\"></div>\n## jdk安装\n\n<h4 id=\"1、下载对应的版本\"><a href=\"#1、下载对应的版本\" class=\"headerlink\" title=\"1、下载对应的版本\"></a>1、下载对应的版本</h4><p><strong>1.1下载Linux对应版本的JDK</strong></p>\n<pre><code class=\"shell\">getconf  LONG_BIT\n</code></pre>\n<p><strong>1.2下载压缩文件</strong>   </p>\n<blockquote>\n<p>jdk-8u261-linux-x64.tar.gz         </p>\n</blockquote>\n<h4 id=\"2、解压压缩文件\"><a href=\"#2、解压压缩文件\" class=\"headerlink\" title=\"2、解压压缩文件\"></a>2、解压压缩文件</h4><pre><code class=\"shell\">tar -xvf   jdk-8u261-linux-x64.tar.gz  -C  /usr/local/  \n</code></pre>\n<h4 id=\"3、配置环境变量\"><a href=\"#3、配置环境变量\" class=\"headerlink\" title=\"3、配置环境变量\"></a>3、配置环境变量</h4><pre><code class=\"shell\">vim  /etc/profile\n\n#自己选定的目录\nexport JAVA_HOME=/usr/local/jdk1.8.0_261\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport PATH=$PATH:$JAVA_HOME/bin\n</code></pre>\n<h4 id=\"4、使用环境变量生效\"><a href=\"#4、使用环境变量生效\" class=\"headerlink\" title=\"4、使用环境变量生效\"></a>4、使用环境变量生效</h4><pre><code class=\"shell\">source /etc/profile\n</code></pre>\n<p><a href=\"#perblem-1\">长久生效</a></p>\n<h4 id=\"5、测试JDK是否安装成功\"><a href=\"#5、测试JDK是否安装成功\" class=\"headerlink\" title=\"5、测试JDK是否安装成功\"></a>5、测试JDK是否安装成功</h4><pre><code class=\"shell\">java -version\n</code></pre>\n<h2 id=\"Tomcat安装\"><a href=\"#Tomcat安装\" class=\"headerlink\" title=\"Tomcat安装\"></a>Tomcat安装</h2><h3 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h4 id=\"1、下载Linux对应版本的Tomcat\"><a href=\"#1、下载Linux对应版本的Tomcat\" class=\"headerlink\" title=\"1、下载Linux对应版本的Tomcat\"></a>1、下载Linux对应版本的Tomcat</h4><p>​\t  下载压缩文件     apache-tomcat-7.0.68.tar.gz         </p>\n<h4 id=\"2、解压压缩文件-1\"><a href=\"#2、解压压缩文件-1\" class=\"headerlink\" title=\"2、解压压缩文件\"></a>2、解压压缩文件</h4><pre><code class=\"shell\">tar -xvf   apache-tomcat-7.0.68.tar.gz -C /usr/local/  #解压到的路径 \n</code></pre>\n<h4 id=\"3、配置环境变量-1\"><a href=\"#3、配置环境变量-1\" class=\"headerlink\" title=\"3、配置环境变量\"></a>3、配置环境变量</h4><pre><code class=\"shell\">vim  /etc/profile\n\n#自己定义为位置\nexport CATALINA_BASE=/usr/local/apache-tomcat-7.0.68\nexport PATH=$CATALINA_BASE/bin:$PATH\n</code></pre>\n<h4 id=\"4、使用环境变量生效-1\"><a href=\"#4、使用环境变量生效-1\" class=\"headerlink\" title=\"4、使用环境变量生效\"></a>4、使用环境变量生效</h4><pre><code class=\"shell\">source /etc/profile\n</code></pre>\n<h4 id=\"5、启动Tomcat服务\"><a href=\"#5、启动Tomcat服务\" class=\"headerlink\" title=\"5、启动Tomcat服务\"></a>5、启动Tomcat服务</h4><ul>\n<li>注：要是远程访问你关注防火墙问题</li>\n</ul>\n<p>启动Tomcat服务：</p>\n<pre><code class=\"shell\">/usr/local/apache-tomcat-7.0.68/bin./startup.sh\n</code></pre>\n<p>启动Tomcat并输出启动日志 :</p>\n<pre><code class=\"shell\">/usr/local/apache-tomcat-7.0.68/bin/startup.sh &amp; tail -f  /usr/local/apache-tomcat-7.0.68/logs/catalina.out\n</code></pre>\n<div name=\"mysql_install\">\n\n<h2 id=\"MySQL-安装\"><a href=\"#MySQL-安装\" class=\"headerlink\" title=\"MySQL 安装\"></a>MySQL 安装</h2><h3 id=\"——1-1\"><a href=\"#——1-1\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h4 id=\"1、卸载原来的版本\"><a href=\"#1、卸载原来的版本\" class=\"headerlink\" title=\"1、卸载原来的版本\"></a>1、卸载原来的版本</h4><h5 id=\"1、查看mysql的安装情况\"><a href=\"#1、查看mysql的安装情况\" class=\"headerlink\" title=\"1、查看mysql的安装情况\"></a>1、查看mysql的安装情况</h5><pre><code class=\"sh\">rpm -qa | grep -i mysql\n</code></pre>\n<img data-src=\"/2022/10/15/tools-All/1570605325400.png\" class=\"\">\n\n\n\n\n<h5 id=\"2、删除上图安装的软件\"><a href=\"#2、删除上图安装的软件\" class=\"headerlink\" title=\"2、删除上图安装的软件\"></a>2、删除上图安装的软件</h5><pre><code class=\"sh\">rpm -ev --nodeps mysql57-community-release-el5-7.noarch\nrpm -ev --nodeps mysql-community-server-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-community-client-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-community-libs-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-community-common-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-community-libs-compat-5.7.18-1.el5.x86_64\n</code></pre>\n<h5 id=\"3、都删除成功之后，查找相关的mysql的文件\"><a href=\"#3、都删除成功之后，查找相关的mysql的文件\" class=\"headerlink\" title=\"3、都删除成功之后，查找相关的mysql的文件\"></a>3、都删除成功之后，查找相关的mysql的文件</h5><pre><code class=\"sh\">find / -name mysql\n</code></pre>\n<img data-src=\"/2022/10/15/tools-All/1570605553095.png\" class=\"\">\n\n\n\n\n<h5 id=\"4、删除全部文件\"><a href=\"#4、删除全部文件\" class=\"headerlink\" title=\"4、删除全部文件\"></a>4、删除全部文件</h5><pre><code class=\"sh\">rm -rf /etc/selinux/targeted/active/modules/100/mysql\nrm -rf /root/mysql\nrm -rf /root/mysql/data/mysql\nrm -rf /var/lib/mysql\nrm -rf /var/lib/mysql/mysql\nrm -rf /usr/share/mysql\n</code></pre>\n<h5 id=\"5、再次执行命令\"><a href=\"#5、再次执行命令\" class=\"headerlink\" title=\"5、再次执行命令\"></a>5、再次执行命令</h5><pre><code class=\"shell\">rpm -qa | grep -i mysql\n#如果没有显式则表示卸载完成\n</code></pre>\n<h4 id=\"2、删除mariadb-libs-不可省略\"><a href=\"#2、删除mariadb-libs-不可省略\" class=\"headerlink\" title=\"2、删除mariadb-libs(不可省略)\"></a>2、删除mariadb-libs(不可省略)</h4><pre><code class=\"sh\"># 检查mariadb-libs\nrpm -qa|grep mariadb\n# 卸载mariadb-libs\nyum remove mariadb-libs\n</code></pre>\n<h4 id=\"3、安装MySQL\"><a href=\"#3、安装MySQL\" class=\"headerlink\" title=\"3、安装MySQL\"></a>3、安装MySQL</h4><h5 id=\"1，输入：\"><a href=\"#1，输入：\" class=\"headerlink\" title=\"1，输入：\"></a>1，输入：</h5><p>wegt <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXYubXlzcWwuY29tL2dldC9teXNxbCVFNyU4OSU4OCVFNiU5QyVBQyVFNSU4RiVCNy1jb21tdW5pdHktcmVsZWFzZS1lbCVFNSVBNCVBNyVFNyU4OSU4OCVFNiU5QyVBQy0lRTUlQjAlOEYlRTclODklODglRTYlOUMlQUMubm9hcmNoLnJwbQ==\">https://dev.mysql.com/get/mysql版本号-community-release-el大版本-小版本.noarch.rpm</span></p>\n<pre><code class=\"sh\">wget https://dev.mysql.com/get/mysql57-community-release-el5-7.noarch.rpm\n</code></pre>\n<h5 id=\"2、安装数据源\"><a href=\"#2、安装数据源\" class=\"headerlink\" title=\"2、安装数据源\"></a>2、安装数据源</h5><pre><code class=\"sh\">yum install -y mysql57-community-release-el5-7.noarch.rpm\n</code></pre>\n<h5 id=\"3、查看mysql源是否安装成功\"><a href=\"#3、查看mysql源是否安装成功\" class=\"headerlink\" title=\"3、查看mysql源是否安装成功\"></a>3、查看mysql源是否安装成功</h5><pre><code class=\"sh\">yum repolist enabled | grep &quot;mysql.*-community.*&quot;\n</code></pre>\n<h5 id=\"4、安装数据库\"><a href=\"#4、安装数据库\" class=\"headerlink\" title=\"4、安装数据库\"></a>4、安装数据库</h5><pre><code class=\"sh\">yum install -y  mysql-community-server\n\n# 如果过期可以在运行安装程序之前导入密钥，有了就不用了\nrpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022\n</code></pre>\n<h5 id=\"5、启动mysql\"><a href=\"#5、启动mysql\" class=\"headerlink\" title=\"5、启动mysql\"></a>5、启动mysql</h5><pre><code class=\"sh\"># centos7\nsystemctl restart mysqld\nsystemctl status mysqld\n\n\n# centos6\nservice mysqld start\nservice mysqld status\n</code></pre>\n<h5 id=\"6、显示mysql的随机密码\"><a href=\"#6、显示mysql的随机密码\" class=\"headerlink\" title=\"6、显示mysql的随机密码\"></a>6、显示mysql的随机密码</h5><pre><code class=\"sh\">grep &#39;temporary password&#39; /var/log/mysqld.log\n</code></pre>\n<img data-src=\"/2022/10/15/tools-All/image-20220827193405451.png\" class=\"\">\n\n\n\n\n<h5 id=\"7、登录并修改mysql密码\"><a href=\"#7、登录并修改mysql密码\" class=\"headerlink\" title=\"7、登录并修改mysql密码\"></a>7、登录并修改mysql密码</h5><p>登录：mysql -u root -p   \t\t然后输入上面生成的密码</p>\n<p><strong><em>修改自定义密码，设置新的密码，进入操作页面，修改密码策略可以修改成你想要的</em></strong></p>\n<pre><code class=\"sql\">-- ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;密码&#39;;\n\nALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;Root_21root&#39;;\n\nALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;root&#39;;\n</code></pre>\n<p><strong><em>失败了的话就修改策略，将策略降低一下就可以了</em></strong></p>\n<p>查看密码策略：</p>\n<pre><code class=\"sql\">SHOW VARIABLES LIKE &#39;%password%&#39;;\n</code></pre>\n<p>修改密码策略</p>\n<pre><code class=\"sql\">-- 修改密码长度：（长度）\nset global validate_password_length=1;\n-- 修改密码等级：（等级）\nset global validate_password_policy=0;\n</code></pre>\n<h4 id=\"4、其他配置\"><a href=\"#4、其他配置\" class=\"headerlink\" title=\"4、其他配置\"></a>4、其他配置</h4><h5 id=\"1-远程连接\"><a href=\"#1-远程连接\" class=\"headerlink\" title=\"1.远程连接\"></a>1.远程连接</h5><h6 id=\"方法一、创建一个用户-支持远程连接\"><a href=\"#方法一、创建一个用户-支持远程连接\" class=\"headerlink\" title=\"方法一、创建一个用户 支持远程连接\"></a>方法一、创建一个用户 支持远程连接</h6><p>①登录 ：mysql -u root -p</p>\n<p>②创建用户： create user ‘aaa‘@’%’ identified by ‘123456’;</p>\n<p>③授权所有权限给user这个新用户 ：grant all on <em>.</em> to ‘aaa‘@’%’;</p>\n<p>④退出mysql：quit;</p>\n<h6 id=\"方法二、设置root用户支持远程连接\"><a href=\"#方法二、设置root用户支持远程连接\" class=\"headerlink\" title=\"方法二、设置root用户支持远程连接\"></a>方法二、设置root用户支持远程连接</h6><p>①登录：mysql -u root -p （ 注：系统提示输入数据库root用户的密码，输入完成后即进入mysql控制台，这个命令的第一个mysql是执行命令，第二个mysql是系统数据名称，不一样的。）</p>\n<p>②设置权限：</p>\n<p>赋予权限格式： grant 权限 on 数据库对象 to 用户@IP(或者相应正则)</p>\n<pre><code class=\"sql\">-- 新建用户规则或者直接修改root用户的规则 ，2 选一\nuse mysql;\n\n-- 这里表示赋予该用户所有数据库所有表（*.*表示所有表），%表示所有IP地址。\nGRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;\n-- 使root能再任何host访问\nupdate user set host = &#39;%&#39; where user = &#39;root&#39;;      \n\n-- 刷新\nFLUSH PRIVILEGES;\n</code></pre>\n<p>③查看：</p>\n<pre><code class=\"sql\">use mysql;\nSELECT HOST,USER FROM USER;\n</code></pre>\n<img data-src=\"/2022/10/15/tools-All/920952e9041b4af1a8a49eb64e0f4430.jpeg\" class=\"\">\n\n\n\n\n<p> ④退出mysql：quit;</p>\n<h5 id=\"2-开机自启\"><a href=\"#2-开机自启\" class=\"headerlink\" title=\"2.开机自启\"></a>2.开机自启</h5><pre><code class=\"sh\"># 开机启动\nsystemctl enable mysql\n# 关闭自动启动\nsystemctl disable mysqld\n</code></pre>\n<h3 id=\"——2\"><a href=\"#——2\" class=\"headerlink\" title=\"——2\"></a>——2</h3><h4 id=\"1、查询镜像\"><a href=\"#1、查询镜像\" class=\"headerlink\" title=\"1、查询镜像\"></a>1、查询镜像</h4><pre><code class=\"shell\">docker search mysql\n</code></pre>\n<h4 id=\"2、拉取镜像\"><a href=\"#2、拉取镜像\" class=\"headerlink\" title=\"2、拉取镜像\"></a>2、拉取镜像</h4><pre><code class=\"shell\">docker pull mysql:5.7\n</code></pre>\n<h4 id=\"3、构建容器\"><a href=\"#3、构建容器\" class=\"headerlink\" title=\"3、构建容器\"></a>3、构建容器</h4><p>先自己创建配置文件基础模板（<strong>要是后期要修改配置文件必须加入 模板中的两个元素，不然容器启动会出错</strong>）</p>\n<pre><code class=\"shell\">mkdir -p /root/mysql/conf\nvim  /root/mysql/conf/my.cnf\n</code></pre>\n<p><strong>模板内容：</strong></p>\n<pre><code class=\"shell\">\n# Copyright (c) 2016, 2021, Oracle and/or its affiliates.\n#\n# This program is free software; you can redistribute it and/or modify\n# it under the terms of the GNU General Public License, version 2.0,\n# as published by the Free Software Foundation.\n#\n# This program is also distributed with certain software (including\n# but not limited to OpenSSL) that is licensed under separate terms,\n# as designated in a particular file or component or in included license\n# documentation.  The authors of MySQL hereby grant you an additional\n# permission to link the program and your derivative works with the\n# separately licensed software that they have included with MySQL.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License, version 2.0, for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this program; if not, write to the Free Software\n# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA\n\n\n!includedir /etc/mysql/conf.d/\n!includedir /etc/mysql/mysql.conf.d/\n\n[mysql]\ndefault-character-set=utf8\n[mysqld]\ncharacter_set_server=utf8\ninit_connect=&#39;SET NAMES utf8&#39;\nlower_case_table_names = 1\n</code></pre>\n<p><strong>构建容器</strong></p>\n<pre><code class=\"shell\">docker run \\\n-p 3306:3306 \\\n-v /root/mysql/data:/var/lib/mysql \\\n-v /root/mysql/logs:/logs \\\n-v /root/mysql/conf/my.cnf:/etc/mysql/my.cnf \\\n-e MYSQL_ROOT_PASSWORD=root \\\n--name mysql \\\n--hostname node1 \\\n--restart=always \\\n-d mysql:5.7\n</code></pre>\n<p><strong>注</strong>：出错时将本地映射文件检查一下，要是不需要配置，只需映射直接删掉就可，以后再改配置文件</p>\n<h4 id=\"4、进入容器\"><a href=\"#4、进入容器\" class=\"headerlink\" title=\"4、进入容器\"></a>4、进入容器</h4><pre><code class=\"shell\">docker exec -it mysql /bin/bash\n或者\ndocker exec -it mysql mysql -uroot -p\n</code></pre>\n<h4 id=\"5、查看远程连接\"><a href=\"#5、查看远程连接\" class=\"headerlink\" title=\"5、查看远程连接\"></a>5、查看远程连接</h4><p>还有一些方法也可以试一下</p>\n<pre><code class=\"shell\">1.赋予权限格式：grant 权限 on 数据库对象 to 用户@IP(或者相应正则)\n\n　　　　注：可以赋予select,delete,update,insert,index等权限精确到某一个数据库某一个表。\n\n　　　　GRANT ALL PRIVILEGES ON *.* TO &#39;用户名&#39;@&#39;%&#39; IDENTIFIED BY &#39;密码&#39; WITH GRANT OPTION;\n      GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;\n\n　　　　这里表示赋予该用户所有数据库所有表（*.*表示所有表），%表示所有IP地址。\n\n2.刷新权限：FLUSH PRIVILEGES;\n\n3.查看权限：select user,host from mysql.user;\n\n二.意外\n　　1.配置文件种指定了blind-address：\n　　　　查看Mysql配置文件种（一般是/etc/my.cnf种）是否指定了blind-address，这表示只能是某个或某几个ip能连接。如果有就将它注释了，前面加#号注释。然后从启mysql。\n    　重启mysql：service mysqld restart,如果安装的是Mariadb（我的就是）,则需要使用systemctl restart mariadb.service\n    　\n    2.防火墙的原因：\n　　　　可能会报：ERROR 2003 (HY000): Can&#39;t connect to MySQL server on &#39;你要连接的IP&#39; (111)。\n\n　　　　原因：1.可能是Mysql端口不对（默认是3306），只需加参数 -P 你的端口指定就行；\n　　　　\n　　　2.还有可能是有防火墙阻止，可以通过telnet来测试（可以直接关闭防火墙）。\n　　　　　　　　　　防火墙相关命令：\n\n　　　　　　　　　　　　（1）查看防火墙状态：service  iptables status或者systemctl status firewalld或者firewall-cmd --state\n\n　　　　　　　　　　　　（2）暂时关闭防火墙：systemctl stop firewalld或者service  iptables stop或者systemctl stop firewalld.service\n\n　　　　　　　　　　　　（3）永久关闭防火墙：systemctl disable firewalld或者chkconfig iptables off或者systemctl disable firewalld.service\n\n　　　　　　　　　　　　（4）重启防火墙：systemctl enable firewalld或者service iptables restart  或者systemctl restart firewalld.service\n\n 　　　　　　　　　　　　 (5)永久关闭后重启：chkconfig iptables on\n\n　　\n\n　　3.端口未开启：（我遇到的就是这个原因）\n　　　　　　Mysql：ERROR 2003 (HY000) 110（连接超时）\n\n　　　　　　查看你的服务器是否把对应端口打开，未打开启动就行了。　\n　　　　　　\n   4.Navicat连接MySQL，出现2059 - authentication plugin &#39;caching_sha2_password&#39;的解决方案\n      \n      0先进入容器，\n      docker exec -it mysql mysql -uroot -p\n      \n      1#修改加密规则password是自己的密码，root也是登陆账户，下同。\n      use mysql;\n    ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;root&#39; PASSWORD EXPIRE NEVER; \n    \n    2 #更新一下用户的密码 \n    ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;root&#39;;\n    \n    3#刷新权限 \n    FLUSH PRIVILEGES; \n    \n    4#更新一下用户的密码\n    ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;root&#39;; \n</code></pre>\n<h3 id=\"——2-1\"><a href=\"#——2-1\" class=\"headerlink\" title=\"——2.1\"></a>——2.1</h3><p>前提安装了 docker-compose，配置  docker-comose.yml 文件</p>\n<p>5.7：</p>\n<pre><code class=\"yml\">version: &quot;3.0&quot;\nservices:\n  mysql8:\n    image: mysql:5.7.32\n    container_name: my_db57\n    restart: always\n    volumes:\n      - ./db:/var/lib/mysql\n      - ./conf/my.cnf:/etc/my.cnf\n      # 数据库初始化脚本，当Mysql容器首次启动时，会在 /docker-entrypoint-initdb.d目录下扫描 .sh，.sql，.sql.gz类型的文件。如果这些类型的文件存在，将执行它们来初始化一个数据库；\n      - ./init/:/docker-entrypoint-initdb.d/\n    environment:\n      - MYSQL_ROOT_PASSWORD=123456\n      # 指定初始化sql文件的数据库，简单来书就是新建一个数据库\n      - MYSQL_DATABASE=my_db\n      - TZ=Asia/Shanghai\n    ports:\n      - 3311:3306\n</code></pre>\n<p>8.0</p>\n<pre><code class=\"yml\">version: &quot;3.0&quot;\nservices:\n  mysql8:\n    image: mysql:8.0.25\n    container_name: my_db8\n    restart: always\n    volumes:\n      - ./db:/var/lib/mysql\n      - ./conf/my.cnf:/etc/my.cnf\n      # 数据库初始化脚本，当Mysql容器首次启动时，会在 /docker-entrypoint-initdb.d目录下扫描 .sh，.sql，.sql.gz类型的文件。如果这些类型的文件存在，将执行它们来初始化一个数据库；\n      - ./init/:/docker-entrypoint-initdb.d/\n    environment:\n      - MYSQL_ROOT_PASSWORD=123456\n      # 指定初始化sql文件的数据库，简单来书就是新建一个数据库\n      - MYSQL_DATABASE=my_db\n      - TZ=Asia/Shanghai\n    ports:\n      - 3301:3306\n</code></pre>\n<p>配置文件 my.cnf </p>\n<p>5.7：</p>\n<pre><code class=\"shell\">[mysql]\n# 设置mysql客户端默认字符集\ndefault-character-set=utf8mb4\n\n[mysqld]\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\n\nsymbolic-links=0\n\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# 服务端使用的字符集默认为8比特编码的latin1字符集\ncharacter-set-server=utf8mb4\n\n# 创建新表时将使用的默认存储引擎\ndefault-storage-engine=INNODB\n</code></pre>\n<p>8.0：</p>\n<pre><code class=\"shell\">[mysql]\n# 设置mysql客户端默认字符集\ndefault-character-set=utf8mb4\n[mysqld]\n# 允许最大连接数\nmax_connections=200\n\n# 服务端使用的字符集默认为8比特编码的latin1字符集\ncharacter-set-server=utf8mb4\n\n# 创建新表时将使用的默认存储引擎\ndefault-storage-engine=INNODB\n</code></pre>\n<h3 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h3><p>1、Can’t create&#x2F;write to file ‘&#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid</p>\n<p>去配置文件中找到 errorlog的地址，查看错误日志</p>\n<img data-src=\"/2022/10/15/tools-All/20190602012200812.png\" class=\"\">\n\n\n\n\n<p>错误原因为：&#x2F;var&#x2F;run&#x2F;mysqld&#x2F;目录的拥有者为root，mysql不能在其中创建文件</p>\n<p>使用如下命令修改目录使用者</p>\n<pre><code class=\"shell\"># 先查看目录是否存在\nls -ld /var/run/mysqld/\n# 权限\nchown mysql.mysql /var/run/mysqld/\n# 修改后重启mysql服务\n/etc/init.d/mysqld start\n</code></pre>\n<h2 id=\"FastDFS安装\"><a href=\"#FastDFS安装\" class=\"headerlink\" title=\"FastDFS安装\"></a>FastDFS安装</h2><h3 id=\"——1-2\"><a href=\"#——1-2\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h4 id=\"1-安装FastDFS依赖\"><a href=\"#1-安装FastDFS依赖\" class=\"headerlink\" title=\"1.安装FastDFS依赖\"></a>1.安装FastDFS依赖</h4><p>FastDFS是C语言开发的应用。安装必须使用 make , cmake 和 gcc编译器。</p>\n<pre><code class=\"sh\">  yum install -y make cmake gcc gcc-c++\n</code></pre>\n<h4 id=\"2-上传并解压libfastcommon-master\"><a href=\"#2-上传并解压libfastcommon-master\" class=\"headerlink\" title=\"2 上传并解压libfastcommon-master\"></a>2 上传并解压libfastcommon-master</h4><p>​\t上传libfastcommon-master 到 &#x2F;usr&#x2F;local&#x2F;tmp下。 libfastcommon是从FastDFS和FastDHT中提取出来的公共C函数库</p>\n<p>​\t解压 libfastcommon-master.zip 由于是zip文件所以要使用 unzip命令</p>\n<pre><code class=\"sh\">  cd /usr/local/tmp\n  unzip libfastcommon-master.zip\n</code></pre>\n<h4 id=\"3-编译并安装\"><a href=\"#3-编译并安装\" class=\"headerlink\" title=\"3 编译并安装\"></a>3 编译并安装</h4><p>​\tlibfastcommon没有提供make命令安装文件。使用的是shell脚本执行编译和安装。shell脚本为 make.sh</p>\n<p>​\t进入解压后的文件</p>\n<pre><code class=\"sh\"> cd libfastcommon-master\n</code></pre>\n<p>​\t编译</p>\n<pre><code class=\"sh\"> ./make.sh\n</code></pre>\n<p>​\t安装\t</p>\n<pre><code class=\"sh\"> ./make.sh install\n</code></pre>\n<p>​\t有固定的默认安装位置。在&#x2F;usr&#x2F;lib64 和  &#x2F;usr&#x2F;include&#x2F;fastcommon两个目录中</p>\n<h4 id=\"4-创建软连接\"><a href=\"#4-创建软连接\" class=\"headerlink\" title=\"4 创建软连接\"></a>4 创建软连接</h4><p>​\t 因为FastDFS 主程序设置的lib目录是 &#x2F;usr&#x2F;local&#x2F;lib， 所以需要创建软连接</p>\n<pre><code class=\"sh\"> ln -s /user/lib64/libfastcommon.so /usr/local/lib/libfastcommon.so\n ln -s /usr/local/lib64/libfdfsclient.so /usr/local/lib/libfdfsclient.so\n</code></pre>\n<h4 id=\"5-上传并解压FastDFS主程序\"><a href=\"#5-上传并解压FastDFS主程序\" class=\"headerlink\" title=\"5 上传并解压FastDFS主程序\"></a>5 上传并解压FastDFS主程序</h4><p>​\t 上传 FastDFS_v5.08.tar.gz 到 &#x2F;usr&#x2F;local&#x2F;tmp下后解压</p>\n<pre><code class=\"sh\"> cd /usr/local/tmp\n tar zxf FastDFS_v5.08.tar.gz\n</code></pre>\n<h4 id=\"6-编译并安装FastDFS\"><a href=\"#6-编译并安装FastDFS\" class=\"headerlink\" title=\"6 编译并安装FastDFS\"></a>6 编译并安装FastDFS</h4><p>​\t进入到解压后的FastDFS文件中</p>\n<pre><code class=\"sh\"> cd FastDFS\n</code></pre>\n<p>​\t编译</p>\n<pre><code class=\"sh\"> ./make.sh\n</code></pre>\n<p>​\t安装</p>\n<pre><code class=\"sh\"> ./make.sh install\n</code></pre>\n<p>​\t安装后 FastDFS主程序所在的位置是</p>\n<p>​\t&#x2F;usr&#x2F;bin  可执行文件所在的位置</p>\n<p>​\t&#x2F;etc&#x2F;fdfs  配置文件所在的位置</p>\n<p>​\t&#x2F;usr&#x2F;bin  主程序代码所在位置</p>\n<p>​\t&#x2F;usr&#x2F;include&#x2F;fastdfs 包含一些插件组所在的位置</p>\n<h4 id=\"7-配置tracker\"><a href=\"#7-配置tracker\" class=\"headerlink\" title=\"7 配置tracker\"></a>7 配置tracker</h4><h5 id=\"7-1-复制配置文件\"><a href=\"#7-1-复制配置文件\" class=\"headerlink\" title=\"7.1 复制配置文件\"></a>7.1 复制配置文件</h5><p>​\t进入到 &#x2F;etc&#x2F;fdfs 中 ， 把tracker配置文件复制一份</p>\n<pre><code class=\"sh\">  cd /etc/fdfs\n  cp tracker.conf.sample tracker.conf\n</code></pre>\n<h5 id=\"7-2-创建数据目录\"><a href=\"#7-2-创建数据目录\" class=\"headerlink\" title=\"7.2 创建数据目录\"></a>7.2 创建数据目录</h5><p>​\t创建放置 tracker数据的目录</p>\n<pre><code class=\"sh\">  mkdir -p /usr/local/fastdfs/tracker\n</code></pre>\n<h5 id=\"7-3-修改配置文件\"><a href=\"#7-3-修改配置文件\" class=\"headerlink\" title=\"7.3 修改配置文件\"></a>7.3 修改配置文件</h5><p>​\t修改 tracker.conf 设置 tracker 内容存储目录</p>\n<pre><code class=\"sh\">base_path=/usr/local/fastdfs/tracker\n vim tracker.conf\n</code></pre>\n<p> 默认端口 22122   不需要修改</p>\n<h5 id=\"7-4-启动服务\"><a href=\"#7-4-启动服务\" class=\"headerlink\" title=\"7.4 启动服务\"></a>7.4 启动服务</h5><pre><code class=\"sh\">  service fdfs_trackerd start\n</code></pre>\n<p>​\t启动成功后， 配置文件中 base_path 指向的目录出现 FastDFS服务相关数据目录(data目录， logs 目录)</p>\n<h5 id=\"7-5-查看服务运行状态\"><a href=\"#7-5-查看服务运行状态\" class=\"headerlink\" title=\"7.5 查看服务运行状态\"></a>7.5 查看服务运行状态</h5><pre><code>  service fdfs_trackerd status\n</code></pre>\n<p>​\t如果显示 is running 表示正常运行。</p>\n<h5 id=\"7-6-关闭防火墙\"><a href=\"#7-6-关闭防火墙\" class=\"headerlink\" title=\"7.6 关闭防火墙\"></a>7.6 关闭防火墙</h5><pre><code class=\"sh\"> service iptables stop\n  chkconfig iptables off\n</code></pre>\n<h4 id=\"8-配置storage\"><a href=\"#8-配置storage\" class=\"headerlink\" title=\"8 配置storage\"></a>8 配置storage</h4><p>  storage可以和tracker不在同一台服务器上。示例中把storage和tracker安装在同一台服务器上了。</p>\n<h5 id=\"8-1-复制配置文件\"><a href=\"#8-1-复制配置文件\" class=\"headerlink\" title=\"8.1 复制配置文件\"></a>8.1 复制配置文件</h5><p>​\t进入到 &#x2F;etc&#x2F;fdfs, 把 storage 配置文件复制一份</p>\n<pre><code> cd /etc/fdfs\n cp storage.conf.sample storage.conf\n</code></pre>\n<h5 id=\"8-2-创建目录\"><a href=\"#8-2-创建目录\" class=\"headerlink\" title=\"8.2 创建目录\"></a>8.2 创建目录</h5><p>​\t 创建两个目录， 把base用于存储基础数据和日志，store用于存储上传数据。</p>\n<pre><code class=\"sh\">  mkdir -p /usr/local/fastdfs/storage/base\n mkdir -p /usr/local/fastdfs/storage/store\n</code></pre>\n<h5 id=\"8-3-修改配置文件\"><a href=\"#8-3-修改配置文件\" class=\"headerlink\" title=\"8.3 修改配置文件\"></a>8.3 修改配置文件</h5><p>​\tstorage.conf配置文件用于描述存储服务的行为，需要进行下述修改</p>\n<pre><code class=\"sh\"> vim /etc/fdfs/storage.conf\n</code></pre>\n<p>​\t配置内容如下：</p>\n<pre><code class=\"sh\">base_path=/usr/local/fastdfs/storage/base\nstore_path0=/usr/local/fastdfs/storage/store\ntracker_server=tracker 服务IP：22122\n</code></pre>\n<p>​\tbase_path - 基础路径。用于保存storage server 基础数据内容和日志内容的目录。</p>\n<p>​\tstore_path0 - 存储路径。是用于保存FastDFS中存储文件的目录，就是要创建256*256个子目录的位置。</p>\n<p>​\tbase_path 和 store_path0 可以使用同一个目录。</p>\n<p>​\ttracker_server - 跟踪服务器位置。就是跟踪服务器的IP和端口。</p>\n<p>​\t启动服务</p>\n<pre><code class=\"sh\"> service fdfs_storaged start\n</code></pre>\n<p>​\t启动成功后，配置文件中base_path 指向的目录中出现FastDFS服务相关数据目录（data目录、logs目录）配置文件中的store_path0指向的目录中同样出现FastDFS存储相关数据录（data目录）。其中$store_path0&#x2F;data&#x2F;目录中默认创建若干子孙目录（两级目录层级总计256*256个目录），是用于存储具体文件数据的。</p>\n<p>​\tStorage 服务器启动比较慢，因为第一次启动的时候，需要创建256*256个目录。</p>\n<p>​\t查看启动状态</p>\n<pre><code class=\"sh\"> service fdfs_storaged status\n</code></pre>\n<h3 id=\"——2-1\"><a href=\"#——2-1\" class=\"headerlink\" title=\"——2\"></a>——2</h3><img data-src=\"/2022/10/15/tools-All/b60ca697c06d4425b7cd228b98dc3d19.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;FastDFS的安装我们还是通过Docker来安装实现吧，直接在Linux上还装还是比较繁琐的，但就学习而言Docker安装还是非常高效的。Docker环境请自行安装哦，不清楚的可以看看我的Docker专题的内容。<a href=\"Docker%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99\" title=\"Docker学习资料\">https://blog.csdn.net/qq_38526573&#x2F;category_9619681.html</a></p>\n<h4 id=\"1-拉取镜像文件\"><a href=\"#1-拉取镜像文件\" class=\"headerlink\" title=\"1.拉取镜像文件\"></a>1.拉取镜像文件</h4><p>&amp;emsp;&amp;emsp;首先我们可以通过 <code>docker search fastdfs</code> 来查询下有哪些镜像文件。</p>\n<img data-src=\"/2022/10/15/tools-All/5a06a59eb24d4f9e847a4badeef871ac.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;我们看到搜索到的镜像还是蛮多的，这里我们使用 <code>delron/fastdfs</code> 你也可以尝试使用其他的镜像来安装，你也可以制作自己的镜像来给别人使用哦，只是不同的镜像在使用的时候配置会有一些不一样，有些镜像没有提供Nginx的相关配置，使用的时候会繁琐一点。接下来通过 <code>docker pull delron/fastdfs</code>命令把镜像拉取下来。</p>\n<pre><code class=\"shell\">docker pull delron/fastdfs\n</code></pre>\n<img data-src=\"/2022/10/15/tools-All/5e5b85b3dc9a432abf615b27868fc7bf.png\" class=\"\">\n\n\n\n\n<h4 id=\"2-构建Tracker服务\"><a href=\"#2-构建Tracker服务\" class=\"headerlink\" title=\"2.构建Tracker服务\"></a>2.构建Tracker服务</h4><p>&amp;emsp;&amp;emsp;首先我们需要通过Docker命令来创建Tracker服务。命令为</p>\n<pre><code class=\"shell\">docker run -d --name tracker --network=host -v /mydata/fastdfs/tracker:/var/fdfs delron/fastdfs tracker\n</code></pre>\n<p>&amp;emsp;&amp;emsp;tracker服务默认的端口为22122，-v 实现了容器和本地目录的挂载操作。</p>\n<img data-src=\"/2022/10/15/tools-All/694d42632bf6410a806df9aa43e836c0.png\" class=\"\">\n\n\n\n\n<h4 id=\"3-构建Storage服务\"><a href=\"#3-构建Storage服务\" class=\"headerlink\" title=\"3.构建Storage服务\"></a>3.构建Storage服务</h4><p>&amp;emsp;&amp;emsp;接下来创建Storage服务，具体的执行命令如下</p>\n<pre><code class=\"shell\">docker run -d --name storage --network=host  -e TRACKER_SERVER=192.168.1.195:22122 -v /mydata/fastdfs/storage:/var/fdfs -e GROUP_NAME=group1 delron/fastdfs storage\n</code></pre>\n<p>&amp;emsp;&amp;emsp;在执行上面命令的时候要注意对应的修改下，其中TRACKER_SERVER中的ip要修改为你的Tracker服务所在的服务IP地址。</p>\n<img data-src=\"/2022/10/15/tools-All/dc2bdf85d0f24fe18a32efbe4caa2d27.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;默认情况下在Storage服务中是帮我们安装了Nginx服务的，相关的端口为</p>\n<table>\n<thead>\n<tr>\n<th>服务</th>\n<th>默认端口</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>tracker</td>\n<td>22122</td>\n</tr>\n<tr>\n<td>storage</td>\n<td>23000</td>\n</tr>\n<tr>\n<td>Nginx</td>\n<td>8888</td>\n</tr>\n</tbody></table>\n<p>&amp;emsp;&amp;emsp;当然如果你发现这些相关的端口被占用了，或者想要对应的修改端口信息也可以的。要修改你可以先进入容器中查看下相关的配置文件信息。</p>\n<img data-src=\"/2022/10/15/tools-All/da5cc21445e840baa85580ba420db94d.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;然后查看storage.conf文件</p>\n<img data-src=\"/2022/10/15/tools-All/63862499980b408195291de047048566.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;这个是storage监听的Nginx的端口8888，如果要修改那么我们还需要修改Nginx中的服务配置，这块的配置在 <code>/usr/local/nginx/conf</code>目录下</p>\n<img data-src=\"/2022/10/15/tools-All/f866c08177be4fd48bfd9a582ec78779.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;查看下文件</p>\n<img data-src=\"/2022/10/15/tools-All/dc7c5888363a400b9308f3ba64cca9ac.png\" class=\"\">\n\n\n\n\n<p>所以要修改端口号的话，这两个位置都得修改了。当然本文我们就使用默认的端口号来使用了。</p>\n<h4 id=\"4-测试图片上传\"><a href=\"#4-测试图片上传\" class=\"headerlink\" title=\"4.测试图片上传\"></a>4.测试图片上传</h4><p>&amp;emsp;&amp;emsp;好了，安装我们已经完成了，那么到底是否可以使用呢？我们来测试下。首先在虚拟机的&#x2F;mydata&#x2F;fastdfs&#x2F;storage下保存一张图片。</p>\n<img data-src=\"/2022/10/15/tools-All/ff2ea2626bb34acd810fbb8d9438129a.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;然后我们再进入到storage容器中。并且进入到 <code>/var/fdfs</code>目录下,可以看到我们挂载的文件了</p>\n<img data-src=\"/2022/10/15/tools-All/cb8a96fb9bb644328880ca70378a7fc2.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;然后执行如下命令即可完成图片的上传操作</p>\n<pre><code class=\"shell\">/usr/bin/fdfs_upload_file /etc/fdfs/client.conf 1.jpg\n</code></pre>\n<img data-src=\"/2022/10/15/tools-All/0fd0e82898bb45178eca4eef9a412745.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;通过上面的提示我们看到文件上传成功了，而且返回了文件在storage中存储的信息。这时我们就可以通过这个信息来拼接访问的地址在浏览器中访问了：<span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguNTYuMTAwOjg4ODgvZ3JvdXAxL00wMC8wMC8wMC93S2c0WkdIY0tMU0FYaWJhQUFlek11VXJsUzgyMzUuanBn\">http://192.168.56.100:8888/group1/M00/00/00/wKg4ZGHcKLSAXibaAAezMuUrlS8235.jpg</span></p>\n<img data-src=\"/2022/10/15/tools-All/b34e823e956f410297bfd1218ebc0231.png\" class=\"\">\n\n\n\n\n<p>&amp;emsp;&amp;emsp;好了到这儿FastDFS的服务安装成功了。</p>\n<div name=\"nginx_install_1\" ></div>\n## nginx安装\n\n\n\n<div name=\"nginx_install_2\">\n\n<h3 id=\"——2-2\"><a href=\"#——2-2\" class=\"headerlink\" title=\"——2\"></a>——2</h3><h4 id=\"1、拉取镜像\"><a href=\"#1、拉取镜像\" class=\"headerlink\" title=\"1、拉取镜像\"></a>1、拉取镜像</h4><pre><code class=\"shell\">docker pull nginx:1.16.1\n</code></pre>\n<h4 id=\"2、创建挂载数据卷\"><a href=\"#2、创建挂载数据卷\" class=\"headerlink\" title=\"2、创建挂载数据卷\"></a>2、创建挂载数据卷</h4><pre><code class=\"shell\">mkdir -p /root/nginx/conf\nvim /root/nginx/conf/nginx.conf\n</code></pre>\n<p><code>nginx.conf内容：</code></p>\n<pre><code class=\"shell\">user  root;\nworker_processes  auto;\n \nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\n \n \nevents &#123;\n    worker_connections  1024;\n&#125;\n \n \nhttp &#123;\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n \n    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;\n                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;\n                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;\n \n    access_log  /var/log/nginx/access.log  main;\n \n    sendfile        on;\n    #tcp_nopush     on;\n \n    keepalive_timeout  65;\n \n    #gzip  on;\n    \n    \n    server &#123;\n        listen       80;\n        server_name  localhost;\n\n        #charset koi8-r;\n        #access_log  /var/log/nginx/host.access.log  main;\n\n        location / &#123;\n            root   /usr/share/nginx/html;\n            index  index.html index.htm;\n        &#125;\n\n        #error_page  404              /404.html;\n\n        # redirect server error pages to the static page /50x.html\n\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html &#123;\n            root   /usr/share/nginx/html;\n        &#125;\n   \n    &#125;\n&#125;\n\n</code></pre>\n<h4 id=\"3、创建容器\"><a href=\"#3、创建容器\" class=\"headerlink\" title=\"3、创建容器\"></a>3、创建容器</h4><pre><code class=\"shell\"># 注意ip一定要与检测ip相同\ndocker run \\\n-p 80:80 \\\n--name nginx  \\\n-v /root/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \\\n-d nginx:1.16.1 \n</code></pre>\n<h4 id=\"4、查看\"><a href=\"#4、查看\" class=\"headerlink\" title=\"4、查看\"></a>4、查看</h4><pre><code class=\"shell\">docker ps \n</code></pre>\n<h2 id=\"Zookeeper安装\"><a href=\"#Zookeeper安装\" class=\"headerlink\" title=\"Zookeeper安装\"></a>Zookeeper安装</h2><h3 id=\"——1-3\"><a href=\"#——1-3\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h4 id=\"1-Zookeeper简介\"><a href=\"#1-Zookeeper简介\" class=\"headerlink\" title=\"1     Zookeeper简介\"></a>1     Zookeeper简介</h4><p>​\tzookeeper分布式管理软件。常用它做注册中心（依赖zookeeper的发布&#x2F;订阅功能）、配置文件中心、分布式锁配置、集群管理等。</p>\n<p>​\tzookeeper一共就有两个版本。主要使用的是java语言写的。</p>\n<h4 id=\"2-安装\"><a href=\"#2-安装\" class=\"headerlink\" title=\"2     安装\"></a>2     安装</h4><h5 id=\"2-1-上传压缩文件\"><a href=\"#2-1-上传压缩文件\" class=\"headerlink\" title=\"2.1   上传压缩文件\"></a>2.1   上传压缩文件</h5><p>​\t上传到 &#x2F;usr&#x2F;local&#x2F;tmp中</p>\n<h4 id=\"2-2-解压\"><a href=\"#2-2-解压\" class=\"headerlink\" title=\"2.2   解压\"></a>2.2   解压</h4><pre><code> tar zxf apache-zookeeper-3.5.5-bin.tar.gz\n cp -r apache-zookeeper-3.5.5-bin ../zookeeper\n</code></pre>\n<h4 id=\"2-3-新建data目录\"><a href=\"#2-3-新建data目录\" class=\"headerlink\" title=\"2.3   新建data目录\"></a>2.3   新建data目录</h4><p>进入到zookeeper中</p>\n<pre><code> cd /usr/local/zookeeper\n mkdir data\n</code></pre>\n<h4 id=\"2-4-修改配置文件\"><a href=\"#2-4-修改配置文件\" class=\"headerlink\" title=\"2.4   修改配置文件\"></a>2.4   修改配置文件</h4><p>进入conf中</p>\n<pre><code> cd conf\n cp zoo_sample.cfg zoo.cfg\n vim zoo.cfg\n</code></pre>\n<p>修改dataDir为data文件夹路径</p>\n<pre><code>dataDir=/usr/local/zookeeper/data\n</code></pre>\n<h4 id=\"2-5-启动zookeeper\"><a href=\"#2-5-启动zookeeper\" class=\"headerlink\" title=\"2.5   启动zookeeper\"></a>2.5   启动zookeeper</h4><p>进入bin文件夹</p>\n<pre><code> cd /usr/local/zookeeper/bin\n ./zkServer.sh start\n</code></pre>\n<p>通过status查看启动状态。稍微有个等待时间</p>\n<pre><code class=\"shell\">  ./zkServer.sh status\n</code></pre>\n<h3 id=\"——2-3\"><a href=\"#——2-3\" class=\"headerlink\" title=\"——2\"></a>——2</h3><p><strong>资料：</strong></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20va2luZ2tvby9wLzg3MzI0NDguaHRtbA==\">https://www.cnblogs.com/kingkoo/p/8732448.html</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2F2ODA4NzQ2NjY/ZnJvbT1zZWFyY2gmYW1wO3NlaWQ9MTYyOTE0NTAyNTIxMTk5OTEwNCZhbXA7c3BtX2lkX2Zyb209MzMzLjMzNy4wLjA=\">https://www.bilibili.com/video/av80874666?from=search&amp;seid=1629145025211999104&amp;spm_id_from=333.337.0.0</span></p>\n<h4 id=\"1-Zookeeper简介-1\"><a href=\"#1-Zookeeper简介-1\" class=\"headerlink\" title=\"1     Zookeeper简介\"></a>1     Zookeeper简介</h4><p>​\tzookeeper分布式管理软件。常用它做注册中心（依赖zookeeper的发布&#x2F;订阅功能）、配置文件中心、分布式锁配置、集群管理等。</p>\n<p>​\tzookeeper一共就有两个版本。主要使用的是java语言写的。</p>\n<h4 id=\"2-安装-1\"><a href=\"#2-安装-1\" class=\"headerlink\" title=\"2     安装\"></a>2     安装</h4><h5 id=\"2-1-拉取镜像\"><a href=\"#2-1-拉取镜像\" class=\"headerlink\" title=\"2.1   拉取镜像\"></a>2.1   拉取镜像</h5><ul>\n<li><p>自定义zookeeper目录</p>\n<pre><code class=\"shell\">mkdir /root/zookeeper\n\nmkdir /root/zookeeper/data #原因参照上面 -在docker中data其实也不用在宿主机行自己生成(目前如此)\n\n#仓库官网查看版本或者用命令直接查\ndocker search zookeeper\n\n#拉取特定版本（3.5）\ndocker pull zookeeper:3.5\n</code></pre>\n</li>\n</ul>\n<h5 id=\"2-2-创建并启动容器\"><a href=\"#2-2-创建并启动容器\" class=\"headerlink\" title=\"2.2 创建并启动容器\"></a>2.2 创建并启动容器</h5><p>​\t<strong>注：就目前而且 好像直接在docker中使用 zookeeper 不需要过多的配置，直接用命令创建吧，下面的解释先不看，具体原因后面补充</strong></p>\n<p>命令：</p>\n<pre><code class=\"shell\">docker run -d --name zookeeper -v /root/zookeeper/data:/data -p 2181:2181 --restart always zookeeper:3.5\n</code></pre>\n<ul>\n<li><code>--restart always</code>：始终重启</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYWdlb3ZiL3AvMTUzMjg3OTYuaHRtbA==\">https://www.cnblogs.com/ageovb/p/15328796.html</span></li>\n</ul>\n<p><strong>解释</strong></p>\n<ul>\n<li><p>1、这里为啥只挂载了 data 目录–》因为当我们 没有直接的安装压缩包时，我们的就没有配置文件，所以我们直接生成，容器中就回自动生成conf文件，其中就有我们需要的 一系列配置文件，我们第一次创建的时候就可以如此，我们在进<strong>行配置文件的修改完成</strong>后，要将所有配置文件放到我们  bash 目录中的 conf 文件中去。</p>\n</li>\n<li><p>2、第一次进入容器</p>\n<ul>\n<li><p>在bash目录下进入bin 目录然后输入开启客户端命令</p>\n<pre><code class=\"shell\">./zkCli.sh\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p>3、第二次进入容器</p>\n<pre><code class=\"shell\">docker exec -it zookeeper /bin/bash  -p    端口号\n或\ndocker exec -it zookeeper zkCli.sh\n</code></pre>\n</li>\n</ul>\n<p><strong>只看到这就可*，容器创建成功就可以直接用了，还没有出现问题。有待补充</strong></p>\n<h5 id=\"2-3-修改配置文件\"><a href=\"#2-3-修改配置文件\" class=\"headerlink\" title=\"2.3   修改配置文件\"></a>2.3   修改配置文件</h5><ul>\n<li>配置文件来源<ul>\n<li>1、可以去我们的资料中直接解压出<strong>conf</strong>目录粘贴到我们的 zookeeper 目录中去</li>\n<li>2、可以直接进行第 3 步，完事之后直接会在容器中生成。找到conf文件，修改其中的 zoo.cfg文件，</li>\n</ul>\n</li>\n</ul>\n<p>进入容器后，找到conf中的 **zoo.cfg文件，接下来就是修改 <strong>dataDir</strong> 路径为容器中的 data文件目录。</p>\n<p>前提是要下载 vim ，因为容器中没有，命令是：</p>\n<pre><code>apt-get update\n\napt-get install -y vim\n\ncd conf\n# 没有zoo.cfg 就先拷贝 zoo_sample.cfg 两个其实是一个文件，内容相同\n#cp zoo_sample.cfg zoo.cfg\nvim zoo.cfg\n</code></pre>\n<p>修改dataDir为data文件夹路径</p>\n<pre><code>dataDir=/usr/local/zookeeper/data\n</code></pre>\n<h2 id=\"Zookeeper集群搭建\"><a href=\"#Zookeeper集群搭建\" class=\"headerlink\" title=\"Zookeeper集群搭建\"></a>Zookeeper集群搭建</h2><h3 id=\"——1-4\"><a href=\"#——1-4\" class=\"headerlink\" title=\"——1\"></a>——1</h3><p>1.上传压缩包到&#x2F;usr&#x2F;local&#x2F;tmp 下 并解压。</p>\n<p>2.在 &#x2F;usr&#x2F;local下新建文件夹 zookeeper</p>\n<pre><code># mkdir /usr/local/zookeeper\n</code></pre>\n<p>3.把解压的所有文件复制到zookeeper下， 并命名为zk1</p>\n<pre><code># cp -r /usr/local/temp/zookeeper-3.4.8 /usr/local/zookeeper/zk1\n</code></pre>\n<p>4.在zk1下新建文件夹 data</p>\n<p>5.在data下新建文件 myid, 里面写上 1</p>\n<pre><code># vim myid\n</code></pre>\n<p>6.进入到zk1&#x2F;conf 下 把 zoo_sample.cfg 复制一份叫做 zoo.cfg</p>\n<p>7.编辑 zoo.cfg 内容，设置 dataDIR为 data文件夹， 并在文件最下面添加下面内容</p>\n<pre><code>server.1=192.168.93.10:2688:3888\nserver.2=192.168.93.10:2689:3889\nserver.3=192.168.93.10:2690:3890\n</code></pre>\n<p> 7.1 server.1中的1是myid的内容</p>\n<p> 7.2 2688 2689 2690 是 zookeeper内部端口</p>\n<p> 7.3 3888 3889 3890 是 leader端口</p>\n<p>8.把zk1复制两份，分部叫做 zk2  zk3  并修改 myid 的值为 2，3 修改zoo.cfg中 dataDIR和clientPort</p>\n<p>9.启动三个zookeeper</p>\n<pre><code># ./zkServer.sh start\n</code></pre>\n<p>10.查看状态</p>\n<pre><code># ./zkServer.sh status\n</code></pre>\n<h3 id=\"——2-4\"><a href=\"#——2-4\" class=\"headerlink\" title=\"——2\"></a>——2</h3><h4 id=\"1、准备docker-compose-yml文件\"><a href=\"#1、准备docker-compose-yml文件\" class=\"headerlink\" title=\"1、准备docker-compose.yml文件\"></a><strong>1、准备</strong>docker-compose.yml<strong>文件</strong></h4><pre><code class=\"shell\">version: &#39;2&#39;\nservices:\n  zoo1:\n    image: zookeeper:3.5\n    restart: always\n    container_name: zoo1\n    ports:\n      - &quot;2182:2181&quot;\n    environment:\n      ZOO_MY_ID: 1\n      ZOO_SERVERS: server.1=0.0.0.0:2688:3888 server.2=zoo2:2689:3888 server.3=zoo3:2690:3888\n\n  zoo2:\n    image: zookeeper:3.5\n    restart: always\n    container_name: zoo2\n    ports:\n      - &quot;2183:2181&quot;\n    environment:\n      ZOO_MY_ID: 2\n      ZOO_SERVERS: server.1=zoo1:2688:3888 server.2=0.0.0.0:2689:3888 server.3=zoo3:2690:3888\n\n  zoo3:\n    image: zookeeper:3.5\n    restart: always\n    container_name: zoo3\n    ports:\n      - &quot;2184:2181&quot;\n    environment:\n      ZOO_MY_ID: 3\n      ZOO_SERVERS: server.1=zoo1:2688:3888 server.2=zoo2:2689:3888 server.3=0.0.0.0:2690:3888\n\n</code></pre>\n<h4 id=\"2、创建镜像\"><a href=\"#2、创建镜像\" class=\"headerlink\" title=\"2、创建镜像\"></a><strong>2、创建镜像</strong></h4><ul>\n<li>要在创建的docker-compose.yml文件中使用命令</li>\n</ul>\n<pre><code class=\"shell\">docker-compose up -d\n</code></pre>\n<h4 id=\"3、进入容器\"><a href=\"#3、进入容器\" class=\"headerlink\" title=\"3、进入容器\"></a><strong>3、进入容器</strong></h4><pre><code class=\"shell\">docker exec -it zoo1 /bin/bash\n\n#查看zoo1 的状态\ncd bin\n./zkServer.sh status\n</code></pre>\n<ul>\n<li>如果出现，以下情况：</li>\n</ul>\n<pre><code>ZooKeeper JMX enabled by default\nUsing config: /conf/zoo.cfg\nClient port not found in static config file. Looking in dynamic config file.\ngrep: : No such file or directory\nClient port not found in the server configs\nClient port not found. Looking for secureClientPort in the static config.\nUnable to find either secure or unsecure client port in any configs. Terminating.\n</code></pre>\n<p>​\t通过阅读我们知道他在conf中的zoo.cfg文件中缺少 **clientPort **我们只需要自行添加即可</p>\n<pre><code class=\"shell\">#修改之前我们先装一下 vim\napt-get update\n\napt-get install -y vim \n\n#修改zoo.fcg文件\nvim /conf/zoo.fcg\n\nclientPort=2181\n</code></pre>\n<ul>\n<li><p>完事之后<strong>重启</strong>zoo1</p>\n<p><img data-src=\"/tools-All%5C1645780920291.png\" alt=\"1645780920291\"></p>\n<p>成功！！</p>\n</li>\n</ul>\n<h4 id=\"4、查看所有zookeeper的状态\"><a href=\"#4、查看所有zookeeper的状态\" class=\"headerlink\" title=\"4、查看所有zookeeper的状态\"></a>4、查看所有zookeeper的状态</h4><pre><code class=\"shell\">docker exec -it zoo3 bash ./bin/zkServer.sh status\n</code></pre>\n<h4 id=\"5、进去客户端\"><a href=\"#5、进去客户端\" class=\"headerlink\" title=\"5、进去客户端\"></a>5、进去客户端</h4><pre><code class=\"shell\">docker exec -it zoo3 zkCli.sh\n</code></pre>\n<h2 id=\"redis安装\"><a href=\"#redis安装\" class=\"headerlink\" title=\"redis安装\"></a>redis安装</h2><h3 id=\"——1-5\"><a href=\"#——1-5\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h4 id=\"1-安装依赖C语言依赖\"><a href=\"#1-安装依赖C语言依赖\" class=\"headerlink\" title=\"1.安装依赖C语言依赖\"></a>1.安装依赖C语言依赖</h4><p>​\tredis使用C语言编写，所以需要安装C语言库</p>\n<pre><code> yum install -y gcc-c++ automake autoconf libtool make tcl \n</code></pre>\n<p>​\t</p>\n<h4 id=\"2-上传并解压\"><a href=\"#2-上传并解压\" class=\"headerlink\" title=\"2.上传并解压\"></a>2.上传并解压</h4><p>​\t把redis-5.0.5.tar.gz上传到&#x2F;usr&#x2F;local&#x2F;tmp中，解压文件</p>\n<pre><code> cd /usr/local/tmp\n\n tar zxf redis-5.0.5.tar.gz\n</code></pre>\n<h4 id=\"3-编译并安装-1\"><a href=\"#3-编译并安装-1\" class=\"headerlink\" title=\"3.编译并安装\"></a>3.编译并安装</h4><p>​\t进入解压文件夹</p>\n<pre><code>  cd /usr/local/tmp/redis-5.0.5/\n</code></pre>\n<p>​\t编译</p>\n<pre><code> make\n</code></pre>\n<p>​\t安装\t（一定要干）</p>\n<pre><code> make install PREFIX=/usr/local/redis\n</code></pre>\n<h4 id=\"4-开启守护进程\"><a href=\"#4-开启守护进程\" class=\"headerlink\" title=\"4.开启守护进程\"></a>4.开启守护进程</h4><p>​\t复制cd &#x2F;usr&#x2F;local&#x2F;tmp&#x2F;redis-5.0.5&#x2F;中redis.conf配置文件\t</p>\n<pre><code> cp redis.conf /usr/local/redis/bin/\n</code></pre>\n<p> <strong>修改配置文件</strong>\t</p>\n<pre><code> cd /usr/local/redis/bin/\n\n vim redis.conf\n</code></pre>\n<p>​\t把daemonize的值由no修改为yes</p>\n\n\n\n\n\n<h4 id=\"5-修改外部访问\"><a href=\"#5-修改外部访问\" class=\"headerlink\" title=\"5.修改外部访问\"></a>5.修改外部访问</h4><p>​\t在redis5中需要修改配置文件redis.conf允许外部访问。需要修改两处。</p>\n<p>​\t注释掉下面</p>\n<p>​\tbind 127.0.0.1</p>\n<pre><code> bind 127.0.0.1\n</code></pre>\n<p>​\tprotected-mode yes 改成 no</p>\n\n\n\n\n\n<h4 id=\"6-启动并测试\"><a href=\"#6-启动并测试\" class=\"headerlink\" title=\"6.启动并测试\"></a>6.启动并测试</h4><p>​\t启动redis</p>\n<pre><code class=\"shell\">./redis-server redis.conf\n</code></pre>\n<p>​\t重启redis</p>\n<pre><code>./redis-cli shutdown\n./redis-server redis.conf\n</code></pre>\n<p>​\t启动客户端工具</p>\n<p>​\t在redis5中客户端工具对命令会有提供功能。</p>\n<pre><code class=\"shell\">./redis-cli \n</code></pre>\n<h4 id=\"7-增加自定义日志文件\"><a href=\"#7-增加自定义日志文件\" class=\"headerlink\" title=\"7.增加自定义日志文件\"></a>7.增加自定义日志文件</h4><p>​\t打开redis.conf , 找到 logfile “” ，在引号中写入我们的日志文件目录，要写到文件，只写到日志目录是不行的，他无法打开， 而且这个文件你要先自己创建才能用，最好就是把文件的权限全部打开了</p>\n<pre><code class=\"sh\"># 日志文件输出目录/文件\ntouch /usr/local/redis/log/run.log\n# 修改redis.conf\nlogfile &quot;/usr/local/redis/log/run.log&quot;\n# 修改日志文件的权限\nchmod 777 /usr/local/redis/log/run.log\n# 启动服务\n./redis-server redis.conf\n\n# 即使没有报错，也要手动看一下日志文件是否采集到了日志信息\ntail -f /usr/local/redis/log/run.log\n</code></pre>\n<h3 id=\"——2-5\"><a href=\"#——2-5\" class=\"headerlink\" title=\"——2\"></a>——2</h3><h4 id=\"1、拉取镜像文件\"><a href=\"#1、拉取镜像文件\" class=\"headerlink\" title=\"1、拉取镜像文件\"></a>1、拉取镜像文件</h4><pre><code class=\"shell\">docker pull redis[:(版本号)]\n</code></pre>\n<h4 id=\"2、去gitee库中下载redis配置文件（docker不自带配置文件）【也可不进行此步骤】\"><a href=\"#2、去gitee库中下载redis配置文件（docker不自带配置文件）【也可不进行此步骤】\" class=\"headerlink\" title=\"2、去gitee库中下载redis配置文件（docker不自带配置文件）【也可不进行此步骤】\"></a>2、去gitee库中下载redis配置文件（docker不自带配置文件）【也可不进行此步骤】</h4><p><strong>建议看完，先别操作，再看三，看完三之后再决定如何操作</strong></p>\n<p>然后按照文章内容进行，忽略下载。</p>\n<p>文章地址： <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamI1MS5uZXQvYXJ0aWNsZS8yMDMyNzQuaHRt\">https://www.jb51.net/article/203274.htm</span> </p>\n<p>、</p>\n\n\n\n\n\n\n\n\n\n<p> <strong>docker 镜像中没有redis.conf文件，要自己配置</strong> </p>\n<pre><code class=\"undefined\">git pull --rebase https://gitee.com/zjj3366/mydemo.git master\n</code></pre>\n<h4 id=\"3、创建一个redis-服务容器\"><a href=\"#3、创建一个redis-服务容器\" class=\"headerlink\" title=\"3、创建一个redis 服务容器\"></a>3、创建一个redis 服务容器</h4><p><strong>第二步进行了的</strong></p>\n<pre><code class=\"shell\">docker run -p 6379:6379 \\\n--name myredis  \\\n-v /usr/local/docker/redis.conf:/etc/redis/redis.conf   \\\n-v /usr/local/docker/data:/data  \\\n-d redis  \\\nredis-server  /etc/redis/redis.conf  \\\n--appendonly yes\n</code></pre>\n<p><strong>第二步没有进行的</strong></p>\n<pre><code class=\"shell\">docker run -p 6379:6379  \\\n--name myredis  \\\n-v /root/myredis/data:/data \\\n-v /root/myredis/conf/redis.conf:/etc/redis/redis.conf  \\\n-d redis:4.0  \\\nredis-server /etc/redis/redis.conf  \\\n--appendonly yes\n</code></pre>\n<p><strong>区别：</strong></p>\n<p>​\t其实也没有什么区别，只是映射的文件不同，也可以将第二步的文件直接创建到第二种创建服务容器的配置文件地址中去，这样也可使用第二个创建方式。</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<h2 id=\"redis集群-Cluster-搭建\"><a href=\"#redis集群-Cluster-搭建\" class=\"headerlink\" title=\"redis集群(Cluster)搭建\"></a>redis集群(Cluster)搭建</h2><h3 id=\"——1-6\"><a href=\"#——1-6\" class=\"headerlink\" title=\"——1\"></a>——1</h3><p>​\t前提：已经安装好redis单机版。</p>\n<p>​\t当集群中超过或等于1&#x2F;2节点不可用时，整个集群不可用。为了搭建稳定集群，都采用奇数节点。</p>\n<h4 id=\"1-复制redis配置文件\"><a href=\"#1-复制redis配置文件\" class=\"headerlink\" title=\"1 .复制redis配置文件\"></a>1 .<strong>复制redis配置文件</strong></h4><p>​\t从&#x2F;usr&#x2F;local&#x2F;redis&#x2F;bin下把redis.conf复制到当前目录中，命名为redis-7001.conf</p>\n<pre><code># cp /usr/local/redis/bin/redis.conf /usr/local/redis/bin/redis-7001.conf\n</code></pre>\n<h4 id=\"2-修改redis-7001-conf\"><a href=\"#2-修改redis-7001-conf\" class=\"headerlink\" title=\"2. 修改redis-7001.conf\"></a>2. <strong>修改redis-7001.conf</strong></h4><pre><code># cd /usr/local/redis/bin\n# vim redis-7001.conf\n</code></pre>\n<p>​\t需要修改如下</p>\n<pre><code>port 7001\ncluster-enabled yes\ncluster-config-file nodes-7001.conf\ncluster-node-timeout 15000\n# appendonly yes 如果开启aof默认，需要修改为yes。如果使用rdb，此处不需要修改\ndaemonize yes\nprotected-mode no\npidfile /var/run/redis_7001.pid\n</code></pre>\n<h4 id=\"3-复制配置文件，并修改内容\"><a href=\"#3-复制配置文件，并修改内容\" class=\"headerlink\" title=\"3 .复制配置文件，并修改内容\"></a>3 .<strong>复制配置文件，并修改内容</strong></h4><p>​\t把redis-7001.conf 复制5份，分别叫做redis-7002.conf、redis-7003.conf、redis-7004.conf、redis-7005.conf、redis-7006.conf </p>\n<pre><code># cp redis-7001.conf redis-7002.conf\n# cp redis-7001.conf redis-7003.conf\n# cp redis-7001.conf redis-7004.conf\n# cp redis-7001.conf redis-7005.conf\n# cp redis-7001.conf redis-7006.conf\n</code></pre>\n<pre><code> 新复制的5个配置文件都需要需改三处。\n</code></pre>\n<p>​\t例如nodes-7002.conf中需要把所有7001都换成7002。</p>\n<p>​\t可以使用 :%s&#x2F;7001&#x2F;7002&#x2F;g 进行全局修改。 </p>\n<pre><code>port 7002\ncluster-config-file nodes-7002.conf\npidfile /var/run/redis_7002.pid\n</code></pre>\n<h4 id=\"4-启动6个redis\"><a href=\"#4-启动6个redis\" class=\"headerlink\" title=\"4 .启动6个redis\"></a>4 .<strong>启动6个redis</strong></h4><p>​\t可以使用redis-server结合6个配置文件进行启动6个实例。</p>\n<p>​\t执行之前一定要先删除dump.rdb</p>\n<pre><code># rm -f dump.rdb\n# vim startup.sh\n\n./redis-server redis-7001.conf\n./redis-server redis-7002.conf\n./redis-server redis-7003.conf\n./redis-server redis-7004.conf\n./redis-server redis-7005.conf\n./redis-server redis-7006.conf\n\n\n# chmod a+x startup.sh\n# ./startup.sh\n</code></pre>\n<h4 id=\"5-查看启动状态\"><a href=\"#5-查看启动状态\" class=\"headerlink\" title=\"5. 查看启动状态\"></a>5. <strong>查看启动状态</strong></h4>\n\n\n\n\n<h4 id=\"6-建立集群\"><a href=\"#6-建立集群\" class=\"headerlink\" title=\"6. 建立集群\"></a>6. <strong>建立集群</strong></h4><p>​\t在redis3的时候需要借助ruby脚本实现集群。在redis5中可以使用自带的redis-cli实现集群功能，比redis3的时候更加方便了。</p>\n<p>​\t建议配置静态ip，ip改变集群失效</p>\n<pre><code>./redis-cli --cluster create 192.168.93.10:7001 192.168.93.10:7002 192.168.93.10:7003 192.168.93.10:7004 192.168.93.10:7005 192.168.93.10:7006 --cluster-replicas 1\n</code></pre>\n<h4 id=\"7-测试\"><a href=\"#7-测试\" class=\"headerlink\" title=\"7. 测试\"></a>7. <strong>测试</strong></h4><p>​\t集群测试时，千万不要忘记最后一个-c参数。</p>\n<pre><code># ./redis-cli -p 7001 -c\n# set age 18\n</code></pre>\n<h4 id=\"8-编写关闭脚本\"><a href=\"#8-编写关闭脚本\" class=\"headerlink\" title=\"8 .编写关闭脚本\"></a>8 .<strong>编写关闭脚本</strong></h4><pre><code># vim stop.sh\n# chmod a+x stop.sh\n\n./redis-cli -p 7001 shutdown\n./redis-cli -p 7002 shutdown\n./redis-cli -p 7003 shutdown\n./redis-cli -p 7004 shutdown\n./redis-cli -p 7005 shutdown\n./redis-cli -p 7006 shutdown\n</code></pre>\n<h3 id=\"——2-6\"><a href=\"#——2-6\" class=\"headerlink\" title=\"——2\"></a>——2</h3><p>​\t<strong>注：</strong>1.如果是配置修改之前<strong>已经创建过的集群时</strong>，要先进行第七步操作。</p>\n<p>​\t\t\t2.要是想重启集群可以省略第一步，但是得<strong>先删除已经创建的容器</strong>，重新进行2、3（合并也行）</p>\n<h4 id=\"0、创建网络\"><a href=\"#0、创建网络\" class=\"headerlink\" title=\"0、创建网络\"></a>0、创建网络</h4><p><strong>目的：</strong>让宿主机可以访问到自身</p>\n<pre><code class=\"shell\">docker network create net-redis --subnet 172.38.0.0/16\n</code></pre>\n<p>补充：关于虚拟机的三种网路连接方式区别</p>\n<p> <span class=\"exturl\" data-url=\"aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYmlmZW5nbWlhb3podWFuL2FydGljbGUvZGV0YWlscy83OTg4NzY5Mj9zcG09MTAwMS4yMTAxLjMwMDEuNjY2MS4xJmFtcDt1dG1fbWVkaXVtPWRpc3RyaWJ1dGUucGNfcmVsZXZhbnRfdDAubm9uZS10YXNrLWJsb2ctMn5kZWZhdWx0fkNUUkxJU1R+UmF0ZS0xLnBjX3JlbGV2YW50X2RlZmF1bHQmYW1wO2RlcHRoXzEtdXRtX3NvdXJjZT1kaXN0cmlidXRlLnBjX3JlbGV2YW50X3QwLm5vbmUtdGFzay1ibG9nLTJ+ZGVmYXVsdH5DVFJMSVNUflJhdGUtMS5wY19yZWxldmFudF9kZWZhdWx0JmFtcDt1dG1fcmVsZXZhbnRfaW5kZXg9MQ==\">http://blog.csdn.net/bifengmiaozhuan/article/details/79887692?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_default&amp;utm_relevant_index=1</span> </p>\n\n\n\n\n\n\n\n<h4 id=\"1、创建并修改配置文件\"><a href=\"#1、创建并修改配置文件\" class=\"headerlink\" title=\"1、创建并修改配置文件\"></a>1、创建并修改配置文件</h4><p><strong>注：</strong></p>\n<pre><code>In certain deployments, Redis Cluster nodes address discovery fails, because addresses are NAT-ted or because ports are forwarded (the typical case is Docker and other containers).\n\n在某些部署中，Redis群集节点地址发现失败，因为地址是NAT，或者端口是转发的（典型情况是Docker和其他容器）。\n\nIn order to make Redis Cluster working in such environments, a static configuration where each node knows its public address is needed. The following two options are used for this scope, and are:\n\n为了让Redis集群在这样的环境中工作，需要一种静态配置，其中每个节点都知道自己的公共地址。以下两个选项用于此范围，分别是：\n\ncluster-announce-ip\n\ncluster-announce-port\n---------------------------------------------------------------------------------------\n你的docker内网是172，你宿主的IP是192网段\n\n根据redis的配置文件中的解释\n\n要在你的配置文件上加上上面的2个配置\n</code></pre>\n<p><strong>方法一：</strong>参考上面的方法一样行。</p>\n<p><strong>方法二：</strong>使用脚本</p>\n<pre><code class=\"shell\">#cat &lt;&lt;EOF EOF在这里没有特殊的含义，你可以使用FOE或000等;\n#表示以cat &lt;&lt;EOF 开始输入以 EOF 结束结束输入\n#cat&gt;创建文件，并把标准输入输出到后面的filename文件\n\n\n# * cluster-announce-ip\t\t\t\t\t192.168.1.195\t#*群集ip\n# * cluster-announce-port\t\t\t\t700$&#123;port&#125;\t\t#*群集总线端口\n# * cluster-announce-bus-port#*群集ip    1700$&#123;port&#125;\t   #*群集公布端口\n# 集群 ip 是固定+10000\n\n# 可以使用 :  %s/7001/7002/g     进行全局修改。 ---将全局的7001修改成7002\n\nfor port in $(seq 1 6); \\ \ndo \\\nmkdir  -p  /root/myredis/conf700$&#123;port&#125;\ntouch  /root/myredis/conf700$&#123;port&#125;/redis.conf\ncat &lt;&lt;TTT &gt; /root/myredis/conf700$&#123;port&#125;/redis.conf port 6379\nbind 0.0.0.0\nport 700$&#123;port&#125;\ncluster-enabled yes\ncluster-config-file nodes-700$&#123;port&#125;.conf\ncluster-node-timeout 15000\nprotected-mode no\npidfile /var/run/redis_ 700$&#123;port&#125;.pid\ncluster-announce-ip  192.168.1.195 \ncluster-announce-port  700$&#123;port) \ncluster-announce-bus-port 1700$&#123;port) \nappendonly yes \nTTT \ndone\n</code></pre>\n<h4 id=\"2、创建容器\"><a href=\"#2、创建容器\" class=\"headerlink\" title=\"2、创建容器\"></a>2、创建容器</h4><p><strong>方法一：</strong>手动创建容器，并启动</p>\n<pre><code class=\"shell\">docker run -p 7001:7001   -p 17001:17001  --name redis7001  -v /root/myredis/conf7001/redis.conf:/etc/redis/redis.conf -v /root/myredis/data7001:/data -d redis redis-server /etc/redis/redis.conf --appendonly yes\n</code></pre>\n<p>​\t7002 ~~~7006同上，自行修改参数</p>\n<p><strong>方法二：</strong>脚本一键启动，效果同上</p>\n<p>​\t<strong>注意：</strong></p>\n<ul>\n<li>其中要指定两个端口号**-p 1700${port}:1700${port}**不要忘记，否则会在创建几群的时候出现  **Waiting for the cluster to join   ** 。【具体原因，我还没查出来，后面补充】</li>\n<li>在docker创建集群容器的时候，<strong>一定要</strong> 指定  ip</li>\n</ul>\n<p><strong>补充：</strong></p>\n<ul>\n<li>那肯定是你端口没有开启，不要质疑，这里的端口不是7000-7005，而是17000-17005，因为redis设置集群的端口号是”redis端口+10000“，这个非常重要。并且7001:7006也是必须打开的。</li>\n</ul>\n<pre><code class=\"shell\">for port in $(seq 1 6);  \\\ndo \\\ndocker run -p 700$&#123;port&#125;:700$&#123;port&#125;   -p 1700$&#123;port&#125;:1700$&#123;port&#125;  --name redis700$&#123;port&#125;  \\\n-v /root/redis/redis700$&#123;port&#125;.conf:/etc/redis/redis.conf \\\n-v /root/redis/data700$&#123;port&#125;:/data \\\n-d --ip 192.168.1.195 redis redis-server /etc/redis/redis.conf \ndone\n</code></pre>\n<h4 id=\"3、进入容器-1\"><a href=\"#3、进入容器-1\" class=\"headerlink\" title=\"3、进入容器\"></a>3、进入容器</h4><pre><code class=\"shell\">docker exec -it redis7001 /bin/bash\n</code></pre>\n<h4 id=\"4、创建集群\"><a href=\"#4、创建集群\" class=\"headerlink\" title=\"4、创建集群\"></a>4、创建集群</h4><p>​\t<strong>注：</strong>有一步操作，要自行进行确认，一定要输入 <strong>yes</strong> 而不是 <strong>y</strong> 或者其他之类的，除了 yes一律视为 <strong>no</strong> 。</p>\n<pre><code class=\"shell\">redis-cli --cluster create 192.168.1.195:7001 192.168.1.195:7002 192.168.1.195:7003 192.168.1.195:7004 192.168.1.195:7005 192.168.1.195:7006 --cluster-replicas 1\n</code></pre>\n<h4 id=\"5、测试\"><a href=\"#5、测试\" class=\"headerlink\" title=\"5、测试\"></a>5、测试</h4><p>​\t集群测试时，千万不要忘记最后一个-c参数。</p>\n<pre><code class=\"shel\">redis-cli -p 7001 -c\n</code></pre>\n<h4 id=\"6、关闭集群\"><a href=\"#6、关闭集群\" class=\"headerlink\" title=\"6、关闭集群\"></a>6、关闭集群</h4><p><strong>方法一：</strong></p>\n<p>​\t自行手动一个一个停止，并且删除容器</p>\n<pre><code class=\"shell\">docker stop redis7001 #7002 ~~~7006\n\ndocker rm -f redis7001\n</code></pre>\n<p><strong>方法二：</strong></p>\n<p>​\t脚本程序，一劳永逸</p>\n<pre><code class=\"shell\">for port in $(seq 1 6);  \\\ndo \\\ndocker stop redis700$&#123;port&#125;\ndocker rm -f redis700$&#123;port&#125;\ndone\n</code></pre>\n<h4 id=\"7、清空集群文件\"><a href=\"#7、清空集群文件\" class=\"headerlink\" title=\"7、清空集群文件\"></a>7、清空集群文件</h4><pre><code class=\"shell\">for port in $(seq 1 6);  \\\ndo \\\nrm  -rf  ./data700$&#123;port&#125;/* \ndone\n</code></pre>\n<h2 id=\"Solr安装\"><a href=\"#Solr安装\" class=\"headerlink\" title=\"Solr安装\"></a>Solr安装</h2><h3 id=\"——1-7\"><a href=\"#——1-7\" class=\"headerlink\" title=\"——1\"></a>——1</h3><p>​\tSolr是使用Java编写，所以必选先安装JDK。</p>\n<h4 id=\"1-上传并解压\"><a href=\"#1-上传并解压\" class=\"headerlink\" title=\"1.上传并解压\"></a>1.上传并解压</h4><p>​\t上传压缩包solr-7.7.2.tgz到&#x2F;usr&#x2F;local&#x2F;tmp中。</p>\n<p>​\t解压</p>\n<pre><code> cd /usr/local/tmp\n tar zxf solr-7.7.2.tgz -C /usr/local/tmp\n</code></pre>\n<h4 id=\"2-复制到-x2F-usr-x2F-local中\"><a href=\"#2-复制到-x2F-usr-x2F-local中\" class=\"headerlink\" title=\"2.复制到&#x2F;usr&#x2F;local中\"></a>2.复制到&#x2F;usr&#x2F;local中</h4><pre><code> cp -r solr-7.7.2 ../solr\n</code></pre>\n<h4 id=\"3-修改启动参数\"><a href=\"#3-修改启动参数\" class=\"headerlink\" title=\"3.修改启动参数\"></a>3.修改启动参数</h4><p>​\t修改启动参数，否则启动时报警告。提示设置SOLR_ULIMIT_CHECKS&#x3D;false</p>\n<pre><code> cd /usr/local/solr/bin\n vim solr.in.sh\n</code></pre>\n\n\n\n\n\n<h4 id=\"4-启动Solr\"><a href=\"#4-启动Solr\" class=\"headerlink\" title=\"4.启动Solr\"></a>4.启动Solr</h4><p>​\tSolr内嵌Jetty，直接启动即可。监听8983端口。</p>\n<p>​\tsolr默认不推荐root账户启动，如果是root账户启动需要添加-force参数。</p>\n<pre><code># ./solr start -force\n</code></pre>\n<h4 id=\"5、可视化管理界面\"><a href=\"#5、可视化管理界面\" class=\"headerlink\" title=\"5、可视化管理界面\"></a>5、可视化管理界面</h4><p>​\t在关闭防火墙的前提下，可以在windows的浏览器中访问Solr。</p>\n<p>​\t输入: <span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguOTMuMTA6ODk4My8=\">http://192.168.93.10:8983</span> 就可以访问Solr的可视化管理界面。</p>\n<p>​\t左侧有5个菜单。分别是：</p>\n<p>​\t（1）Dashboard：面板显示Solr的总体信息。</p>\n<p>​\t（2）Logging：日志</p>\n<p>​\t（3）Core Admin：Solr的核心。类似于数据的Database</p>\n<p>​\t（4）Java Perperties：所有Java相关属性。</p>\n<p>​\t（5）Thread Dump：线程相关信息。</p>\n<p>​\t（6）如果有Core，将显示在此处。</p>\n\n\n\n\n\n<h4 id=\"6、新建核心\"><a href=\"#6、新建核心\" class=\"headerlink\" title=\"6、新建核心\"></a>6、新建核心</h4><p>​\tSolr安装完成后默认是没有核心的。需要手动配置。</p>\n<p>​\t需要在solr&#x2F;server&#x2F;solr下新建文件夹，并给定配置文件，否则无法建立。</p>\n\n\n\n\n\n<h5 id=\"6-1-新建目录\"><a href=\"#6-1-新建目录\" class=\"headerlink\" title=\"6.1.新建目录\"></a>6.1.新建目录</h5><p>​\t在&#x2F;usr&#x2F;local&#x2F;solr&#x2F;server&#x2F;solr中新建自定义名称目录。此处示例名称为testcore。</p>\n<pre><code> cd /usr/local/solr/server/solr\n mkdir testcore\n</code></pre>\n<h5 id=\"6-2-复制配置文件\"><a href=\"#6-2-复制配置文件\" class=\"headerlink\" title=\"6.2.复制配置文件\"></a>6.2.复制配置文件</h5><p>​\t在configsets里面包含了_default和sample_techproducts_configs。里面都是配置文件示例。_default属于默认配置，较纯净。sample_techproducts_configs是带有了一些配置示例。</p>\n<pre><code># cp -r configsets/_default/conf/ testcore/\n</code></pre>\n<h5 id=\"6-3-填写Core信息\"><a href=\"#6-3-填写Core信息\" class=\"headerlink\" title=\"6.3.填写Core信息\"></a>6.3.填写Core信息</h5><p>​\t在可视化管理界面中Core Admin中编写信息后点击Add Core后，短暂延迟后testcore就会创建成功。schema处不用更改。</p>\n\n\n\n\n\n<h5 id=\"6-4-出现testcore\"><a href=\"#6-4-出现testcore\" class=\"headerlink\" title=\"6.4.出现testcore\"></a>6.4.出现testcore</h5><p>​\t在客户端管理界面中，选择新建的Core后，就可以按照自己项目的需求进行操作了。</p>\n\n\n\n\n\n<h4 id=\"7、分词Analysis\"><a href=\"#7、分词Analysis\" class=\"headerlink\" title=\"7、分词Analysis\"></a>7、分词Analysis</h4><p>​\t在Solr可视化管理界面中，Core的管理菜单项中都会有Analysis。表示根据Scheme.xml(managed-schema)中配置要求进行解析。</p>\n<p>​\t对英文解析就比较简单了，只要按照空格把英文语句拆分成英文单词即可。</p>\n\n\n\n\n\n<p>​\t但是如果条件是中文时，把一句话按照字进行拆分就不是很合理了。正确的方式是按照合理的词组进行拆分。![](D:&#x2F;马士兵&#x2F;Java 课程&#x2F;13_分布式资料&#x2F;5_Solr&#x2F;文档&#x2F;Solr.assets&#x2F;solr-08.jpg)</p>\n<h5 id=\"7-1-配置步骤\"><a href=\"#7-1-配置步骤\" class=\"headerlink\" title=\"7.1.配置步骤\"></a>7.1.配置步骤</h5><p>​\t上传ik-analyzer.jar到webapps中。</p>\n<p>​\t去<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zZWFyY2gubWF2ZW4ub3JnL3NlYXJjaD9xPWNvbS5naXRodWIubWFnZXNlJUU0JUI4JThCJUU4JUJEJUJEJUU1JUFGJUI5JUU1JUJBJTk0JUU3JTg5JTg4JUU2JTlDJUFDJUU3JTlBJTg0aWstYW5hbHl6ZXIlRTMlODAlODIlRTUlOEYlQUYlRTQlQkIlQTUlRTUlOUMlQTglRTglQjUlODQlRTYlOTYlOTklRTQlQjglQUQlRTclOUIlQjQlRTYlOEUlQTUlRTglOEUlQjclRTUlOEYlOTYlRTMlODAlODI=\">https://search.maven.org/search?q=com.github.magese下载对应版本的ik-analyzer。可以在资料中直接获取。</span></p>\n<h5 id=\"7-1-1上传jar到指定目录\"><a href=\"#7-1-1上传jar到指定目录\" class=\"headerlink\" title=\"7.1.1上传jar到指定目录\"></a>7.1.1上传jar到指定目录</h5><p>​\t上传ik-analyzer-7.7.0.jar到</p>\n<p>​\t&#x2F;usr&#x2F;local&#x2F;solr&#x2F;server&#x2F;solr-webapp&#x2F;webapp&#x2F;WEB-INF&#x2F;lib目录中</p>\n<h5 id=\"7-1-2修改配置文件\"><a href=\"#7-1-2修改配置文件\" class=\"headerlink\" title=\"7.1.2修改配置文件\"></a>7.1.2修改配置文件</h5><p>​\t修改&#x2F;usr&#x2F;local&#x2F;solr&#x2F;server&#x2F;solr&#x2F;testcore&#x2F;conf&#x2F;managed-schema</p>\n<pre><code># vim /usr/local/solr/server/solr/testcore/conf/managed-schema\n</code></pre>\n<p>​\t添加下面内容。</p>\n<p>​\t排版：Esc 退出编辑状态下：gg&#x3D;G</p>\n<pre><code>&lt;field name=&quot;myfield&quot; type=&quot;text_ik&quot; indexed=&quot;true&quot; stored=&quot;true&quot; /&gt;\n    &lt;fieldType name=&quot;text_ik&quot; class=&quot;solr.TextField&quot;&gt;\n            &lt;analyzer type=&quot;index&quot;&gt;\n                    &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;false&quot; conf=&quot;ik.conf&quot;/&gt;\n                    &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n            &lt;/analyzer&gt;\n            &lt;analyzer type=&quot;query&quot;&gt;\n                    &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;true&quot; conf=&quot;ik.conf&quot;/&gt;\n                    &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n            &lt;/analyzer&gt;\n    &lt;/fieldType&gt;\n</code></pre>\n<h5 id=\"7-1-3重启\"><a href=\"#7-1-3重启\" class=\"headerlink\" title=\"7.1.3重启\"></a>7.1.3重启</h5><pre><code># cd /usr/local/solr/bin\n# ./solr stop -all\n# ./solr start -force\n</code></pre>\n<h5 id=\"7-1-4验证\"><a href=\"#7-1-4验证\" class=\"headerlink\" title=\"7.1.4验证\"></a>7.1.4验证</h5><p>​\t可以在可视化管理界面中找到myfield属性进行验证。</p>\n\n\n\n\n\n<h5 id=\"7-2-managed-schema配置说明\"><a href=\"#7-2-managed-schema配置说明\" class=\"headerlink\" title=\"7.2.managed-schema配置说明\"></a>7.2.managed-schema配置说明</h5><h5 id=\"7-2-1-lt-fieldType-x2F-gt\"><a href=\"#7-2-1-lt-fieldType-x2F-gt\" class=\"headerlink\" title=\"7.2.1&lt; fieldType&#x2F;&gt;\"></a>7.2.1&lt; fieldType&#x2F;&gt;</h5><p>​\t表示定义一个属性类型。在Solr中属性类型都是自定义的。在上面配置中name&#x3D;”text_ik”为自定义类型。当某个属性取值为text_ik时IK Analyzer才能生效。</p>\n<h5 id=\"7-2-2-lt-field-x2F-gt\"><a href=\"#7-2-2-lt-field-x2F-gt\" class=\"headerlink\" title=\"7.2.2&lt; field&#x2F;&gt;\"></a>7.2.2&lt; field&#x2F;&gt;</h5><p>​\t表示向Document中添加一个属性。</p>\n<p>​\t常用属性：</p>\n<p>​\t\tname: 属性名</p>\n<p>​\t\ttype:属性类型。所有类型都是solr使用<fieldType>配置的</p>\n<p>​\t\tindexed: 是否建立索引</p>\n<p>​\t\tstored: solr是否把该属性值响应给搜索用户。</p>\n<p>​\t\trequired：该属性是否是必须的。默认id是必须的。</p>\n<p>​\t\tmultiValued：如果为true，表示该属性为复合属性，此属性中包含了多个其他的属性。常用在多个列作为搜索条件时，把这些列定义定义成一个新的复合属性，通过搜索一个复合属性就可以实现搜索多个列。当设置为true时与&lt; copyField source&#x3D;”” dest&#x3D;””&#x2F;&gt;结合使用</p>\n<h5 id=\"7-2-3-lt-uniqueKey-gt\"><a href=\"#7-2-3-lt-uniqueKey-gt\" class=\"headerlink\" title=\"7.2.3&lt; uniqueKey&gt;\"></a>7.2.3&lt; uniqueKey&gt;</h5><p>​\t唯一主键，Solr中默认定义id属性为唯一主键。ID的值是不允许重复的。</p>\n<h5 id=\"7-2-4-lt-dynamicField-gt\"><a href=\"#7-2-4-lt-dynamicField-gt\" class=\"headerlink\" title=\"7.2.4&lt; dynamicField&gt;\"></a>7.2.4&lt; dynamicField&gt;</h5><p>​\t名称中允许*进行通配。代表满足特定名称要求的一组属性。</p>\n<pre><code> msb_java    \n</code></pre>\n<p>​\tmsb_bigdata</p>\n<p>​\tmsb_UI</p>\n<p>​        msb_*</p>\n<h4 id=\"8、Dataimport\"><a href=\"#8、Dataimport\" class=\"headerlink\" title=\"8、Dataimport\"></a>8、Dataimport</h4><p>​\t可以使用Solr自带的Dataimport功能把数据库中数据快速导入到solr中.</p>\n<p>​\t<strong>必须保证managed-schema和数据库中表的列对应。，添加配置</strong></p>\n<h5 id=\"8-1-修改配置文件\"><a href=\"#8-1-修改配置文件\" class=\"headerlink\" title=\"8.1.修改配置文件\"></a>8.1.修改配置文件</h5><p>​\t修改solrconfig.xml，添加下面内容</p>\n<pre><code> &lt;!-- 配置数据导入的处理器 --&gt;\n  &lt;requestHandler name=&quot;/dataimport&quot; class=&quot;org.apache.solr.handler.dataimport.DataImportHandler&quot;&gt;\n    &lt;lst name=&quot;defaults&quot;&gt;\n      &lt;!--  加载data-config.xml  --&gt;\n      &lt;str name=&quot;config&quot;&gt;data-config.xml&lt;/str&gt;\n     &lt;/lst&gt;\n  &lt;/requestHandler&gt;\n</code></pre>\n<h5 id=\"8-2-新建data-config-xml\"><a href=\"#8-2-新建data-config-xml\" class=\"headerlink\" title=\"8.2.新建data-config.xml\"></a>8.2.新建data-config.xml</h5><p>​\t和solrconfig.xml同一目录下新建data-config.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;dataConfig&gt;\n        &lt;dataSource type=&quot;JdbcDataSource&quot;   \n                driver=&quot;com.mysql.jdbc.Driver&quot;   \n                url=&quot;jdbc:mysql://192.168.1.135:3306/mytest&quot;   \n                user=&quot;root&quot;   \n                password=&quot;root&quot;/&gt;\n        &lt;document&gt;\n            &lt;entity name=&quot;product&quot; query=&quot;SELECT id,name,price from t_product&quot;&gt;\n                &lt;!-- \n                 实现数据库的列和索引库的字段的映射\n                 column 指定数据库的列表\n                 name  指定索引库的字段名字，必须和schema.xml中定义的一样\n                 --&gt;\n                 &lt;field column=&quot;id&quot; name=&quot;id&quot;/&gt;\n                 &lt;field column=&quot;name&quot; name=&quot;name&quot;/&gt;\n                 &lt;field column=&quot;price&quot; name=&quot;price&quot;/&gt;\n            &lt;/entity&gt;\n         &lt;/document&gt;\n&lt;/dataConfig&gt;\n</code></pre>\n<h5 id=\"8-3-添加jar\"><a href=\"#8-3-添加jar\" class=\"headerlink\" title=\"8.3.添加jar\"></a>8.3.添加jar</h5><p>​\t向solr-webapp中添加<strong>三个jar</strong>。在<strong>dist中两个还有一个数据库驱动。（自己去maven-repository里面找一个 mysql-connector-java ）</strong></p>\n\n\n\n\n\n<h5 id=\"8-4-操作\"><a href=\"#8-4-操作\" class=\"headerlink\" title=\"8.4.操作\"></a>8.4.操作</h5><p>​\t重启solr后，在可视化管理页面中进行数据导入。</p>\n<p>​\t注意：</p>\n<p>​\t点击导入按钮后，要记得点击刷新按钮。</p>\n<h2 id=\"Erlang安装\"><a href=\"#Erlang安装\" class=\"headerlink\" title=\"Erlang安装\"></a><strong>Erlang安装</strong></h2><h3 id=\"——1-8\"><a href=\"#——1-8\" class=\"headerlink\" title=\"——1\"></a>——1</h3><p>​\tRabbitMQ是使用Erlang语言编写的，所以需要先配置Erlang</p>\n<h4 id=\"1-修改主机名\"><a href=\"#1-修改主机名\" class=\"headerlink\" title=\"1 修改主机名\"></a>1 <strong>修改主机名</strong></h4><p>​\tRabbitMQ是通过主机名进行访问的，必须指定能访问的主机名。</p>\n<pre><code>  vim /etc/sysconfig/network\n  \n  添加\n  NETWORKING=yes\n  HOSTNAME=node-1 #名字可以随意\n</code></pre>\n\n\n\n\n\n<pre><code>    vim /etc/hosts\n  \n    ip network_hostname\neg: 192.168.1.195 node-1  \n</code></pre>\n<p>​\t新添加了一行，前面为服务器ip，空格后面添加计算机主机名</p>\n\n\n\n\n\n<h4 id=\"2-安装依赖\"><a href=\"#2-安装依赖\" class=\"headerlink\" title=\"2 安装依赖\"></a>2 <strong>安装依赖</strong></h4><pre><code>  yum -y install make gcc gcc-c++ kernel-devel m4 ncurses-devel openssl-devel unixODBC unixODBC-devel\n</code></pre>\n<h4 id=\"3-上传并解压\"><a href=\"#3-上传并解压\" class=\"headerlink\" title=\"3 上传并解压\"></a>3 <strong>上传并解压</strong></h4><p>​\t上传otp_src_22.0.tar.gz到&#x2F;usr&#x2F;local&#x2F;tmp目录中，进入目录并解压。</p>\n<pre><code> 解压时注意，此压缩包不具有gzip属性，解压参数没有z，只有xf\n</code></pre>\n<pre><code>  cd /usr/local/tmp\n  tar xf otp_src_22.0.tar.gz -C /usr/local/tmp\n</code></pre>\n<h4 id=\"4-配置参数\"><a href=\"#4-配置参数\" class=\"headerlink\" title=\"4 配置参数\"></a>4 <strong>配置参数</strong></h4><p>​\t先新建&#x2F;usr&#x2F;local&#x2F;erlang文件夹，作为安装文件夹</p>\n<pre><code>  mkdir -p /usr/local/erlang\n</code></pre>\n<p>​\t 进入文件夹</p>\n<pre><code>  cd otp_src_22.0\n</code></pre>\n<p>​\t 配置参数</p>\n<pre><code>  ./configure --prefix=/usr/local/erlang --with-ssl --enable-threads --enable-smp-support --enable-kernel-poll --enable-hipe --without-javac\n</code></pre>\n<h4 id=\"5-编译并安装\"><a href=\"#5-编译并安装\" class=\"headerlink\" title=\"5 编译并安装\"></a>5 <strong>编译并安装</strong></h4><p>​\t编译 </p>\n<pre><code>  make\n</code></pre>\n<p>​\t 安装</p>\n<pre><code>  make install\n</code></pre>\n<h4 id=\"6-修改环境变量\"><a href=\"#6-修改环境变量\" class=\"headerlink\" title=\"6 修改环境变量\"></a>6 <strong>修改环境变量</strong></h4><p>​\t修改&#x2F;etc&#x2F;profile文件</p>\n<pre><code> vim /etc/profile\n</code></pre>\n<p>​\t 在文件中添加下面代码 </p>\n<pre><code>export PATH=$PATH:/usr/local/erlang/bin\n</code></pre>\n<p>​\t运行文件，让修改内容生效</p>\n<pre><code>  source /etc/profile\n</code></pre>\n<h4 id=\"7-查看配置是否成功\"><a href=\"#7-查看配置是否成功\" class=\"headerlink\" title=\"7 查看配置是否成功\"></a>7 <strong>查看配置是否成功</strong></h4><pre><code>  erl -version\n</code></pre>\n\n\n\n\n\n\n\n\n\n\n\n<h2 id=\"RabbitMQ安装\"><a href=\"#RabbitMQ安装\" class=\"headerlink\" title=\"RabbitMQ安装\"></a>RabbitMQ<strong>安装</strong></h2><h4 id=\"1-上传并解压-1\"><a href=\"#1-上传并解压-1\" class=\"headerlink\" title=\"1 上传并解压\"></a>1 <strong>上传并解压</strong></h4><p>​\t上传rabbitmq-server-generic-unix-3.7.18.tar.xz到&#x2F;usr&#x2F;loca&#x2F;tmp中</p>\n<pre><code>  cd /usr/local/tmp\n  \n  tar xf rabbitmq-server-generic-unix-3.7.18.tar.xz -C /usr/local/tmp\n</code></pre>\n<h4 id=\"2-复制到local下\"><a href=\"#2-复制到local下\" class=\"headerlink\" title=\"2 复制到local下\"></a>2 <strong>复制到local下</strong></h4><p>​\t复制解压文件到&#x2F;usr&#x2F;local下，命名为rabbitmq</p>\n<pre><code>  cp -r rabbitmq_server-3.7.18 /usr/local/rabbitmq\n</code></pre>\n<h4 id=\"3-配置环境变量\"><a href=\"#3-配置环境变量\" class=\"headerlink\" title=\"3 配置环境变量\"></a>3 <strong>配置环境变量</strong></h4><pre><code>  vim /etc/profile\n</code></pre>\n<p>​\t在文件中添加 </p>\n<pre><code>export PATH=$PATH:/usr/local/rabbitmq/sbin\n</code></pre>\n<p>​\t解析文件</p>\n<pre><code> source /etc/profile\n</code></pre>\n<h4 id=\"4-开启web管理插件\"><a href=\"#4-开启web管理插件\" class=\"headerlink\" title=\"4 开启web管理插件\"></a>4 <strong>开启web管理插件</strong></h4><p>​\t进入rabbitmq&#x2F;sbin目录</p>\n<pre><code> cd /usr/local/rabbitmq/sbin\n</code></pre>\n<pre><code> 查看插件列表\n</code></pre>\n<pre><code>  ./rabbitmq-plugins list\n</code></pre>\n<pre><code> 生效管理插件\n</code></pre>\n<pre><code>  ./rabbitmq-plugins enable rabbitmq_management\n</code></pre>\n<h4 id=\"5-后台运行\"><a href=\"#5-后台运行\" class=\"headerlink\" title=\"5 后台运行\"></a>5 <strong>后台运行</strong></h4><p>​\t启动rabbitmq。</p>\n<pre><code>  ./rabbitmq-server -detached\n</code></pre>\n<p>​\t停止命令，如果无法停止，使用kill -9 进程号进行关闭</p>\n<pre><code> ./rabbitmqctl stop_app\n</code></pre>\n<h4 id=\"6-查看web管理界面\"><a href=\"#6-查看web管理界面\" class=\"headerlink\" title=\"6 查看web管理界面\"></a>6 <strong>查看web管理界面</strong></h4><p>​\t默认可以在安装rabbitmq的电脑上通过用户名：guest密码guest进行访问web管理界面</p>\n<p>​\t端口号：15672（放行端口，或关闭防火墙）</p>\n<p>​\t在虚拟机浏览器中输入：</p>\n<p>​\t<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDoxNTY3Mi8=\">http://localhost:15672</span></p>\n<h3 id=\"RabbitMq账户管理\"><a href=\"#RabbitMq账户管理\" class=\"headerlink\" title=\"* RabbitMq账户管理\"></a>* RabbitMq账户管理</h3><h4 id=\"1-创建账户\"><a href=\"#1-创建账户\" class=\"headerlink\" title=\"1 创建账户\"></a>1 <strong>创建账户</strong></h4><p>​\t语法：.&#x2F;rabbitmqctl add_user username password</p>\n<pre><code> cd /usr/local/rabbitmq/sbin\n \n ./rabbitmqctl add_user mashibing mashibing\n</code></pre>\n<h4 id=\"2-给用户授予管理员角色\"><a href=\"#2-给用户授予管理员角色\" class=\"headerlink\" title=\"2 给用户授予管理员角色\"></a>2 <strong>给用户授予管理员角色</strong></h4><p>​\t其中smallming为新建用户的用户名</p>\n<pre><code> ./rabbitmqctl set_user_tags mashibing administrator\n</code></pre>\n<h4 id=\"3-给用户授权\"><a href=\"#3-给用户授权\" class=\"headerlink\" title=\"3 给用户授权\"></a>3 <strong>给用户授权</strong></h4><p>​\t“&#x2F;” 表示虚拟机</p>\n<p>​\tmashibing 表示用户名</p>\n<p>​\t“.<em>“ “.</em>“ “.*” 表示完整权限</p>\n<pre><code> ./rabbitmqctl set_permissions -p &quot;/&quot; mashibing &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n</code></pre>\n<h4 id=\"4-登录\"><a href=\"#4-登录\" class=\"headerlink\" title=\"4 登录\"></a>4 <strong>登录</strong></h4><p>​\t使用新建账户和密码在windows中访问rabbitmq并登录 </p>\n<p>​\t在浏览器地址栏输入：</p>\n<p>​\t<span class=\"exturl\" data-url=\"aHR0cDovL2lwOjE1NjcyLw==\">http://ip:15672/</span></p>\n<pre><code> 用户名：mashibing\n</code></pre>\n<p>​\t密码：mashibing</p>\n<h2 id=\"SolrCloud\"><a href=\"#SolrCloud\" class=\"headerlink\" title=\"SolrCloud\"></a>SolrCloud</h2><p>​\tSolr可以搭建具备容错能力和高可用的Solr集群。集群中集群配置、自动负载均衡和查询故障转移、\t\t\tZookeeper集群实现集群协调管理，这些全部功能统称为SolrCloud。</p>\n<p>​\tSolrCloud是基于Zookeeper进行管理的。在Solr中已经内置了Zookeeper相关内容，当执行集群创建命令会自动创建Zookeeper相关内容。这个使用的是Zookeeper的集群管理功能实现的。</p>\n<h4 id=\"1-搭建\"><a href=\"#1-搭建\" class=\"headerlink\" title=\"1.搭建\"></a>1.搭建</h4><h5 id=\"1-1创建\"><a href=\"#1-1创建\" class=\"headerlink\" title=\"1.1创建\"></a>1.1创建</h5><p>​\tSolrCloud已经包含在了Solr中，可以直接启动Solr集群。</p>\n<pre><code> ./solr -e cloud -noprompt -force\n</code></pre>\n<p>​\t此命令等同于# .&#x2F;solr -e cloud -force全部参数为默认值。</p>\n<p>​\t运行成功后会在example文件夹多出cloud文件夹。</p>\n<h5 id=\"1-2停止\"><a href=\"#1-2停止\" class=\"headerlink\" title=\"1.2停止\"></a>1.2停止</h5><pre><code> ./solr stop -all\n</code></pre>\n<h5 id=\"1-3重新运行\"><a href=\"#1-3重新运行\" class=\"headerlink\" title=\"1.3重新运行\"></a>1.3重新运行</h5><pre><code> ./solr start -c -p 8983 -s ../example/cloud/node1/solr/ -force\n ./solr start -c -p 7574 -z localhost:9983 -s ../example/cloud/node2/solr/ -force\n</code></pre>\n<h2 id=\"HDFS安装\"><a href=\"#HDFS安装\" class=\"headerlink\" title=\"HDFS安装\"></a>HDFS安装</h2><h3 id=\"——1-9\"><a href=\"#——1-9\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h3 id=\"——2-7\"><a href=\"#——2-7\" class=\"headerlink\" title=\"——2\"></a>——2</h3><p>1.拉取Hadoop镜像（可以在docker hub上找合适的镜像）：</p>\n<pre><code class=\"shell\">docker pull singularities/hadoop\n</code></pre>\n<p>2.创建docker-compose.yml文件（可以在文本编辑器中写好后，复制），内容如下：</p>\n<pre><code class=\"yml\">\nversion: &quot;2&quot;\n\nservices:\n  namenode:\n    image: singularities/hadoop\n    command: start-hadoop namenode\n    environment:\n      HDFS_USER: hdfsuser\n    ports:\n      - &quot;8020:8020&quot;\n      - &quot;14000:14000&quot;\n      - &quot;50070:50070&quot;\n      - &quot;10020:10020&quot;\n      - &quot;13562:13562&quot;\n      - &quot;19888:19888&quot;\n  datanode:\n    image: singularities/hadoop\n    command: start-hadoop datanode namenode\n    environment:\n      HDFS_USER: hdfsuser\n    links:\n      - namenode\n</code></pre>\n<p>3.创建hadoop，执行如下命令</p>\n<pre><code class=\"shell\">docker-compose up -d\ndocker ps\n</code></pre>\n<p>4.开启多个datanode</p>\n<pre><code class=\"shell\">docker-compose scale datanode=3\ndocker ps\n</code></pre>\n<p>5.查看hadoop控制面板。由于服务刚初始化，可能需要等一会。访问类似如下url：</p>\n<pre><code class=\"ruby\">http://192.168.1.195:50070/dfshealth.html#tab-datanode\n</code></pre>\n<p>6.进入任意hadoop相关容器，<strong>直接进行hdfs基础操作</strong><br>在任意datanode的容器中操作hdfs，会自动同步到其他的datanode容器中。</p>\n<pre><code class=\"bash\"># 查看所有命令\nhadoop fs\n# 创建目录\nhadoop fs -mkdir /hdfs #在根目录下创建hdfs文件夹\n# 查看目录\nhadoop fs -ls  /   #列出根目录下的文件列表\n# 创建多级目录\nhadoop fs -mkdir -p /hdfs/d1/d2\n# 上传文件到HDFS\necho &quot;hello world&quot; &gt;&gt; local.txt   #创建文件\nhadoop fs -put local.txt /hdfs/   #上传文件到hdfs\n# 下载hdfs文件\nhadoop fs -get /hdfs/local.txt\n# 删除hdfs中的文件\nhadoop fs -rm /hdfs/local.txt\n# 删除hdfs中的目录\nhadoop fs -rmdir /hdfs/d1/d2\n</code></pre>\n<h2 id=\"Kafka-安装\"><a href=\"#Kafka-安装\" class=\"headerlink\" title=\"Kafka 安装\"></a>Kafka 安装</h2><blockquote>\n<p>安装前提，kafka安装运行最低支持jdk7；本篇演示版本是基于jdk1.8；</p>\n</blockquote>\n<p>官方下载地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHA6Ly9rYWZrYS5hcGFjaGUub3JnL2Rvd25sb2Fkcw==\">Apache Kafka</span></p>\n<p>kafka 是由scala语言编写，下载稳定版本，即前一个版本</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-9f6503ade62cfa48df87cc9da984e87d_720w.jpg\" alt=\"img\"></p>\n<p>点击进入后，按如下方式点击下载</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-bd19bea83d1cb978fbeed614ee126da6_720w.jpg\" alt=\"img\"></p>\n<p>下载完成后进行解压缩</p>\n<pre><code class=\"sh\">tar -zxvf kafka_2.12-2.8.0.tgz \nmv kafka_2.12-2.8.0 /usr/local/kafka\n</code></pre>\n<p>解压完成后进入kafka目录</p>\n<pre><code class=\"sh\">cd /usr/local/kafka\n</code></pre>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-dfe360dfc7561953761f8ce69f782f4d_720w.png\" alt=\"img\"></p>\n<p>kafka 是基于 Zookeeper 的消息管理系统，所以启动的时候是需要使用到 Zookeeper ，但其内置了Zookeeper ，所以只需要根据bin目录下的文件进行启动即可</p>\n<p>启动Zookeeper 服务端命令</p>\n<pre><code class=\"text\">./bin/zookeeper-server-start.sh ./config/zookeeper.properties \n</code></pre>\n<p>Zookeeper 启动成功后会出现 <code>binding to port 0.0.0.0/0.0.0.0:2181</code> 所示结果表示启动成功；</p>\n<p><img data-src=\"https://pic1.zhimg.com/80/v2-6be2f91cd4ec47d589d3c5b58584c4b8_720w.png\" alt=\"img\"></p>\n<p>启动kafka服务端命令</p>\n<pre><code class=\"text\"> ./bin/kafka-server-start.sh  ./config/server.properties\n</code></pre>\n<h2 id=\"MyCat-Server安装\"><a href=\"#MyCat-Server安装\" class=\"headerlink\" title=\"MyCat(Server安装)\"></a>MyCat(Server安装)</h2><ul>\n<li><p>前提：</p>\n<ul>\n<li>1、<a href=\"#jdk_install\">jdk安装</a></li>\n<li>2、<a href=\"#mysql_install\">mysql安装</a></li>\n</ul>\n</li>\n<li><p>官网：<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5teWNhdC5vcmcuY24v\">http://www.mycat.org.cn/</span></p>\n</li>\n<li><p>首先准备四台虚拟机，安装好mysql，方便后续做读写分离和主从复制。**(3.3内容)**</p>\n<pre><code class=\"shell\">192.168.85.45 node01\n192.168.85.46 node02\n192.168.85.47 node03\n192.168.85.48 node04\n</code></pre>\n</li>\n</ul>\n<h4 id=\"1、下载MyCat\"><a href=\"#1、下载MyCat\" class=\"headerlink\" title=\"1、下载MyCat\"></a>1、下载MyCat</h4><p><span class=\"exturl\" data-url=\"aHR0cDovL2RsLm15Y2F0Lm9yZy5jbi8xLjYuNy42LzIwMjEwOTMwMjEzMDQ5L015Y2F0LXNlcnZlci0xLjYuNy42LXJlbGVhc2UtMjAyMTA5MzAyMTMwNDktbGludXgudGFyLmd6\">http://dl.mycat.org.cn/1.6.7.6/20210930213049/Mycat-server-1.6.7.6-release-20210930213049-linux.tar.gz</span></p>\n<pre><code class=\"shell\">windows下载安装包\n</code></pre>\n<h4 id=\"2、上传并解压压缩文件\"><a href=\"#2、上传并解压压缩文件\" class=\"headerlink\" title=\"2、上传并解压压缩文件\"></a>2、上传并解压压缩文件</h4><pre><code class=\"shell\"> tar -zxvf Mycat-server-1.6.7.5-release-20200422133810-linux.tar.gz -C /usr/local/ \n</code></pre>\n<h4 id=\"3、修改配置\"><a href=\"#3、修改配置\" class=\"headerlink\" title=\"3、修改配置\"></a>3、修改配置</h4><p>0、配置环境变量（可选）</p>\n<pre><code class=\"shell\">vim /etc/profile\n# 添加如下配置信息：\nexport MYCAT_HOME=/usr/local/mycat\nexport PATH=$MYCAT_HOME/bin:$PATH:$JAVA_HOME/bin\n\n# 生效\nsource /etc/profile\n</code></pre>\n<p><strong>修改server.xml schema.xml之前先备份</strong></p>\n<pre><code class=\"shell\">cd /usr/local/mycat\n\ncd conf\n\ncp server.xml server.xml.list\ncp schema.xml schema.xml.list\n</code></pre>\n<p>1、修改完成后的  <strong>server.xml</strong></p>\n<pre><code class=\"xml\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!-- - - Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); \n        - you may not use this file except in compliance with the License. - You \n        may obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 \n        - - Unless required by applicable law or agreed to in writing, software - \n        distributed under the License is distributed on an &quot;AS IS&quot; BASIS, - WITHOUT \n        WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the \n        License for the specific language governing permissions and - limitations \n        under the License. --&gt;\n&lt;!DOCTYPE mycat:server SYSTEM &quot;server.dtd&quot;&gt;\n&lt;mycat:server xmlns:mycat=&quot;http://io.mycat/&quot;&gt;\n        &lt;user name=&quot;root&quot; defaultAccount=&quot;true&quot;&gt;\n                &lt;property name=&quot;password&quot;&gt;root&lt;/property&gt;\n                &lt;property name=&quot;schemas&quot;&gt;TESTDB&lt;/property&gt;\n                &lt;property name=&quot;defaultSchema&quot;&gt;TESTDB&lt;/property&gt;\n        &lt;/user&gt;\n&lt;/mycat:server&gt;\n</code></pre>\n<p>2、修改完成后的 schema.xml</p>\n<pre><code class=\"xml\">&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;\n&lt;mycat:schema xmlns:mycat=&quot;http://io.mycat/&quot;&gt;\n        &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dn1&quot;&gt;\n        &lt;/schema&gt;\n        &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;msb&quot; /&gt;\n        &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;\n                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;\n                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;\n                &lt;writeHost host=&quot;hostM1&quot; url=&quot;192.168.1.45:3306&quot; user=&quot;root&quot;\n                                   password=&quot;root&quot;&gt;\n                         &lt;readHost host=&quot;hostS1&quot; url=&quot;192.168.1.46:3306&quot; user=&quot;root&quot; password=&quot;root&quot;&gt;&lt;/readHost&gt;\n                &lt;/writeHost&gt;\n        &lt;/dataHost&gt;\n&lt;/mycat:schema&gt;\n</code></pre>\n<p>3、修改 <strong>hosts</strong>  文件</p>\n<pre><code class=\"shell\">vim /etc/hosts\n\n#添加\n#ip name\n192.168.1.164 node01\n</code></pre>\n<h4 id=\"4、启动mycat\"><a href=\"#4、启动mycat\" class=\"headerlink\" title=\"4、启动mycat\"></a>4、启动mycat</h4><p>​\t\tmycat的启动有两种方式，一种是控制台启动，一种是后台启动，在初学的时候建议大家使用控制台启动的方式，当配置文件写错之后，可以方便的看到错误，及时修改，但是在生产环境中，使用后台启动的方式比较稳妥。</p>\n<p>​\t\t<strong>控制台启动：</strong></p>\n<pre><code class=\"shell\">cd /usrlocal/mycat/bin\n./mycat console\n\n#加入环境变量后可直接启动\nmycat console\n</code></pre>\n<p>​\t\t<strong>后台启动：</strong></p>\n<pre><code class=\"shell\">cd /usrlocal/mycat/bin\n./mycat start\n\n#加入环境变量后可直接启动\nmycat start\n</code></pre>\n<p>​\t\t按照如上配置在安装的时候应该不会报错，如果出现错误，根据错误的提示解决即可。</p>\n<h4 id=\"5、登录验证\"><a href=\"#5、登录验证\" class=\"headerlink\" title=\"5、登录验证\"></a>5、登录验证</h4><p>​\t\t<strong>管理窗口的登录</strong></p>\n<p>​\t\t从另外的虚拟机去登录访问当前mycat，输入如下命令即可</p>\n<pre><code>mysql -uroot -proot -P 9066 -h ip\n</code></pre>\n<p>​\t\t此时访问的是mycat的管理窗口，可以通过show @@help查看可以执行的命令</p>\n<p>​\t\t<strong>数据窗口的登录</strong></p>\n<p>​\t\t从另外的虚拟机去登录访问mycat，输入命令如下：【用户设置】</p>\n<pre><code>mysql -uroot -proot -P8066 -h ip\n</code></pre>\n<p>​\t\t当都能够成功的时候以为着mycat已经搭建完成。</p>\n<h2 id=\"HAProxy安装\"><a href=\"#HAProxy安装\" class=\"headerlink\" title=\"HAProxy安装\"></a>HAProxy安装</h2><h3 id=\"——1-10\"><a href=\"#——1-10\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h4 id=\"1、准备好HAProxy的安装包\"><a href=\"#1、准备好HAProxy的安装包\" class=\"headerlink\" title=\"1、准备好HAProxy的安装包\"></a>1、准备好HAProxy的安装包</h4><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcmMuZmVkb3JhcHJvamVjdC5vcmcvcmVwby9wa2dzL2hhcHJveHkv\">https://src.fedoraproject.org/repo/pkgs/haproxy/</span></p>\n<h4 id=\"2、解压到-x2F-usr-x2F-local目录\"><a href=\"#2、解压到-x2F-usr-x2F-local目录\" class=\"headerlink\" title=\"2、解压到&#x2F;usr&#x2F;local目录\"></a>2、解压到&#x2F;usr&#x2F;local目录</h4><h4 id=\"3、进入到解压后的目录，查看内核版本，进行编译\"><a href=\"#3、进入到解压后的目录，查看内核版本，进行编译\" class=\"headerlink\" title=\"3、进入到解压后的目录，查看内核版本，进行编译\"></a>3、进入到解压后的目录，查看内核版本，进行编译</h4><pre><code class=\"shell\">cd cd /usr/local/haproxy-1.8.25/\n\n# 查看内核版本3.10=31\nuname -r\n\nmake TARGET=linux31\n</code></pre>\n<h4 id=\"4、编译完成之后，开始进行安装\"><a href=\"#4、编译完成之后，开始进行安装\" class=\"headerlink\" title=\"4、编译完成之后，开始进行安装\"></a>4、编译完成之后，开始进行安装</h4><pre><code class=\"shell\">make install PREFIX=/usr/local/haproxy\n</code></pre>\n<h4 id=\"5、安装完成之后，创建目录，创建HAProxy配置文件\"><a href=\"#5、安装完成之后，创建目录，创建HAProxy配置文件\" class=\"headerlink\" title=\"5、安装完成之后，创建目录，创建HAProxy配置文件\"></a>5、安装完成之后，创建目录，创建HAProxy配置文件</h4><pre><code class=\"shell\">mkdir -p /usr/data/haproxy\nmkdir /usr/local/haproxy/conf\nvi /usr/local/haproxy/conf、haproxy.conf\n</code></pre>\n<p>6、向配置文件中添加配置信息</p>\n<pre><code class=\"shell\">    global\n        log 127.0.0.1 local0\n        #log 127.0.0.1 local1 notice\n        #log loghost local0 info\n        maxconn 4096\n        chroot /usr/local/haproxy\n        pidfile /usr/data/haproxy/haproxy.pid\n        uid 99\n        gid 99\n        daemon\n        #debug\n        #quiet\ndefaults\n        log global\n        mode tcp\n        option abortonclose\n        option redispatch\n        retries 3\n        maxconn 2000\n        timeout connect 5000\n        timeout client 50000\n        timeout server 50000\nlisten proxy_status\n    bind :48066\n        mode tcp\n        balance roundrobin\n        server mycat_1 192.168.85.111:8066 check inter 10s\n        server mycat_2 192.168.85.112:8066 check inter 10s\nfrontend admin_stats\n    bind :7777\n        mode http\n        stats enable\n        option httplog\n        maxconn 10\n        stats refresh 30s\n        stats uri /admin\n        stats auth admin:123123\n        stats hide-version\n        stats admin if TRUE\n</code></pre>\n<ul>\n<li>stats uri &#x2F;admin                   \t\t   <strong>账号</strong></li>\n<li>stats auth admin:123123       \t   <strong>密码</strong></li>\n</ul>\n<h4 id=\"7、启动haproxy服务\"><a href=\"#7、启动haproxy服务\" class=\"headerlink\" title=\"7、启动haproxy服务\"></a>7、启动haproxy服务</h4><pre><code class=\"shell\">    /usr/local/haproxy/sbin/haproxy -f /usr/local/haproxy/conf/haproxy.conf\n</code></pre>\n<h4 id=\"8、查看haproxy的进程，如果存在则说明没有问题\"><a href=\"#8、查看haproxy的进程，如果存在则说明没有问题\" class=\"headerlink\" title=\"8、查看haproxy的进程，如果存在则说明没有问题\"></a>8、查看haproxy的进程，如果存在则说明没有问题</h4><pre><code class=\"shell\">    ps -ef | grep haproxy\n</code></pre>\n<h4 id=\"9、打开浏览器访问-用户名为admin，密码为123123\"><a href=\"#9、打开浏览器访问-用户名为admin，密码为123123\" class=\"headerlink\" title=\"9、打开浏览器访问,用户名为admin，密码为123123\"></a>9、打开浏览器访问,用户名为admin，密码为123123</h4><p>​\t<span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMS4xNjQ6Nzc3Ny9hZG1pbg==\">http://192.168.1.164:7777/admin</span></p>\n<h2 id=\"Keepalived安装\"><a href=\"#Keepalived安装\" class=\"headerlink\" title=\"Keepalived安装\"></a>Keepalived安装</h2><h3 id=\"——1-11\"><a href=\"#——1-11\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h4 id=\"1、准备好Keepalived安装包\"><a href=\"#1、准备好Keepalived安装包\" class=\"headerlink\" title=\"1、准备好Keepalived安装包\"></a>1、准备好Keepalived安装包</h4><h4 id=\"2、解压到-x2F-usr-x2F-local目录-1\"><a href=\"#2、解压到-x2F-usr-x2F-local目录-1\" class=\"headerlink\" title=\"2、解压到&#x2F;usr&#x2F;local目录\"></a>2、解压到&#x2F;usr&#x2F;local目录</h4><pre><code class=\"shell\">tar -zxvf /usr/local/tmp/keepalived-1.4.5.tar.gz -C /usr/local/\n</code></pre>\n<h4 id=\"3、安装需要依赖的环境组件\"><a href=\"#3、安装需要依赖的环境组件\" class=\"headerlink\" title=\"3、安装需要依赖的环境组件\"></a>3、安装需要依赖的环境组件</h4><pre><code class=\"shell\">yum install gcc openssl-devel popt-devel -y\n</code></pre>\n<h4 id=\"4、进入到解压目录，进行编译\"><a href=\"#4、进入到解压目录，进行编译\" class=\"headerlink\" title=\"4、进入到解压目录，进行编译\"></a>4、进入到解压目录，进行编译</h4><pre><code>cd /usr/local/keepalived-1.4.5\n./configure --prefix=/usr/local/keepalived\t\n</code></pre>\n<h4 id=\"5、编译完成之后，进行安装\"><a href=\"#5、编译完成之后，进行安装\" class=\"headerlink\" title=\"5、编译完成之后，进行安装\"></a>5、编译完成之后，进行安装</h4><pre><code class=\"shell\">make &amp;&amp; make install\n</code></pre>\n<h4 id=\"6、将keepalived的服务注册为系统服务\"><a href=\"#6、将keepalived的服务注册为系统服务\" class=\"headerlink\" title=\"6、将keepalived的服务注册为系统服务\"></a>6、将keepalived的服务注册为系统服务</h4><pre><code class=\"shell\">cp  -rf   /usr/local/keepalived-1.4.5/keepalived/etc/init.d/keepalived /etc/init.d/\nmkdir /etc/keepalived\ncp   -rf  /usr/local/keepalived/etc/keepalived/keepalived.conf /etc/keepalived/\ncp   -rf  /usr/local/keepalived-1.4.5/keepalived/etc/sysconfig/keepalived /etc/sysconfig/\ncp   -rf  /usr/local/keepalived/sbin/keepalived /usr/sbin/\n</code></pre>\n<h4 id=\"7、修改配置文件\"><a href=\"#7、修改配置文件\" class=\"headerlink\" title=\"7、修改配置文件\"></a>7、修改配置文件</h4><pre><code class=\"shell\">vim  /etc/keepalived/keepalived.conf\n</code></pre>\n<p><strong>CentOS-6   下的配置文件</strong></p>\n<pre><code class=\"shell\">! Configuration File for keepalived\nglobal_defs &#123;\n   notification_email &#123;\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   &#125;\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 127.0.0.1\n   smtp_connect_timeout 30\n   router_id LVS_DEVEL\n   vrrp_skip_check_adv_addr\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n&#125;\n\nvrrp_instance VI_1 &#123;\n    # 配置为主\n    state MASTER\n    # 设置网卡\n    interface eth0\n     # 虚拟路由ID，全局唯一\n    virtual_router_id 51\n    # 优先级，权重值\n    priority 100\n    advert_int 1\n    authentication &#123;\n        auth_type PASS\n        auth_pass 1111\n    &#125;\n    virtual_ipaddress &#123;\n         192.168.1.100/24  dev eth0 label eth0:3:\n    &#125;\n&#125;\n</code></pre>\n<p><strong>CentOS-7   下的配置文件</strong></p>\n<pre><code class=\"conf\">! Configuration File for keepalived\nglobal_defs &#123;\n   notification_email &#123;\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   &#125;\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 127.0.0.1\n   smtp_connect_timeout 30\n   router_id LVS_DEVEL\n   vrrp_skip_check_adv_addr\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n&#125;\n\nvrrp_instance VI_1 &#123;\n    # 配置为主\n    state MASTER\n    # 设置网卡\n    interface ens33\n     # 虚拟路由ID，全局唯一\n    virtual_router_id 51\n    # 优先级，权重值\n    priority 100\n    advert_int 1\n    authentication &#123;\n        auth_type PASS\n        auth_pass 1111\n    &#125;\n    virtual_ipaddress &#123;\n        192.168.1.100/24 \n    &#125;\n&#125;\n</code></pre>\n<h4 id=\"8、启动keepalived\"><a href=\"#8、启动keepalived\" class=\"headerlink\" title=\"8、启动keepalived\"></a>8、启动keepalived</h4><pre><code class=\"shell\">service keepalived start\n#或者\nsystemctl start keepalived.service\n</code></pre>\n<h4 id=\"9、登录验证\"><a href=\"#9、登录验证\" class=\"headerlink\" title=\"9、登录验证\"></a>9、登录验证</h4><pre><code class=\"shell\">mysql -uroot -p123456 -h 192.168.1.100 -P 48066\n</code></pre>\n<h2 id=\"mycat-web\"><a href=\"#mycat-web\" class=\"headerlink\" title=\"mycat-web\"></a>mycat-web</h2><h3 id=\"——1-12\"><a href=\"#——1-12\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h4 id=\"1、下载mycat-web安装包\"><a href=\"#1、下载mycat-web安装包\" class=\"headerlink\" title=\"1、下载mycat-web安装包\"></a>1、下载mycat-web安装包</h4><p>​\t官方地址：<span class=\"exturl\" data-url=\"aHR0cDovL2RsLm15Y2F0Lm9yZy5jbi8=\">http://dl.mycat.org.cn/</span></p>\n<h4 id=\"2、解压安装包到-x2F-usr-x2F-local目录\"><a href=\"#2、解压安装包到-x2F-usr-x2F-local目录\" class=\"headerlink\" title=\"2、解压安装包到&#x2F;usr&#x2F;local目录\"></a>2、解压安装包到&#x2F;usr&#x2F;local目录</h4><pre><code class=\"shell\">tar -zxvf Mycat-web-1.0-SNAPSHOT-20170102153329-linux.tar.gz -C /usr/local/\n</code></pre>\n<h4 id=\"3、进入mycat-web的目录运行启动命令\"><a href=\"#3、进入mycat-web的目录运行启动命令\" class=\"headerlink\" title=\"3、进入mycat-web的目录运行启动命令\"></a>3、进入mycat-web的目录运行启动命令</h4><pre><code class=\"shell\">    ./start.sh &amp;\n</code></pre>\n<h4 id=\"4、mycat-web的服务端口是8082，查看服务是否启动\"><a href=\"#4、mycat-web的服务端口是8082，查看服务是否启动\" class=\"headerlink\" title=\"4、mycat-web的服务端口是8082，查看服务是否启动\"></a>4、mycat-web的服务端口是8082，查看服务是否启动</h4><pre><code class=\"shell\">    netstat -nlpt | grep 8082\n</code></pre>\n<h4 id=\"5、通过地址访问服务\"><a href=\"#5、通过地址访问服务\" class=\"headerlink\" title=\"5、通过地址访问服务\"></a>5、通过地址访问服务</h4><pre><code class=\"shell\">    192.168.1.164:8082/mycat/\n</code></pre>\n<h4 id=\"6、mycat-web配置\"><a href=\"#6、mycat-web配置\" class=\"headerlink\" title=\"6、mycat-web配置\"></a>6、mycat-web配置</h4><h5 id=\"6-1、配置zookeeper-可选\"><a href=\"#6-1、配置zookeeper-可选\" class=\"headerlink\" title=\"6.1、配置zookeeper(可选)\"></a>6.1、配置zookeeper(可选)</h5><pre><code class=\"shell\">cd /usr/local/mycat-web/mycat-web/WEB-INF/classes\n\n#修改mycat.properties文件，可以修改zookeeper的地址\nvim mycat.properties\n</code></pre>\n<h5 id=\"6-2、添加mycat实例\"><a href=\"#6-2、添加mycat实例\" class=\"headerlink\" title=\"6.2、添加mycat实例\"></a>6.2、添加mycat实例</h5><pre><code>* 在页面的mycat配置\n\n* mycat服务管理中添加mycat实例，需要填写相关的参数\n</code></pre>\n<h2 id=\"Nacos安装\"><a href=\"#Nacos安装\" class=\"headerlink\" title=\"Nacos安装\"></a>Nacos安装</h2><p><strong>注：</strong></p>\n<ul>\n<li><p>安装之前必须 配置  <a href=\"#jdk_install\">jdk</a></p>\n</li>\n<li><p>安装之前必须 配置  <a href=\"#mysql_install\">mysql5.6.+</a></p>\n</li>\n</ul>\n<div name=\"nacos_install_1\">\n\n<h3 id=\"——1-13\"><a href=\"#——1-13\" class=\"headerlink\" title=\"——1\"></a>——1</h3><h4 id=\"1、准备安装包\"><a href=\"#1、准备安装包\" class=\"headerlink\" title=\"1、准备安装包\"></a>1、准备安装包</h4><p>官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FsaWJhYmEvbmFjb3MvcmVsZWFzZXM=\">https://github.com/alibaba/nacos/releases</span></p>\n<p>本篇我们选择version：2.0.3</p>\n<h4 id=\"2、上传并解压\"><a href=\"#2、上传并解压\" class=\"headerlink\" title=\"2、上传并解压\"></a>2、上传并解压</h4><pre><code class=\"shell\">tar -zxvf nacos-server-2.0.3 .tar.gz -C /usr/local/\n</code></pre>\n<h4 id=\"3、修改配置-1\"><a href=\"#3、修改配置-1\" class=\"headerlink\" title=\"3、修改配置\"></a>3、修改配置</h4><blockquote>\n<p>1、使用nacos-mysql.sql</p>\n<p>​\t\t为我们储存数据建立数据库、表</p>\n<p>2、<code>application.properties里面修改数据储存位置为mysql</code></p>\n</blockquote>\n<pre><code class=\"shell\">cd /usr/local/nacos/conf\n</code></pre>\n<pre><code class=\"sql\">-- 1 建立数据库\ncreate  database nacos_config;\nuse nacos_config;\n\nCREATE TABLE `config_info` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(255) DEFAULT NULL,\n  `content` longtext NOT NULL COMMENT &#39;content&#39;,\n  `md5` varchar(32) DEFAULT NULL COMMENT &#39;md5&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  `src_user` text COMMENT &#39;source user&#39;,\n  `src_ip` varchar(50) DEFAULT NULL COMMENT &#39;source ip&#39;,\n  `app_name` varchar(128) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;租户字段&#39;,\n  `c_desc` varchar(256) DEFAULT NULL,\n  `c_use` varchar(64) DEFAULT NULL,\n  `effect` varchar(64) DEFAULT NULL,\n  `type` varchar(64) DEFAULT NULL,\n  `c_schema` text,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;config_info&#39;;\n\n\nCREATE TABLE `config_info_aggr` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(255) NOT NULL COMMENT &#39;group_id&#39;,\n  `datum_id` varchar(255) NOT NULL COMMENT &#39;datum_id&#39;,\n  `content` longtext NOT NULL COMMENT &#39;内容&#39;,\n  `gmt_modified` datetime NOT NULL COMMENT &#39;修改时间&#39;,\n  `app_name` varchar(128) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;租户字段&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;增加租户字段&#39;;\n\n\n\nCREATE TABLE `config_info_beta` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(128) NOT NULL COMMENT &#39;group_id&#39;,\n  `app_name` varchar(128) DEFAULT NULL COMMENT &#39;app_name&#39;,\n  `content` longtext NOT NULL COMMENT &#39;content&#39;,\n  `beta_ips` varchar(1024) DEFAULT NULL COMMENT &#39;betaIps&#39;,\n  `md5` varchar(32) DEFAULT NULL COMMENT &#39;md5&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  `src_user` text COMMENT &#39;source user&#39;,\n  `src_ip` varchar(50) DEFAULT NULL COMMENT &#39;source ip&#39;,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;租户字段&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;config_info_beta&#39;;\n\n\nCREATE TABLE `config_info_tag` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(128) NOT NULL COMMENT &#39;group_id&#39;,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;tenant_id&#39;,\n  `tag_id` varchar(128) NOT NULL COMMENT &#39;tag_id&#39;,\n  `app_name` varchar(128) DEFAULT NULL COMMENT &#39;app_name&#39;,\n  `content` longtext NOT NULL COMMENT &#39;content&#39;,\n  `md5` varchar(32) DEFAULT NULL COMMENT &#39;md5&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  `src_user` text COMMENT &#39;source user&#39;,\n  `src_ip` varchar(50) DEFAULT NULL COMMENT &#39;source ip&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;config_info_tag&#39;;\n\n\nCREATE TABLE `config_tags_relation` (\n  `id` bigint(20) NOT NULL COMMENT &#39;id&#39;,\n  `tag_name` varchar(128) NOT NULL COMMENT &#39;tag_name&#39;,\n  `tag_type` varchar(64) DEFAULT NULL COMMENT &#39;tag_type&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(128) NOT NULL COMMENT &#39;group_id&#39;,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;tenant_id&#39;,\n  `nid` bigint(20) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`nid`),\n  UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),\n  KEY `idx_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;config_tag_relation&#39;;\n\n\nCREATE TABLE `group_capacity` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#39;主键ID&#39;,\n  `group_id` varchar(128) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;Group ID，空字符表示整个集群&#39;,\n  `quota` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;配额，0表示使用默认值&#39;,\n  `usage` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;使用量&#39;,\n  `max_size` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;单个配置大小上限，单位为字节，0表示使用默认值&#39;,\n  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;聚合子配置最大个数，，0表示使用默认值&#39;,\n  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#39;,\n  `max_history_count` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;最大变更历史数量&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_group_id` (`group_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;集群、各Group容量信息表&#39;;\n\n\nCREATE TABLE `his_config_info` (\n  `id` bigint(64) unsigned NOT NULL,\n  `nid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `data_id` varchar(255) NOT NULL,\n  `group_id` varchar(128) NOT NULL,\n  `app_name` varchar(128) DEFAULT NULL COMMENT &#39;app_name&#39;,\n  `content` longtext NOT NULL,\n  `md5` varchar(32) DEFAULT NULL,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `src_user` text,\n  `src_ip` varchar(50) DEFAULT NULL,\n  `op_type` char(10) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;租户字段&#39;,\n  PRIMARY KEY (`nid`),\n  KEY `idx_gmt_create` (`gmt_create`),\n  KEY `idx_gmt_modified` (`gmt_modified`),\n  KEY `idx_did` (`data_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;多租户改造&#39;;\n\n\nCREATE TABLE `tenant_capacity` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#39;主键ID&#39;,\n  `tenant_id` varchar(128) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;Tenant ID&#39;,\n  `quota` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;配额，0表示使用默认值&#39;,\n  `usage` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;使用量&#39;,\n  `max_size` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;单个配置大小上限，单位为字节，0表示使用默认值&#39;,\n  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;聚合子配置最大个数&#39;,\n  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#39;,\n  `max_history_count` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;最大变更历史数量&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;租户容量信息表&#39;;\n\n\nCREATE TABLE `tenant_info` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `kp` varchar(128) NOT NULL COMMENT &#39;kp&#39;,\n  `tenant_id` varchar(128) default &#39;&#39; COMMENT &#39;tenant_id&#39;,\n  `tenant_name` varchar(128) default &#39;&#39; COMMENT &#39;tenant_name&#39;,\n  `tenant_desc` varchar(256) DEFAULT NULL COMMENT &#39;tenant_desc&#39;,\n  `create_source` varchar(32) DEFAULT NULL COMMENT &#39;create_source&#39;,\n  `gmt_create` bigint(20) NOT NULL COMMENT &#39;创建时间&#39;,\n  `gmt_modified` bigint(20) NOT NULL COMMENT &#39;修改时间&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),\n  KEY `idx_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;tenant_info&#39;;\n\nCREATE TABLE `users` (\n    `username` varchar(50) NOT NULL PRIMARY KEY,\n    `password` varchar(500) NOT NULL,\n    `enabled` boolean NOT NULL\n);\n\nCREATE TABLE `roles` (\n    `username` varchar(50) NOT NULL,\n    `role` varchar(50) NOT NULL,\n    UNIQUE INDEX `idx_user_role` (`username` ASC, `role` ASC) USING BTREE\n);\n\nCREATE TABLE `permissions` (\n    `role` varchar(50) NOT NULL,\n    `resource` varchar(255) NOT NULL,\n    `action` varchar(8) NOT NULL,\n    UNIQUE INDEX `uk_role_permission` (`role`,`resource`,`action`) USING BTREE\n);\n\nINSERT INTO users (username, password, enabled) VALUES (&#39;nacos&#39;, &#39;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#39;, TRUE);\n\nINSERT INTO roles (username, role) VALUES (&#39;nacos&#39;, &#39;ROLE_ADMIN&#39;);\n</code></pre>\n<pre><code class=\"shell\">\n#2 先留取备份\ncp application.properties application.properties.bk\n\nvim application.properties\n\n# 在application.properties最后添加以下内容\nspring.datasource.platform=mysql\n\ndb.num=1\ndb.url.0=jdbc:mysql://127.0.0.1:3306/nacos_config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;serverTimezone=UTC\ndb.user=root\ndb.password=root\n</code></pre>\n<h4 id=\"4、开启nacos\"><a href=\"#4、开启nacos\" class=\"headerlink\" title=\"4、开启nacos\"></a>4、开启nacos</h4><pre><code class=\"shell\">/usr/local/nacos/bin/startup.sh\n</code></pre>\n<h4 id=\"5、查看\"><a href=\"#5、查看\" class=\"headerlink\" title=\"5、查看\"></a>5、查看</h4><ul>\n<li>测试之前先关闭防火墙</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMS41Mjo4ODQ4L25hY29z\">http://192.168.1.52:8848/nacos</span></p>\n<h2 id=\"Nacos集群配置\"><a href=\"#Nacos集群配置\" class=\"headerlink\" title=\"Nacos集群配置\"></a>Nacos集群配置</h2><ul>\n<li>前提</li>\n</ul>\n<blockquote>\n<p>1、安装  <a href=\"#jdk_install\">jdk</a></p>\n<p>2、安装之前必须 配置  <a href=\"#mysql_install\">mysql5.6.+</a></p>\n<p>3、配置 <a href=\"#nginx_install_1\">nginx</a></p>\n<p>4、配置 <a href=\"#nacos_install_1\">Nacos（单机版-1）</a></p>\n</blockquote>\n<ul>\n<li>懒加载</li>\n</ul>\n<blockquote>\n<p>我们启动nginx之后可能不会立即开始代理，打开日志等一会，没有结果的时候重配一下</p>\n</blockquote>\n<h3 id=\"——1-14\"><a href=\"#——1-14\" class=\"headerlink\" title=\"——1\"></a>——1</h3><p>​\t* 此例中  <code>nginx:1.16</code> 安装教程为： <a href=\"#nacos_install_1\">Nacos（单机版-1）</a></p>\n<h4 id=\"1、修改集群配置文件\"><a href=\"#1、修改集群配置文件\" class=\"headerlink\" title=\"1、修改集群配置文件\"></a>1、修改集群配置文件</h4><p>​\t这里开始正式配置集群，首先我们要更改   <strong>cluter.conf</strong>   这个配置文件，当然我们也需要备份，但是这里它的<strong>原始名称</strong>为：<strong>cluster.conf.example</strong> ，我们需要把它保留同时复制出一个cluster.conf来进行更改</p>\n<pre><code class=\"shell\">cd /usr/local/nacos/conf\n\n# 先备份\ncp cluster.conf.example cluster.conf\n</code></pre>\n<p>修改cluster.conf</p>\n<pre><code class=\"shell\"># 格式： ip地址:端口号\n#\n# Copyright 1999-2018 Alibaba Group Holding Ltd.\n#\n# Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n#it is ip\n#example\n#192.168.16.101:8847\n#192.168.16.102\n#192.168.16.10\n\n#ip:port\n192.168.124.133:3333\n192.168.124.133:4444\n192.168.124.133:5555\n</code></pre>\n<h4 id=\"2、编辑Nacos的启动脚本startup-sh\"><a href=\"#2、编辑Nacos的启动脚本startup-sh\" class=\"headerlink\" title=\"2、编辑Nacos的启动脚本startup.sh\"></a>2、编辑Nacos的启动脚本startup.sh</h4><pre><code class=\"shell\">cd /usr/local/nacos/bin\n\n# 先备份\ncp startup.sh starup.sh.bk\nvim  startup.sh \n</code></pre>\n<pre><code class=\"shell\">#1  在while 的变量中添加 o 并且在case 中添加对应处理\n        o)\n            PORT=$OPTARG;;\n        \n#2  在nohup 和&quot;$JAVA_OPT_EXT_FIX&quot;之前配置这个\n     $JAVA -Dserver.port=$&#123;PORT&#125;  \n \n</code></pre>\n<img data-src=\"/2022/10/15/tools-All/1648643016965.png\" class=\"\" width=\"1648643016965\">\n\n<img data-src=\"/2022/10/15/tools-All/1648643157451.png\" class=\"\" width=\"1648643157451\">\n\n\n\n\n\n<h4 id=\"3、配置nginx\"><a href=\"#3、配置nginx\" class=\"headerlink\" title=\"3、配置nginx\"></a>3、配置nginx</h4><pre><code class=\"shell\">    \n    upstream  cluster&#123;\n    server 192.168.1.52:3333;\n    server 192.168.1.52:4444;\n    server 192.168.1.52:5555;\n    &#125;\n\n    proxy_pass  http://cluter;\n</code></pre>\n<p><strong>图片中 <code>cluster</code>写错了 少了一个<code>s</code> ，其实问题也不大，但是要专业~~</strong></p>\n<img data-src=\"/2022/10/15/tools-All/1648643539716.png\" class=\"\" width=\"1648643539716\">\n\n\n\n<h4 id=\"4、启动Nginx\"><a href=\"#4、启动Nginx\" class=\"headerlink\" title=\"4、启动Nginx\"></a>4、启动Nginx</h4><pre><code class=\"shell\">\n</code></pre>\n<h4 id=\"5、查看测试\"><a href=\"#5、查看测试\" class=\"headerlink\" title=\"5、查看测试\"></a>5、查看测试</h4><p><span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMS41Mi9uYWNvcw==\">http://192.168.1.52:80/nacos</span></p>\n<h2 id=\"OpenSSL安装\"><a href=\"#OpenSSL安装\" class=\"headerlink\" title=\"OpenSSL安装\"></a>OpenSSL安装</h2><h3 id=\"——1-15\"><a href=\"#——1-15\" class=\"headerlink\" title=\"——1\"></a>——1</h3><p>参考链接：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3ZlY3Rvcl9kYXRhL2FydGljbGUvZGV0YWlscy8xMDc1NTc5NDE=\">https://blog.csdn.net/vector_data/article/details/107557941</span></p>\n<h4 id=\"1-安装依赖C语言依赖-1\"><a href=\"#1-安装依赖C语言依赖-1\" class=\"headerlink\" title=\"1.安装依赖C语言依赖\"></a>1.安装依赖C语言依赖</h4><p>​\tredis使用C语言编写，所以需要安装C语言库</p>\n<pre><code class=\"sh\">yum install -y gcc zlib \n</code></pre>\n<p>​\t</p>\n<h4 id=\"2-上传并解压-1\"><a href=\"#2-上传并解压-1\" class=\"headerlink\" title=\"2.上传并解压\"></a>2.上传并解压</h4><p>​\t把 <code>openssl-1.1.1j.tar.gz</code> 上传到&#x2F;usr&#x2F;local&#x2F;tmp中，解压文件</p>\n<pre><code> cd /usr/local/tmp\n\n tar zxf openssl-1.1.1j.tar.gz \n mv openssl-1.1.1j ../openssl\n \n</code></pre>\n<h4 id=\"3-编译并安装-2\"><a href=\"#3-编译并安装-2\" class=\"headerlink\" title=\"3.编译并安装\"></a>3.编译并安装</h4><p>​\t进入解压文件夹</p>\n<pre><code class=\"sh\">  cd /usr/local/openssl\n</code></pre>\n<p>​\t 配置编译 </p>\n<pre><code class=\"sh\">./config\n</code></pre>\n<p>​\t编译安装\t</p>\n<pre><code>make clean &amp;&amp; make install\n</code></pre>\n<p>​\t测试</p>\n<pre><code>openssl version -a\n</code></pre>\n<h2 id=\"Kettle安装\"><a href=\"#Kettle安装\" class=\"headerlink\" title=\"Kettle安装\"></a>Kettle安装</h2><p> <a href=\"#Windows_kettle\">他是java写的，所以跨平台，去看Windows里面的安装方法</a></p>\n<h1 id=\"未完成-！————Linux\"><a href=\"#未完成-！————Linux\" class=\"headerlink\" title=\"未完成 ！————Linux\"></a>未完成 ！————Linux</h1><h1 id=\"PATH——-Windows\"><a href=\"#PATH——-Windows\" class=\"headerlink\" title=\"PATH——-Windows\"></a>PATH——-Windows</h1><h2 id=\"MySQL安装\"><a href=\"#MySQL安装\" class=\"headerlink\" title=\"MySQL安装\"></a>MySQL安装</h2><h3 id=\"【1】MySQL的版本：\"><a href=\"#【1】MySQL的版本：\" class=\"headerlink\" title=\"【1】MySQL的版本：\"></a>【1】MySQL的版本：</h3><p>近期主要历史版本有5.0&#x2F;5.1&#x2F;5.5&#x2F;5.6&#x2F;5.7，目前最新版本是MySQL8。6.0曾经是个内部试验版本，已取消了。</p>\n<p>MySQL8.0的版本历史</p>\n<ol>\n<li>2016-09-12第一个DM(development milestone)版本8.0.0发布</li>\n<li>2018-04-19第一个GA(General Availability)版本开始，8.0.11发布</li>\n<li>2018-07-27 8.0.12GA发布</li>\n<li>2018-10-22 8.0.13GA发布</li>\n<li>2019-01-21 8.0.14GA发布</li>\n<li>2019-02-01 8.0.15GA发布</li>\n<li>最新的版本是8.0.18,2019年10月14日正式发布</li>\n<li>….后续更新</li>\n</ol>\n<h3 id=\"【2】官方下载地址：\"><a href=\"#【2】官方下载地址：\" class=\"headerlink\" title=\"【2】官方下载地址：\"></a>【2】官方下载地址：</h3><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXYubXlzcWwuY29tL2Rvd25sb2Fkcy93aW5kb3dzL2luc3RhbGxlci84LjAuaHRtbA==\">https://dev.mysql.com/downloads/windows/installer/8.0.html</span></p>\n\n\n\n\n\n\n\n<h3 id=\"【3】安装过程：\"><a href=\"#【3】安装过程：\" class=\"headerlink\" title=\"【3】安装过程：\"></a>【3】安装过程：</h3><p><strong>1.双击MySQL安装文件mysql-installer-community-8.0.18.0.msi，出现安装类型选项。</strong></p>\n<ul>\n<li><p>Developer Default：开发者默认</p>\n</li>\n<li><p>Server only：只安装服务器端 </p>\n</li>\n<li><p>Client only：只安装客户端</p>\n</li>\n<li><p>Full：安装全部选项</p>\n</li>\n<li><p>Custom：自定义安装</p>\n</li>\n</ul>\n\n\n\n\n\n<p><strong>2.选择，然后继续：</strong></p>\n\n\n\n\n\n<p><strong>3.进入产品配置向导，配置多个安装细节，点击Next按钮即可。</strong></p>\n\n\n\n\n\n<p><strong>4.高可靠性High Availability，采用默认选项即可。</strong></p>\n<ul>\n<li><p>Standalone MySQL Server&#x2F;Classic MySQL Replication:独立MySQL服务器&#x2F;经典MySQL复制</p>\n</li>\n<li><p>InnoDB Cluster:InnoDB集群</p>\n</li>\n</ul>\n\n\n\n\n\n<p><strong>5.类型和网络 Type and Networking，采用默认选项即可。记住MySQL的监听端口默认是3306。</strong></p>\n\n\n\n\n\n<p><strong>6.身份验证方法Authentication Method，采用默认选项即可。</strong></p>\n<p> <img data-src=\"/tools-All%5C1646193956569.png\" alt=\"1646193956569\"></p>\n<p><strong>7.账户和角色 Accounts and Roles。MySQL管理员账户名称是root，在此处指定root用户的密码。还可以在此处通过Add User按钮添加其他新账户，此处省略该操作。</strong></p>\n\n\n\n\n\n<p><strong>8.Windows服务：Windows Service。</strong></p>\n<ul>\n<li><p>Configure MySQL Server as a Windows Service:给MySQL服务器配置一个服务项。</p>\n</li>\n<li><p>Windows Service Name:服务名称，采用默认名称MySQL80即可。</p>\n</li>\n<li><p>Start the MySQL at System Startup：系统启动时开启MySQL服务</p>\n</li>\n</ul>\n\n\n\n\n\n\n\n\n\n<p><strong>9.Apply Configuration：点击Execute按钮执行开始应用这些配置项。</strong></p>\n<ul>\n<li><p>Writing configuration file: 写配置文件。</p>\n</li>\n<li><p>Updating Windows Firewall rules：更新Windows防火墙规则</p>\n</li>\n<li><p>Adjusting Windows services：调整Windows服务</p>\n</li>\n<li><p>Initializing database：初始化数据库</p>\n</li>\n<li><p>Starting the server： 启动服务器</p>\n</li>\n<li><p>Applying security setting：应用安全设置</p>\n</li>\n<li><p>Updating the Start menu link：更新开始菜单快捷方式链接</p>\n</li>\n</ul>\n\n\n\n\n\n<p><strong>PS：如果配置出错，查看右侧的log，查看对应错误信息。</strong><br><strong>执行完成后，如下图所示。单击Finish完成安装，进入产品配置环节。</strong></p>\n\n\n\n\n\n<p><strong>10.产品配置Product Configuration到此结束：点击Next按钮。</strong></p>\n\n\n\n\n\n<p><strong>11.安装完成 Installation Complete。点击Finish按钮完成安装。</strong></p>\n\n\n\n\n\n\n\n<h3 id=\"【4】MySQL配置、登录\"><a href=\"#【4】MySQL配置、登录\" class=\"headerlink\" title=\"【4】MySQL配置、登录\"></a>【4】MySQL配置、登录</h3><p><strong>【1】登录：</strong><br>访问MySQL服务器对应的命令：mysql.exe ,位置：C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin</p>\n\n\n\n\n\n\n\n<p>（mysql.exe需要带参数执行，所以直接在图形界面下执行该命令会自动结束）</p>\n<p>打开控制命令台：win+r:</p>\n\n\n\n\n\n<p>执行mysql.exe命令的时候出现错误：</p>\n\n\n\n\n\n<p>需要配置环境变量path:</p>\n\n\n\n\n\n<p><strong>注意：控制命令台必须重启才会生效：</strong></p>\n<p><strong>登录的命令：mysql  -hlocalhost -uroot –p</strong></p>\n<ul>\n<li><p>mysql：bin目录下的文件mysql.exe。mysql是MySQL的命令行工具，是一个客户端软件，可以对任何主机的mysql服务（即后台运行的mysqld）发起连接。</p>\n</li>\n<li><p>-h：host主机名。后面跟要访问的数据库服务器的地址；<strong>如果是登录本机，可以省略</strong></p>\n</li>\n<li><p>-u：user 用户名。后面跟登录数据的用户名，第一次安装后以root用户来登录，是MySQL的管理员用户</p>\n</li>\n<li><p>-p:   password 密码。一般不直接输入，而是回车后以保密方式输入。 </p>\n<p><img data-src=\"/tools-All%5C1646194262329.png\" alt=\"1646194262329\"></p>\n</li>\n</ul>\n<p><strong>【2】访问数据库</strong></p>\n<p>显示MySQL中的数据库列表：</p>\n<pre><code class=\"shell\">show databases;\n</code></pre>\n<p> 默认有四个自带的数据库，每个数据库中可以有多个数据库表、视图等对象。</p>\n<p>切换当前数据库的命令：</p>\n<pre><code class=\"shell\">use mysql;\n</code></pre>\n<ul>\n<li><p>MySQL下可以有多个数据库，如果要访问哪个数据库，需要将其置为当前数据库。</p>\n</li>\n<li><p>该命令的作用就是将数据库mysql（默认提供的四个数据库之一的名字）置为当前数据库</p>\n</li>\n</ul>\n<p>显示当前数据库的所有数据库表：</p>\n<pre><code class=\"shell\">show tables;\n</code></pre>\n<p>MySQL 层次：不同项目对应不同的数据库组成 - 每个数据库中有很多表  - 每个表中有很多数据</p>\n<p><strong>【3】退出数据库</strong></p>\n<p>退出数据库可以使用quit或者exit命令完成，也可以用\\q;  完成退出操作</p>\n\n\n\n\n\n\n\n<h3 id=\"【5】卸载\"><a href=\"#【5】卸载\" class=\"headerlink\" title=\"【5】卸载\"></a>【5】卸载</h3><p><strong>1)停止MySQL服务：在命令行模式下执行net stop mysql或者在Windows服务窗口下停止服务</strong></p>\n\n\n\n\n\n<p><strong>2)在控制面板中删除MySQL软件</strong></p>\n\n\n\n\n\n<p><strong>3)删除软件文件夹：直接删除安装文件夹C:\\Program Files\\MySQL，其实此时该文件夹已经被删除或者剩下一个空文件夹。</strong></p>\n<p><strong>4)删除数据文件夹：直接删除文件夹C:\\ProgramData\\MySQL。此步不要忘记，否则会影响MySQL的再次安装。</strong><br><strong>（ProgramData文件夹可能是隐藏的，显示出来即可）</strong><br><strong>（MySQL文件下的内容才是真正的MySQL中数据）</strong></p>\n<p><strong>5)删除path环境变量中关于MySQL安装路径的配置</strong> </p>\n<h2 id=\"Tomcat安装-1\"><a href=\"#Tomcat安装-1\" class=\"headerlink\" title=\"Tomcat安装\"></a>Tomcat安装</h2><p>下载</p>\n<p>下载地址：<span class=\"exturl\" data-url=\"aHR0cDovL3RvbWNhdC5hcGFjaGUub3JnLw==\">http://tomcat.apache.org/</span></p>\n\n\n\n\n\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><p>tomcat由apache开源组织使用java开发的一款web容器,在使用之前需要安装JDK及配置JAVA_HOME.Tomcat是绿色软解，<strong>解压就可使用</strong>。如果之前已经安装了其他tomcat并且还配置了CATALINA_HOME 不要忘记修改CATALINA_HOME指向我们现在使用的这个tomcat</p>\n<h3 id=\"Tomcat启动\"><a href=\"#Tomcat启动\" class=\"headerlink\" title=\"Tomcat启动\"></a>Tomcat启动</h3><p>运行startup.bat文件。</p>\n<p>一定要配置JAVA_HOME   C:\\Program Files\\Java\\jdk1.8.0_161<br>部分电脑需要配置CATALINA_HOME   D:&#x2F;<em><strong>&#x2F;</strong></em>&#x2F;apache-tomcat-9.0.41<br>记住一个习惯:以后我们装任何一个软件路径都应该避免中文,空格和特殊符号,可以使用_</p>\n<h3 id=\"Tomcat关闭\"><a href=\"#Tomcat关闭\" class=\"headerlink\" title=\"Tomcat关闭\"></a>Tomcat关闭</h3><p>  运行shutdown.bat文件或者直接关闭掉启动窗口。</p>\n<h3 id=\"访问Tomcat\"><a href=\"#访问Tomcat\" class=\"headerlink\" title=\"访问Tomcat\"></a>访问Tomcat</h3><p>访问Tomcat的URL格式：<span class=\"exturl\" data-url=\"aHR0cDovL2lwOnBvcnQ=\">http://ip:port</span></p>\n<p>访问本机Tomcat的URL格式：<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgwLw==\">http://localhost:8080</span></p>\n<h2 id=\"Git安装\"><a href=\"#Git安装\" class=\"headerlink\" title=\"Git安装\"></a>Git安装</h2><p>【1】Git官网：<br><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXQtc2NtLmNvbS8=\">https://git-scm.com/</span> </p>\n<p>【2】安装过程：</p>\n<p>一直下一步</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<p>点击Git Bash Here打开Git终端：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<h2 id=\"OpenSSL安装教程\"><a href=\"#OpenSSL安装教程\" class=\"headerlink\" title=\"OpenSSL安装教程\"></a>OpenSSL安装教程</h2><p>openssl官网下载地址：<span class=\"exturl\" data-url=\"aHR0cDovL3NscHJvd2ViLmNvbS9wcm9kdWN0cy9XaW4zMk9wZW5TU0wuaHRtbA==\">http://slproweb.com/products/Win32OpenSSL.html</span></p>\n<h3 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境:\"></a>安装环境:</h3><blockquote>\n<p>windows 10<br>Win64 OpenSSL v1.1.1i</p>\n</blockquote>\n<h3 id=\"一-下载openssl安装版\"><a href=\"#一-下载openssl安装版\" class=\"headerlink\" title=\"一.下载openssl安装版\"></a>一.下载openssl安装版</h3><p>​\t我这里是win10 64位,所以选的中间那个</p>\n<p><img data-src=\"https://tools-all-blog.csdnimg.cn/20201222101342278.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2NTUwOTY0,size_16,color_FFFFFF,t_70#pic_center\" alt=\"按照操作系统选择\"> </p>\n<h3 id=\"二-安装过程\"><a href=\"#二-安装过程\" class=\"headerlink\" title=\"二.安装过程\"></a>二.安装过程</h3><p>​\t也没啥特殊的 ，一直next，只有两点注意：</p>\n<p>1、修改安装地址</p>\n<p>2、最后一步，不要勾选，会掏钱。</p>\n<p> <img data-src=\"https://tools-all-blog.csdnimg.cn/20201222102601218.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2NTUwOTY0,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"> </p>\n<p> <img data-src=\"https://tools-all-blog.csdnimg.cn/20201222102703276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2NTUwOTY0,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"> </p>\n<p> <img data-src=\"https://tools-all-blog.csdnimg.cn/20201222102703268.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2NTUwOTY0,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"> </p>\n<p> <img data-src=\"https://tools-all-blog.csdnimg.cn/20201222102721958.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2NTUwOTY0,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"> </p>\n<img data-src=\"/2022/10/15/tools-All/1650347562395.png\" class=\"\" width=\"1650347562395\">\n\n<h3 id=\"三-配置环境变量\"><a href=\"#三-配置环境变量\" class=\"headerlink\" title=\"三.配置环境变量\"></a>三.配置环境变量</h3><img data-src=\"/2022/10/15/tools-All/1650351119292.png\" class=\"\" width=\"1650351119292\">\n\n <img data-src=\"/2022/10/15/tools-All/1650351138506.png\" class=\"\" width=\"1650351138506\">\n\n\n\n<h3 id=\"四-测试\"><a href=\"#四-测试\" class=\"headerlink\" title=\"四.测试\"></a>四.测试</h3><pre><code class=\"sh\">openssl -version\n</code></pre>\n<img data-src=\"/2022/10/15/tools-All/1650351011263.png\" class=\"\" width=\"1650351011263\">\n\n\n\n\n\n\n\n<h2 id=\"Kafka安装\"><a href=\"#Kafka安装\" class=\"headerlink\" title=\"Kafka安装\"></a>Kafka安装</h2><p>​\tkafka 的安装包其实没有分window 还是 linux, 所以下载的安装包还是之前的安装包，直接解压出来即可；</p>\n<p><img data-src=\"https://pic3.zhimg.com/80/v2-5ea0647a0e4acab3a7c6de90df11fe3e_720w.jpg\" alt=\"img\"></p>\n<p>启动Zookeeper 服务端命令</p>\n<pre><code class=\"text\">./bin\\windows\\zookeeper-server-start.bat  ./config\\zookeeper.properties \n</code></pre>\n<p>这边会报一个奇葩的错误，命令行太长，直接将压缩包解压到根目录或者桌面进行操作</p>\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-0f8d03dbe85bdf6f44e05a20d87bc60b_720w.png\" alt=\"img\"></p>\n<p>启动成功</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-348c2d162934ac0844103a2cfcf2f16c_720w.jpg\" alt=\"img\"></p>\n<p>启动kafka服务端命令</p>\n<pre><code class=\"text\"> ./bin\\windows\\kafka-server-start.bat  ./config\\server.properties\n</code></pre>\n<p>启动成功</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-4f9527f5ed1fb0a09b90cd598b5c09c3_720w.jpg\" alt=\"img\"></p>\n<div name=\"Windows_kettle\">\n\n<h2 id=\"Kettle安装-1\"><a href=\"#Kettle安装-1\" class=\"headerlink\" title=\"Kettle安装\"></a>Kettle安装</h2><p>下载地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzOi8vc291cmNlZm9yZ2UubmV0L3Byb2plY3RzL3BlbnRhaG8vZmlsZXMvRGF0YSUyMEludGVncmF0aW9uLw==\">https://sourceforge.net/project</span></p>\n<p>下载完成解压到任意路径</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-9b34b600471d87b624e1a355af5e1a77_720w.png\" alt=\"img\"></p>\n<p>打开文件夹，找到Spoon.bat，创建桌面快捷方式，打开</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-304e8e08f977c9e1f6c3c1aef07d76ad_720w.png\" alt=\"img\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-5a6b50aa38075f30a80868319b57189a_720w.jpg\" alt=\"img\"></p>\n<p>成功打开，安装完成</p>\n<p>最后还要配置下oracle的驱动</p>\n<p>找到oracle的安装目录搜索关键字：ojdbc</p>\n<p>把ojdbc5.jar文件复制到ETL的lib目录下</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-dd6bd35ae080600c32d3cf75ccc40389_720w.jpg\" alt=\"img\"></p>\n<p>这样就可以在kettle里连接到数据库了</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/tools-All/v2-79043e230a5f8c040c429855c8766b9c_720w.jpg\" alt=\"img\"></p>\n<h2 id=\"redis安装-1\"><a href=\"#redis安装-1\" class=\"headerlink\" title=\"redis安装\"></a>redis安装</h2><p><strong>下载地址：</strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Rwb3JhZG93c2tpL3JlZGlzL3JlbGVhc2Vz\">https://github.com/tporadowski/redis/releases</span></p>\n<img data-src=\"/2022/10/15/tools-All/3B8D633F-14CE-42E3-B174-FCCD48B11FF3.jpg\" class=\"\" title=\"img\">\n\n\n\n<p>打开文件夹，内容如下：</p>\n<p><img data-src=\"https://www.runoob.com/wp-content/uploads/2014/11/C2CEBAA0-30B9-4340-8D23-78F6FEB8CBE2.png%22\" alt=\"img\"></p>\n<p>打开一个 <strong>cmd</strong> 窗口 使用 cd 命令切换目录到 <strong>C:\\redis</strong> 运行：</p>\n<pre><code class=\"sh\">redis-server.exe redis.windows.conf\n</code></pre>\n<p>如果想方便的话，可以把 redis 的路径加到系统的环境变量里，这样就省得再输路径了，后面的那个 redis.windows.conf 可以省略，如果省略，会启用默认的。输入之后，会显示如下界面：</p>\n<img data-src=\"/2022/10/15/tools-All/redis-install1.png\" class=\"\" title=\"Redis 安装\">\n\n\n\n<p>这时候另启一个 cmd 窗口，原来的不要关闭，不然就无法访问服务端了。</p>\n<p>切换到 redis 目录下运行:</p>\n<pre><code>redis-cli.exe -h 127.0.0.1 -p 6379\n</code></pre>\n<h1 id=\"未完成-！————-Windows\"><a href=\"#未完成-！————-Windows\" class=\"headerlink\" title=\"未完成 ！———— Windows\"></a>未完成 ！———— Windows</h1><h1 id=\"———————————————-1\"><a href=\"#———————————————-1\" class=\"headerlink\" title=\"———————————————\"></a>———————————————</h1><h1 id=\"问题-1\"><a href=\"#问题-1\" class=\"headerlink\" title=\"问题\"></a>问题</h1><h2 id=\"0、布置在服务器中的东西，通过URL-无法访问\"><a href=\"#0、布置在服务器中的东西，通过URL-无法访问\" class=\"headerlink\" title=\"0、布置在服务器中的东西，通过URL 无法访问\"></a>0、布置在服务器中的东西，通过URL 无法访问</h2><blockquote>\n<p>​\t1、防火墙问题</p>\n<p>​\t2、端口 释放问题 ，<strong>·我们要手动去配置我们服务器的安全组·</strong></p>\n</blockquote>\n<div name=\"perblem-1\">\n\n<h2 id=\"1、解决：CentOS-7-每次进入要重新加载环境变量\"><a href=\"#1、解决：CentOS-7-每次进入要重新加载环境变量\" class=\"headerlink\" title=\"1、解决：CentOS 7 每次进入要重新加载环境变量\"></a>1、解决：CentOS 7 每次进入要重新加载环境变量</h2><pre><code class=\"shell\">1.进入系统配置文件\nvim ~/.bashrc\n\n2.末尾添加如下代码\nsource /etc/profile\n\n保存即可\n:wq\n</code></pre>\n<h2 id=\"2、端口占用、查看端口\"><a href=\"#2、端口占用、查看端口\" class=\"headerlink\" title=\"2、端口占用、查看端口\"></a>2、端口占用、查看端口</h2><pre><code class=\"shell\">查看是否运行端口   \nnetstat -tln 8080\n\n查看端口属于哪个程序？端口被哪个进程占用(得到PID)\t\nlsof -i :8080  \n\n关闭PID对应的程序            \nkill -9 (PID)\n</code></pre>\n<div name=\"preblem_2\">\n\n<h2 id=\"3、防火墙关闭、开启\"><a href=\"#3、防火墙关闭、开启\" class=\"headerlink\" title=\"3、防火墙关闭、开启\"></a>3、防火墙关闭、开启</h2><pre><code class=\"shell\">关闭防火墙 ，重启失效(Linux系统一重启Linux中的防火墙又会被开起)\nservice firewalld stop\n\n禁用防火墙，永久有效\nsystemctl disable firewalld\nsystemctl disable firewalld.service\n\n启动防火墙 (对禁用的防火墙进行启动)\nsystemctl enable firewalld\n\n防火墙相关命令：\n\n1）查看防火墙状态：\nservice  iptables status或者systemctl status firewalld或者firewall-cmd --state\n\n2）暂时关闭防火墙：\nsystemctl stop firewalld或者service  iptables stop或者systemctl stop firewalld.service\n\n3）永久关闭防火墙：\nsystemctl disable firewalld或者chkconfig iptables off或者systemctl disable firewalld.service\n\n4）重启防火墙：\nsystemctl enable firewalld或者service iptables restart  或者systemctl restart firewalld.service\n\n5)永久关闭后重启：\nchkconfig iptables on\n</code></pre>\n<h2 id=\"4、failure-repodata-x2F-repomd-xml-from-epel-Errno-256-No-more-mirrors-to-try\"><a href=\"#4、failure-repodata-x2F-repomd-xml-from-epel-Errno-256-No-more-mirrors-to-try\" class=\"headerlink\" title=\"4、failure: repodata&#x2F;repomd.xml from epel: [Errno 256] No more mirrors to try.\"></a>4、failure: repodata&#x2F;repomd.xml from epel: [Errno 256] No more mirrors to try.</h2><p><span class=\"exturl\" data-url=\"aHR0cDovL21pcnJvcnMuYWxpeXVuLmNvbS9lcGVsLzUveDg2XzY0L3JlcG9kYXRhL3JlcG9tZC54bWw=\">http://mirrors.aliyun.com/epel/5/x86_64/repodata/repomd.xml</span>: [Errno 14] HTTP Error 404 - Not Found的解决办法：</p>\n<p>​\t一直说那个XML文件不存在，以为是yum源是去读取xml当中的数据然后去下载。确实自己去访问也是404.还以\t为是这阵子开会yum源都搞不能用了怎么。之前我用阿里用的挺好的。</p>\n<p>​\t最简单的办法就是删除 &#x2F;etc&#x2F;yum.repos.d&#x2F; 下所有的文件，重新来。</p>\n<pre><code class=\"shell\">cd /etc/yum.repos.d/\nmkdir repo_bak\nmv *.repo repo_bak/\n#下载缓存文件 版本自己控制\nwget http://mirrors.aliyun.com/repo/Centos-7.repo\nyum clean all\nyum makecache\n</code></pre>\n<div name=\"problem-5\"></div>\n\n<h2 id=\"5、Xshell连接centos7能连上但是连接过程很慢\"><a href=\"#5、Xshell连接centos7能连上但是连接过程很慢\" class=\"headerlink\" title=\"5、Xshell连接centos7能连上但是连接过程很慢\"></a>5、Xshell连接centos7能连上但是连接过程很慢</h2><pre><code class=\"shell\">原因：因为在登录时，需要反向解析dns。\n解决方法：修改linux配置文件，\n\nvim /etc/ssh/sshd_config\n\n将 # UseDNS yes 此处注释去掉\n改为：UseDNS no\n</code></pre>\n<p><a href=\"#Linux_minInstall_4\">跳转到Linux安装_4</a></p>\n<div name=\"problem-6\"></div>\n## 6、Xshell 连接Centos7，root拒绝登录，而其他用户可登陆？———— root用户直接登录\n\n<p><strong>PermitRootLogin</strong>  的值改成  yes  ，并保存 </p>\n<pre><code class=\"shell\">vim /etc/ssh/sshd_config\n</code></pre>\n<p> <img data-src=\"https://tools-all-blog.csdnimg.cn/20210712112157753.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lhbmdfeWFuZ3lhbmc=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"> </p>\n<p> 重启sshd 服务 </p>\n<pre><code class=\"shell\">service sshd restart\n</code></pre>\n<p> 如果上面命令提示文件不存在，可以用下面的命令 </p>\n<pre><code>systemctl restart sshd.service\n</code></pre>\n<p> 如果还不行，直接 重启服务器。。。 </p>\n<pre><code>reboot\n</code></pre>\n<p>意外的是，发现root依然不能登录。最后研究sshd_config的每一行意义，发现坑在这里： </p>\n<p><strong>注：有则看，无则跳</strong></p>\n<p> <img data-src=\"https://tools-all-blog.csdnimg.cn/2021071211252989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lhbmdfeWFuZ3lhbmc=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"> </p>\n<p>文件的最后一行，有一行 ：AllowUsers <span class=\"exturl\" data-url=\"bWFpbHRvOiYjeDc4OyYjeDc4OyYjMTIwOyYjeDQwOyYjeDMxOyYjNTc7JiN4MzI7JiN4MmU7JiN4MzE7JiN4MzY7JiN4Mzg7JiN4MmU7JiM0OTs=\">&#x78;&#x78;&#120;&#x40;&#x31;&#57;&#x32;&#x2e;&#x31;&#x36;&#x38;&#x2e;&#49;</span>.<em>。这是写死的了，即：能远程登录的 用户名、IP 信息。难怪，其他用户一直无法登录。<br>所以，在后面追加：<span class=\"exturl\" data-url=\"bWFpbHRvOiYjMTE0OyYjeDZmOyYjMTExOyYjeDc0OyYjNjQ7JiM0OTsmI3gzOTsmIzUwOyYjNDY7JiM0OTsmIzU0OyYjNTY7JiN4MmU7JiN4MzE7\">&#114;&#x6f;&#111;&#x74;&#64;&#49;&#x39;&#50;&#46;&#49;&#54;&#56;&#x2e;&#x31;</span>.</em><br>修改完的代码为：<span class=\"exturl\" data-url=\"bWFpbHRvOiYjMTIwOyYjeDc4OyYjMTIwOyYjeDQwOyYjeDMxOyYjNTc7JiN4MzI7JiN4MmU7JiM0OTsmI3gzNjsmIzU2OyYjeDJlOyYjNDk7\">&#120;&#x78;&#120;&#x40;&#x31;&#57;&#x32;&#x2e;&#49;&#x36;&#56;&#x2e;&#49;</span>.* <span class=\"exturl\" data-url=\"bWFpbHRvOiYjMTE0OyYjeDZmOyYjeDZmOyYjeDc0OyYjeDQwOyYjeDMxOyYjeDM5OyYjNTA7JiN4MmU7JiN4MzE7JiM1NDsmI3gzODsmI3gyZTsmI3gzMTs=\">&#114;&#x6f;&#x6f;&#x74;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#54;&#x38;&#x2e;&#x31;</span>.*<br>然后再执行重启服务操作，然后发现root可以登录了！搞定！！！</p>\n<blockquote>\n<p>注意：<code>xxx@192.168.1.* root@192.168.1.*</code> 之间要有空格。</p>\n<p>或者直接将此行 代码直接注释掉，也可以。</p>\n</blockquote>\n<p><a href=\"#Linux_minInstall_6\">跳转到Linux安装_最小化安装_6</a></p>\n<div name=\"problem-7\"></div>\n## 7、yum直接安装docker-ce报错找不到安装包\n\n<pre><code class=\"shell\">#更换成阿里云镜像仓库\n\nyum-config-manager --add-repo   http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n</code></pre>\n<p><a href=\"#docker_install_3\">回到Docker安装步骤3</a></p>\n<h2 id=\"8、docker-查看日志\"><a href=\"#8、docker-查看日志\" class=\"headerlink\" title=\"8、docker 查看日志\"></a>8、docker 查看日志</h2><pre><code class=\"shell\"> docker logs [OPTIONS] CONTAINER\n  Options:\n        --details        显示更多的信息\n    -f, --follow         跟踪实时日志\n        --since string   显示自某个timestamp之后的日志，或相对时间，如42m（即42分钟）\n        --tail string    从日志末尾显示多少行日志， 默认是all\n        \n    -t, --timestamps     显示时间戳\n        --until string   显示自某个timestamp之前的日志，或相对时间，如42m（即42分钟）\t\t\n        \n</code></pre>\n<p>​\t查看指定时间后的日志，只显示最后100行：</p>\n<pre><code class=\"shell\">$ docker logs -f -t --since=&quot;2018-02-08&quot; --tail=100 CONTAINER_ID\n</code></pre>\n<p>​\t查看最近30分钟的日志:</p>\n<pre><code class=\"shell\">$ docker logs --since 30m CONTAINER_ID\n</code></pre>\n<p>​\t查看某时间之后的日志：</p>\n<pre><code class=\"shell\">$ docker logs -t --since=&quot;2018-02-08T13:23:37&quot; CONTAINER_ID\n</code></pre>\n<p>​\t查看某时间段日志：</p>\n<pre><code class=\"shell\">$ docker logs -t --since=&quot;2018-02-08T13:23:37&quot; --until &quot;2018-02-09T12:23:37&quot; CONTAINER_ID\n</code></pre>\n<h2 id=\"9-、如何解决error-failed-to-push-some-refs-to-‘https-gitee-com\"><a href=\"#9-、如何解决error-failed-to-push-some-refs-to-‘https-gitee-com\" class=\"headerlink\" title=\"9 、如何解决error: failed to push some refs to ‘https://gitee.com/\"></a>9 、如何解决error: failed to push some refs to ‘<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRlZS5jb20v\">https://gitee.com/</span></h2><p>​\t出现错误的主要原因是gitee(github)中的README.md文件不在本地代码目录中</p>\n<p>​\t此时我们要执行git pull –rebase origin master命令<strong>README.md</strong>拉到本地</p>\n<pre><code class=\"shell\">git pull --rebase origin master\n</code></pre>\n<p>然后执行git push origin master</p>\n<pre><code class=\"shell\">git push origin master\n</code></pre>\n<p>就ok啦！</p>\n<h2 id=\"10-、idea-官网下载插件过慢\"><a href=\"#10-、idea-官网下载插件过慢\" class=\"headerlink\" title=\"10 、idea 官网下载插件过慢\"></a>10 、idea 官网下载插件过慢</h2><p> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1JlYWxfQ1NETl9Vc2VyL2FydGljbGUvZGV0YWlscy8xMTM5NDQ0OTY=\">(29条消息) Intellij IDEA下载插件太慢，怎么办？_Real_csdn_User的博客-CSDN博客_idea下载插件很慢</span> </p>\n<h3 id=\"（1）查询自己的网络服务提供商\"><a href=\"#（1）查询自己的网络服务提供商\" class=\"headerlink\" title=\"（1）查询自己的网络服务提供商\"></a>（1）查询自己的网络服务提供商</h3><p>访问<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaXAxMzguY29tLw==\">iP138查询网</span>，查看自己的网络服务提供商并记下它。比如我访问该网站截图如下：<br><img data-src=\"https://tools-all-blog.csdnimg.cn/20210222191130433.png#pic_center\" alt=\"我的网络服务提供商是移动（为保护隐私，部分内容打码）\"><br>如果你已经知道自己的网络服务提供商就不需要这一步。</p>\n<h3 id=\"（2）查找访问插件网站最快的IP\"><a href=\"#（2）查找访问插件网站最快的IP\" class=\"headerlink\" title=\"（2）查找访问插件网站最快的IP\"></a>（2）查找访问插件网站最快的IP</h3><p>Intellij IDEA的插件主页地址是<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wbHVnaW5zLmpldGJyYWlucy5jb20v\">https://plugins.jetbrains.com</span>。打开<span class=\"exturl\" data-url=\"aHR0cDovL3Rvb2wuY2hpbmF6LmNvbS9zcGVlZHRlc3Qv\">网站测速 - 站长工具</span>，将插件的主页地址填入输入框内，点击查看分析按钮。一段时间后，就可以看到全中国各个地区访问插件主页的速度。点击表头“总耗时”右侧的小按钮，令全国各地访问插件主页的总耗时按增长顺序排列，这样耗时最短、速度最快的行就在最上方。从表格中找到与自己网络服务提供商相同的行，记下对应的IP地址。下面是我测量的访问插件主页的速度的结果：<br><img data-src=\"https://tools-all-blog.csdnimg.cn/20210222193138206.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1JlYWxfQ1NETl9Vc2Vy,size_16,color_FFFFFF,t_70#pic_center\" alt=\"我的网络服务提供商是移动，我记下的IP是54.192.23.52\"></p>\n<h3 id=\"（3）在hosts文件中为plugins-jetbrains-com添加相关条目\"><a href=\"#（3）在hosts文件中为plugins-jetbrains-com添加相关条目\" class=\"headerlink\" title=\"（3）在hosts文件中为plugins.jetbrains.com添加相关条目\"></a>（3）在hosts文件中为plugins.jetbrains.com添加相关条目</h3><p>用文本编辑器打开C:\\Windows\\System32\\drivers\\etc\\hosts文件。在文件最下方添加一行文字：<br>[你记下的IP地址] plugins.jetbrains.com<br>[你记下的IP地址]用你记下的IP地址代替，记住不要带上方括号，而且IP地址和plugins.jetbrains.com之间有空格。例如我在文件中添加的文字是：<br>13.225.160.7 plugins.jetbrains.com<br>注意：编辑hosts文件需要管理员权限。</p>\n<h3 id=\"三、题外话\"><a href=\"#三、题外话\" class=\"headerlink\" title=\"三、题外话\"></a>三、题外话</h3><p>这种方法并不只限于加快下载IDEA插件的速度，只要你知道网络资源的网址，而且该网络资源使用了下载加速服务器，都可以用这种方法。</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h1 id=\"未完成——问题\"><a href=\"#未完成——问题\" class=\"headerlink\" title=\"未完成——问题\"></a>未完成——问题</h1><h1 id=\"未完成\"><a href=\"#未完成\" class=\"headerlink\" title=\"未完成\"></a>未完成</h1>",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/Zookeeper-tool/",
            "url": "http://example.com/2022/10/15/Zookeeper-tool/",
            "title": "Zookeeper",
            "date_published": "2022-10-15T04:52:38.222Z",
            "content_html": "<h3 id=\"Zookeeper-linux安装\"><a href=\"#Zookeeper-linux安装\" class=\"headerlink\" title=\"Zookeeper-linux安装\"></a>Zookeeper-linux安装</h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><h5 id=\"1-Zookeeper简介\"><a href=\"#1-Zookeeper简介\" class=\"headerlink\" title=\"1     Zookeeper简介\"></a>1     Zookeeper简介</h5><p>​\tzookeeper分布式管理软件。常用它做注册中心（依赖zookeeper的发布&#x2F;订阅功能）、配置文件中心、分布式锁配置、集群管理等。</p>\n<p>​\tzookeeper一共就有两个版本。主要使用的是java语言写的。</p>\n<h5 id=\"2-安装\"><a href=\"#2-安装\" class=\"headerlink\" title=\"2     安装\"></a>2     安装</h5><h6 id=\"2-1-上传压缩文件\"><a href=\"#2-1-上传压缩文件\" class=\"headerlink\" title=\"2.1   上传压缩文件\"></a>2.1   上传压缩文件</h6><p>​\t上传到 &#x2F;usr&#x2F;local&#x2F;tmp中</p>\n<h5 id=\"2-2-解压\"><a href=\"#2-2-解压\" class=\"headerlink\" title=\"2.2   解压\"></a>2.2   解压</h5><pre><code> tar zxf apache-zookeeper-3.5.5-bin.tar.gz\n cp -r apache-zookeeper-3.5.5-bin ../zookeeper\n</code></pre>\n<h5 id=\"2-3-新建data目录\"><a href=\"#2-3-新建data目录\" class=\"headerlink\" title=\"2.3   新建data目录\"></a>2.3   新建data目录</h5><p>进入到zookeeper中</p>\n<pre><code> cd /usr/local/zookeeper\n mkdir data\n</code></pre>\n<h5 id=\"2-4-修改配置文件\"><a href=\"#2-4-修改配置文件\" class=\"headerlink\" title=\"2.4   修改配置文件\"></a>2.4   修改配置文件</h5><p>进入conf中</p>\n<pre><code> cd conf\n cp zoo_sample.cfg zoo.cfg\n vim zoo.cfg\n</code></pre>\n<p>修改dataDir为data文件夹路径</p>\n<pre><code>dataDir=/usr/local/zookeeper/data\n</code></pre>\n<h5 id=\"2-5-启动zookeeper\"><a href=\"#2-5-启动zookeeper\" class=\"headerlink\" title=\"2.5   启动zookeeper\"></a>2.5   启动zookeeper</h5><p>进入bin文件夹</p>\n<pre><code> cd /usr/local/zookeeper/bin\n ./zkServer.sh start\n</code></pre>\n<p>通过status查看启动状态。稍微有个等待时间</p>\n<pre><code class=\"shell\">  ./zkServer.sh status\n</code></pre>\n<h4 id=\"——2\"><a href=\"#——2\" class=\"headerlink\" title=\"——2\"></a>——2</h4><p><strong>资料：</strong></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20va2luZ2tvby9wLzg3MzI0NDguaHRtbA==\">https://www.cnblogs.com/kingkoo/p/8732448.html</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2F2ODA4NzQ2NjY/ZnJvbT1zZWFyY2gmYW1wO3NlaWQ9MTYyOTE0NTAyNTIxMTk5OTEwNCZhbXA7c3BtX2lkX2Zyb209MzMzLjMzNy4wLjA=\">https://www.bilibili.com/video/av80874666?from=search&amp;seid=1629145025211999104&amp;spm_id_from=333.337.0.0</span></p>\n<h5 id=\"1-Zookeeper简介-1\"><a href=\"#1-Zookeeper简介-1\" class=\"headerlink\" title=\"1     Zookeeper简介\"></a>1     Zookeeper简介</h5><p>​\tzookeeper分布式管理软件。常用它做注册中心（依赖zookeeper的发布&#x2F;订阅功能）、配置文件中心、分布式锁配置、集群管理等。</p>\n<p>​\tzookeeper一共就有两个版本。主要使用的是java语言写的。</p>\n<h5 id=\"2-安装-1\"><a href=\"#2-安装-1\" class=\"headerlink\" title=\"2     安装\"></a>2     安装</h5><h6 id=\"2-1-拉取镜像\"><a href=\"#2-1-拉取镜像\" class=\"headerlink\" title=\"2.1   拉取镜像\"></a>2.1   拉取镜像</h6><ul>\n<li><p>自定义zookeeper目录</p>\n<pre><code class=\"shell\">mkdir /root/zookeeper\n</code></pre>\n</li>\n</ul>\n<p>#mkdir &#x2F;root&#x2F;zookeeper&#x2F;data #原因参照上面 -在docker中data其实也不用在宿主机行自己生成(目前如此)</p>\n<p>仓库官网查看版本或者用命令直接查</p>\n<pre><code>docker search zookeeper\n</code></pre>\n<p>拉取特定版本（3.5）</p>\n<pre><code>docker pull zookeeper:3.5\n\n```\n</code></pre>\n<h6 id=\"2-2-创建并启动容器\"><a href=\"#2-2-创建并启动容器\" class=\"headerlink\" title=\"2.2 创建并启动容器\"></a>2.2 创建并启动容器</h6><p>​\t<strong>注：就目前而且 好像直接在docker中使用 zookeeper 不需要过多的配置，直接用命令创建吧，下面的解释先不看，具体原因后面补充</strong></p>\n<p>命令：</p>\n<pre><code class=\"shell\">docker run -d --name zookeeper -v /root/zookeeper/data:/data -p 2181:2181 --restart always zookeeper:3.5\n</code></pre>\n<ul>\n<li><code>--restart always</code>：始终重启</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYWdlb3ZiL3AvMTUzMjg3OTYuaHRtbA==\">https://www.cnblogs.com/ageovb/p/15328796.html</span></li>\n</ul>\n<p><strong>解释</strong></p>\n<ul>\n<li><p>1、这里为啥只挂载了 data 目录–》因为当我们 没有直接的安装压缩包时，我们的就没有配置文件，所以我们直接生成，容器中就回自动生成conf文件，其中就有我们需要的 一系列配置文件，我们第一次创建的时候就可以如此，我们在进<strong>行配置文件的修改完成</strong>后，要将所有配置文件放到我们  bash 目录中的 conf 文件中去。</p>\n</li>\n<li><p>2、第一次进入容器</p>\n<ul>\n<li><p>在bash目录下进入bin 目录然后输入开启客户端命令</p>\n<pre><code class=\"shell\">./zkCli.sh\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p>3、第二次进入容器</p>\n<pre><code class=\"shell\">docker exec -it zookeeper /bin/bash  -p    端口号\n或\ndocker exec -it zookeeper zkCli.sh\n</code></pre>\n</li>\n</ul>\n<p><strong>只看到这就可*，容器创建成功就可以直接用了，还没有出现问题。有待补充</strong></p>\n<h6 id=\"2-3-修改配置文件\"><a href=\"#2-3-修改配置文件\" class=\"headerlink\" title=\"2.3   修改配置文件\"></a>2.3   修改配置文件</h6><ul>\n<li>配置文件来源<ul>\n<li>1、可以去我们的资料中直接解压出<strong>conf</strong>目录粘贴到我们的 zookeeper 目录中去</li>\n<li>2、可以直接进行第 3 步，完事之后直接会在容器中生成。找到conf文件，修改其中的 zoo.cfg文件，</li>\n</ul>\n</li>\n</ul>\n<p>进入容器后，找到conf中的 **zoo.cfg文件，接下来就是修改 <strong>dataDir</strong> 路径为容器中的 data文件目录。</p>\n<p>前提是要下载 vim ，因为容器中没有，命令是：</p>\n<pre><code>apt-get update\n\napt-get install -y vim\n\ncd conf\n### 没有zoo.cfg 就先拷贝 zoo_sample.cfg 两个其实是一个文件，内容相同\n###cp zoo_sample.cfg zoo.cfg\nvim zoo.cfg\n</code></pre>\n<p>修改dataDir为data文件夹路径</p>\n<pre><code>dataDir=/usr/local/zookeeper/data\n</code></pre>\n<h3 id=\"Zookeeper集群搭建\"><a href=\"#Zookeeper集群搭建\" class=\"headerlink\" title=\"Zookeeper集群搭建\"></a>Zookeeper集群搭建</h3><h4 id=\"——1-1\"><a href=\"#——1-1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><p>1.上传压缩包到&#x2F;usr&#x2F;local&#x2F;tmp 下 并解压。</p>\n<p>2.在 &#x2F;usr&#x2F;local下新建文件夹 zookeeper</p>\n<pre><code>### mkdir /usr/local/zookeeper\n</code></pre>\n<p>3.把解压的所有文件复制到zookeeper下， 并命名为zk1</p>\n<pre><code>### cp -r /usr/local/temp/zookeeper-3.4.8 /usr/local/zookeeper/zk1\n</code></pre>\n<p>4.在zk1下新建文件夹 data</p>\n<p>5.在data下新建文件 myid, 里面写上 1</p>\n<pre><code>### vim myid\n</code></pre>\n<p>6.进入到zk1&#x2F;conf 下 把 zoo_sample.cfg 复制一份叫做 zoo.cfg</p>\n<p>7.编辑 zoo.cfg 内容，设置 dataDIR为 data文件夹， 并在文件最下面添加下面内容</p>\n<pre><code>server.1=192.168.93.10:2688:3888\nserver.2=192.168.93.10:2689:3889\nserver.3=192.168.93.10:2690:3890\n</code></pre>\n<p> 7.1 server.1中的1是myid的内容</p>\n<p> 7.2 2688 2689 2690 是 zookeeper内部端口</p>\n<p> 7.3 3888 3889 3890 是 leader端口</p>\n<p>8.把zk1复制两份，分部叫做 zk2  zk3  并修改 myid 的值为 2，3 修改zoo.cfg中 dataDIR和clientPort</p>\n<p>9.启动三个zookeeper</p>\n<pre><code>### ./zkServer.sh start\n</code></pre>\n<p>10.查看状态</p>\n<pre><code>### ./zkServer.sh status\n</code></pre>\n<h4 id=\"——2-1\"><a href=\"#——2-1\" class=\"headerlink\" title=\"——2\"></a>——2</h4><p><strong>1、准备</strong>docker-compose.yml<strong>文件</strong></p>\n<pre><code class=\"shell\">version: &#39;2&#39;\nservices:\n  zoo1:\n    image: zookeeper:3.5\n    restart: always\n    container_name: zoo1\n    ports:\n      - &quot;2182:2181&quot;\n    environment:\n      ZOO_MY_ID: 1\n      ZOO_SERVERS: server.1=0.0.0.0:2688:3888 server.2=zoo2:2689:3888 server.3=zoo3:2690:3888\n\n  zoo2:\n    image: zookeeper:3.5\n    restart: always\n    container_name: zoo2\n    ports:\n      - &quot;2183:2181&quot;\n    environment:\n      ZOO_MY_ID: 2\n      ZOO_SERVERS: server.1=zoo1:2688:3888 server.2=0.0.0.0:2689:3888 server.3=zoo3:2690:3888\n\n  zoo3:\n    image: zookeeper:3.5\n    restart: always\n    container_name: zoo3\n    ports:\n      - &quot;2184:2181&quot;\n    environment:\n      ZOO_MY_ID: 3\n      ZOO_SERVERS: server.1=zoo1:2688:3888 server.2=zoo2:2689:3888 server.3=0.0.0.0:2690:3888\n\n</code></pre>\n<p><strong>2、创建镜像</strong></p>\n<ul>\n<li>要在创建的docker-compose.yml文件中使用命令</li>\n</ul>\n<pre><code class=\"shell\">docker-compose up -d\n</code></pre>\n<p><strong>3、进入容器</strong></p>\n<pre><code class=\"shell\">docker exec -it zoo1 /bin/bash\n\n###查看zoo1 的状态\ncd bin\n./zkServer.sh status\n</code></pre>\n<ul>\n<li>如果出现，以下情况：</li>\n</ul>\n<pre><code>ZooKeeper JMX enabled by default\nUsing config: /conf/zoo.cfg\nClient port not found in static config file. Looking in dynamic config file.\ngrep: : No such file or directory\nClient port not found in the server configs\nClient port not found. Looking for secureClientPort in the static config.\nUnable to find either secure or unsecure client port in any configs. Terminating.\n</code></pre>\n<p>​\t通过阅读我们知道他在conf中的zoo.cfg文件中缺少 **clientPort **我们只需要自行添加即可</p>\n<pre><code class=\"shell\">###修改之前我们先装一下 vim\napt-get update\n\napt-get install -y vim \n\n###修改zoo.fcg文件\nvim /conf/zoo.fcg\n\nclientPort=2181\n</code></pre>\n<ul>\n<li><p>完事之后<strong>重启</strong>zoo1</p>\n  <img data-src=\"/2022/10/15/Zookeeper-tool/1645780920291.png\" class=\"\" width=\"1645780920291\">\n\n<p>  成功！！</p>\n</li>\n</ul>\n<h6 id=\"4、查看所有zookeeper的状态\"><a href=\"#4、查看所有zookeeper的状态\" class=\"headerlink\" title=\"4、查看所有zookeeper的状态\"></a>4、查看所有zookeeper的状态</h6><pre><code class=\"shell\">docker exec -it zoo3 bash ./bin/zkServer.sh status\n</code></pre>\n<h6 id=\"5、进去客户端\"><a href=\"#5、进去客户端\" class=\"headerlink\" title=\"5、进去客户端\"></a>5、进去客户端</h6><pre><code class=\"shell\">docker exec -it zoo3 zkCli.sh\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/XShell-tool/",
            "url": "http://example.com/2022/10/15/XShell-tool/",
            "title": "XShell",
            "date_published": "2022-10-15T04:52:38.220Z",
            "content_html": "<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h2 id=\"配色\"><a href=\"#配色\" class=\"headerlink\" title=\"配色\"></a>配色</h2><blockquote>\n<p>所有资源都在网盘和仓库里面</p>\n</blockquote>\n<h4 id=\"zk1\"><a href=\"#zk1\" class=\"headerlink\" title=\"zk1\"></a>zk1</h4><img data-src=\"/2022/10/15/XShell-tool/image-20220801173236598.png\" class=\"\">\n\n\n<h4 id=\"Solarized-Dark\"><a href=\"#Solarized-Dark\" class=\"headerlink\" title=\"Solarized Dark\"></a>Solarized Dark</h4><img data-src=\"/2022/10/15/XShell-tool/image-20220801173040826.png\" class=\"\">\n\n\n<h4 id=\"SolarizedDarkModify\"><a href=\"#SolarizedDarkModify\" class=\"headerlink\" title=\"SolarizedDarkModify\"></a>SolarizedDarkModify</h4><img data-src=\"/2022/10/15/XShell-tool/image-20220801173129171.png\" class=\"\">\n\n\n\n\n<h4 id=\"isayme\"><a href=\"#isayme\" class=\"headerlink\" title=\"isayme\"></a>isayme</h4><img data-src=\"/2022/10/15/XShell-tool/image-20220801172922893.png\" class=\"\">\n\n\n\n\n<h4 id=\"ubuntu\"><a href=\"#ubuntu\" class=\"headerlink\" title=\"ubuntu\"></a>ubuntu</h4><img data-src=\"/2022/10/15/XShell-tool/image-20220801173207482.png\" class=\"\">\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/Tomcat-tool/",
            "url": "http://example.com/2022/10/15/Tomcat-tool/",
            "title": "Tomcat",
            "date_published": "2022-10-15T04:52:38.217Z",
            "content_html": "<h3 id=\"Tomcat安装\"><a href=\"#Tomcat安装\" class=\"headerlink\" title=\"Tomcat安装\"></a>Tomcat安装</h3><p>下载</p>\n<p>下载地址：<span class=\"exturl\" data-url=\"aHR0cDovL3RvbWNhdC5hcGFjaGUub3JnLw==\">http://tomcat.apache.org/</span></p>\n<img data-src=\"/2022/10/15/Tomcat-tool/1646193444708.png\" class=\"\">\n\n\n<h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><p>tomcat由apache开源组织使用java开发的一款web容器,在使用之前需要安装JDK及配置JAVA_HOME.Tomcat是绿色软解，<strong>解压就可使用</strong>。如果之前已经安装了其他tomcat并且还配置了CATALINA_HOME 不要忘记修改CATALINA_HOME指向我们现在使用的这个tomcat</p>\n<h4 id=\"Tomcat启动\"><a href=\"#Tomcat启动\" class=\"headerlink\" title=\"Tomcat启动\"></a>Tomcat启动</h4><p>运行startup.bat文件。</p>\n<p>一定要配置JAVA_HOME   C:\\Program Files\\Java\\jdk1.8.0_161<br>部分电脑需要配置CATALINA_HOME   D:&#x2F;<em><strong>&#x2F;</strong></em>&#x2F;apache-tomcat-9.0.41<br>记住一个习惯:以后我们装任何一个软件路径都应该避免中文,空格和特殊符号,可以使用_</p>\n<h4 id=\"Tomcat关闭\"><a href=\"#Tomcat关闭\" class=\"headerlink\" title=\"Tomcat关闭\"></a>Tomcat关闭</h4><p>  运行shutdown.bat文件或者直接关闭掉启动窗口。</p>\n<h4 id=\"访问Tomcat\"><a href=\"#访问Tomcat\" class=\"headerlink\" title=\"访问Tomcat\"></a>访问Tomcat</h4><p>访问Tomcat的URL格式：<span class=\"exturl\" data-url=\"aHR0cDovL2lwOnBvcnQ=\">http://ip:port</span></p>\n<p>访问本机Tomcat的URL格式：<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgwLw==\">http://localhost:8080</span></p>\n<h3 id=\"Tomcat安装-1\"><a href=\"#Tomcat安装-1\" class=\"headerlink\" title=\"Tomcat安装\"></a>Tomcat安装</h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><h5 id=\"1、下载Linux对应版本的Tomcat\"><a href=\"#1、下载Linux对应版本的Tomcat\" class=\"headerlink\" title=\"1、下载Linux对应版本的Tomcat\"></a>1、下载Linux对应版本的Tomcat</h5><p>​\t  下载压缩文件     apache-tomcat-7.0.68.tar.gz         </p>\n<h5 id=\"2、解压压缩文件\"><a href=\"#2、解压压缩文件\" class=\"headerlink\" title=\"2、解压压缩文件\"></a>2、解压压缩文件</h5><pre><code class=\"shell\">#tar -xvf   apache-tomcat-7.0.68.tar.gz -C /usr/local/  #解压到的路径 \n</code></pre>\n<h5 id=\"3、配置环境变量\"><a href=\"#3、配置环境变量\" class=\"headerlink\" title=\"3、配置环境变量\"></a>3、配置环境变量</h5><pre><code class=\"shell\">vim  /etc/profile\n\n###自己定义为位置\nexport CATALINA_BASE=/usr/local/apache-tomcat-7.0.68\nexport PATH=$CATALINA_BASE/bin:$PATH\n</code></pre>\n<h5 id=\"4、使用环境变量生效\"><a href=\"#4、使用环境变量生效\" class=\"headerlink\" title=\"4、使用环境变量生效\"></a>4、使用环境变量生效</h5><pre><code class=\"shell\">source /etc/profile\n</code></pre>\n<h5 id=\"5、启动Tomcat服务\"><a href=\"#5、启动Tomcat服务\" class=\"headerlink\" title=\"5、启动Tomcat服务\"></a>5、启动Tomcat服务</h5><ul>\n<li>注：要是远程访问你关注防火墙问题</li>\n</ul>\n<p>启动Tomcat服务：</p>\n<pre><code class=\"shell\">./startup.sh\n</code></pre>\n<p>启动Tomcat并输出启动日志 :</p>\n<pre><code class=\"shell\">  ./startup.sh &amp; tail -f  ../logs/catalina.out\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/Solr-tool/",
            "url": "http://example.com/2022/10/15/Solr-tool/",
            "title": "Solr",
            "date_published": "2022-10-15T04:52:38.211Z",
            "content_html": "<h3 id=\"Solr安装\"><a href=\"#Solr安装\" class=\"headerlink\" title=\"Solr安装\"></a>Solr安装</h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><p>​\tSolr是使用Java编写，所以必选先安装JDK。</p>\n<h5 id=\"1-上传并解压\"><a href=\"#1-上传并解压\" class=\"headerlink\" title=\"1.上传并解压\"></a>1.上传并解压</h5><p>​\t上传压缩包solr-7.7.2.tgz到&#x2F;usr&#x2F;local&#x2F;tmp中。</p>\n<p>​\t解压</p>\n<pre><code> cd /usr/local/tmp\n tar zxf solr-7.7.2.tgz -C /usr/local/tmp\n</code></pre>\n<h5 id=\"2-复制到-x2F-usr-x2F-local中\"><a href=\"#2-复制到-x2F-usr-x2F-local中\" class=\"headerlink\" title=\"2.复制到&#x2F;usr&#x2F;local中\"></a>2.复制到&#x2F;usr&#x2F;local中</h5><pre><code> cp -r solr-7.7.2 ../solr\n</code></pre>\n<h5 id=\"3-修改启动参数\"><a href=\"#3-修改启动参数\" class=\"headerlink\" title=\"3.修改启动参数\"></a>3.修改启动参数</h5><p>​\t修改启动参数，否则启动时报警告。提示设置SOLR_ULIMIT_CHECKS&#x3D;false</p>\n<pre><code> cd /usr/local/solr/bin\n vim solr.in.sh\n</code></pre>\n<img data-src=\"/2022/10/15/Solr-tool/solr-02.jpg\" class=\"\">\n\n\n<h5 id=\"4-启动Solr\"><a href=\"#4-启动Solr\" class=\"headerlink\" title=\"4.启动Solr\"></a>4.启动Solr</h5><p>​\tSolr内嵌Jetty，直接启动即可。监听8983端口。</p>\n<p>​\tsolr默认不推荐root账户启动，如果是root账户启动需要添加-force参数。</p>\n<pre><code>### ./solr start -force\n</code></pre>\n<h5 id=\"5、可视化管理界面\"><a href=\"#5、可视化管理界面\" class=\"headerlink\" title=\"5、可视化管理界面\"></a>5、可视化管理界面</h5><p>​\t在关闭防火墙的前提下，可以在windows的浏览器中访问Solr。</p>\n<p>​\t输入: <span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguOTMuMTA6ODk4My8=\">http://192.168.93.10:8983</span> 就可以访问Solr的可视化管理界面。</p>\n<p>​\t左侧有5个菜单。分别是：</p>\n<p>​\t（1）Dashboard：面板显示Solr的总体信息。</p>\n<p>​\t（2）Logging：日志</p>\n<p>​\t（3）Core Admin：Solr的核心。类似于数据的Database</p>\n<p>​\t（4）Java Perperties：所有Java相关属性。</p>\n<p>​\t（5）Thread Dump：线程相关信息。</p>\n<p>​\t（6）如果有Core，将显示在此处。</p>\n<img data-src=\"/2022/10/15/Solr-tool/solr-03.JPG\" class=\"\">\n\n\n<h5 id=\"6、新建核心\"><a href=\"#6、新建核心\" class=\"headerlink\" title=\"6、新建核心\"></a>6、新建核心</h5><p>​\tSolr安装完成后默认是没有核心的。需要手动配置。</p>\n<p>​\t需要在solr&#x2F;server&#x2F;solr下新建文件夹，并给定配置文件，否则无法建立。</p>\n<img data-src=\"/2022/10/15/Solr-tool/solr-04.JPG\" class=\"\">\n\n\n<h6 id=\"6-1-新建目录\"><a href=\"#6-1-新建目录\" class=\"headerlink\" title=\"6.1.新建目录\"></a>6.1.新建目录</h6><p>​\t在&#x2F;usr&#x2F;local&#x2F;solr&#x2F;server&#x2F;solr中新建自定义名称目录。此处示例名称为testcore。</p>\n<pre><code> cd /usr/local/solr/server/solr\n mkdir testcore\n</code></pre>\n<h6 id=\"6-2-复制配置文件\"><a href=\"#6-2-复制配置文件\" class=\"headerlink\" title=\"6.2.复制配置文件\"></a>6.2.复制配置文件</h6><p>​\t在configsets里面包含了_default和sample_techproducts_configs。里面都是配置文件示例。_default属于默认配置，较纯净。sample_techproducts_configs是带有了一些配置示例。</p>\n<pre><code>### cp -r configsets/_default/conf/ testcore/\n</code></pre>\n<h6 id=\"6-3-填写Core信息\"><a href=\"#6-3-填写Core信息\" class=\"headerlink\" title=\"6.3.填写Core信息\"></a>6.3.填写Core信息</h6><p>​\t在可视化管理界面中Core Admin中编写信息后点击Add Core后，短暂延迟后testcore就会创建成功。schema处不用更改。</p>\n<img data-src=\"/2022/10/15/Solr-tool/solr-05.JPG\" class=\"\">\n\n\n<h6 id=\"6-4-出现testcore\"><a href=\"#6-4-出现testcore\" class=\"headerlink\" title=\"6.4.出现testcore\"></a>6.4.出现testcore</h6><p>​\t在客户端管理界面中，选择新建的Core后，就可以按照自己项目的需求进行操作了。</p>\n<img data-src=\"/2022/10/15/Solr-tool/solr-06.jpg\" class=\"\">\n\n\n<h5 id=\"7、分词Analysis\"><a href=\"#7、分词Analysis\" class=\"headerlink\" title=\"7、分词Analysis\"></a>7、分词Analysis</h5><p>​\t在Solr可视化管理界面中，Core的管理菜单项中都会有Analysis。表示根据Scheme.xml(managed-schema)中配置要求进行解析。</p>\n<p>​\t对英文解析就比较简单了，只要按照空格把英文语句拆分成英文单词即可。</p>\n<img data-src=\"/2022/10/15/Solr-tool/solr-07.jpg\" class=\"\">\n\n\n<p>​\t但是如果条件是中文时，把一句话按照字进行拆分就不是很合理了。正确的方式是按照合理的词组进行拆分。<img data-src=\"/2022/10/15/Solr-tool/solr-08.jpg\" class=\"\"></p>\n<h6 id=\"7-1-配置步骤\"><a href=\"#7-1-配置步骤\" class=\"headerlink\" title=\"7.1.配置步骤\"></a>7.1.配置步骤</h6><p>​\t上传ik-analyzer.jar到webapps中。</p>\n<p>​\t去<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zZWFyY2gubWF2ZW4ub3JnL3NlYXJjaD9xPWNvbS5naXRodWIubWFnZXNlJUU0JUI4JThCJUU4JUJEJUJEJUU1JUFGJUI5JUU1JUJBJTk0JUU3JTg5JTg4JUU2JTlDJUFDJUU3JTlBJTg0aWstYW5hbHl6ZXIlRTMlODAlODIlRTUlOEYlQUYlRTQlQkIlQTUlRTUlOUMlQTglRTglQjUlODQlRTYlOTYlOTklRTQlQjglQUQlRTclOUIlQjQlRTYlOEUlQTUlRTglOEUlQjclRTUlOEYlOTYlRTMlODAlODI=\">https://search.maven.org/search?q=com.github.magese下载对应版本的ik-analyzer。可以在资料中直接获取。</span></p>\n<h6 id=\"7-1-1上传jar到指定目录\"><a href=\"#7-1-1上传jar到指定目录\" class=\"headerlink\" title=\"7.1.1上传jar到指定目录\"></a>7.1.1上传jar到指定目录</h6><p>​\t上传ik-analyzer-7.7.0.jar到</p>\n<p>​\t&#x2F;usr&#x2F;local&#x2F;solr&#x2F;server&#x2F;solr-webapp&#x2F;webapp&#x2F;WEB-INF&#x2F;lib目录中</p>\n<h6 id=\"7-1-2修改配置文件\"><a href=\"#7-1-2修改配置文件\" class=\"headerlink\" title=\"7.1.2修改配置文件\"></a>7.1.2修改配置文件</h6><p>​\t修改&#x2F;usr&#x2F;local&#x2F;solr&#x2F;server&#x2F;solr&#x2F;testcore&#x2F;conf&#x2F;managed-schema</p>\n<pre><code>### vim /usr/local/solr/server/solr/testcore/conf/managed-schema\n</code></pre>\n<p>​\t添加下面内容。</p>\n<p>​\t排版：Esc 退出编辑状态下：gg&#x3D;G</p>\n<pre><code>&lt;field name=&quot;myfield&quot; type=&quot;text_ik&quot; indexed=&quot;true&quot; stored=&quot;true&quot; /&gt;\n    &lt;fieldType name=&quot;text_ik&quot; class=&quot;solr.TextField&quot;&gt;\n            &lt;analyzer type=&quot;index&quot;&gt;\n                    &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;false&quot; conf=&quot;ik.conf&quot;/&gt;\n                    &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n            &lt;/analyzer&gt;\n            &lt;analyzer type=&quot;query&quot;&gt;\n                    &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;true&quot; conf=&quot;ik.conf&quot;/&gt;\n                    &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n            &lt;/analyzer&gt;\n    &lt;/fieldType&gt;\n</code></pre>\n<h6 id=\"7-1-3重启\"><a href=\"#7-1-3重启\" class=\"headerlink\" title=\"7.1.3重启\"></a>7.1.3重启</h6><pre><code>### cd /usr/local/solr/bin\n### ./solr stop -all\n### ./solr start -force\n</code></pre>\n<h6 id=\"7-1-4验证\"><a href=\"#7-1-4验证\" class=\"headerlink\" title=\"7.1.4验证\"></a>7.1.4验证</h6><p>​\t可以在可视化管理界面中找到myfield属性进行验证。</p>\n<img data-src=\"/2022/10/15/Solr-tool/solr-09.jpg\" class=\"\">\n\n\n<h6 id=\"7-2-managed-schema配置说明\"><a href=\"#7-2-managed-schema配置说明\" class=\"headerlink\" title=\"7.2.managed-schema配置说明\"></a>7.2.managed-schema配置说明</h6><h6 id=\"7-2-1-lt-fieldType-x2F-gt\"><a href=\"#7-2-1-lt-fieldType-x2F-gt\" class=\"headerlink\" title=\"7.2.1&lt; fieldType&#x2F;&gt;\"></a>7.2.1&lt; fieldType&#x2F;&gt;</h6><p>​\t表示定义一个属性类型。在Solr中属性类型都是自定义的。在上面配置中name&#x3D;”text_ik”为自定义类型。当某个属性取值为text_ik时IK Analyzer才能生效。</p>\n<h6 id=\"7-2-2-lt-field-x2F-gt\"><a href=\"#7-2-2-lt-field-x2F-gt\" class=\"headerlink\" title=\"7.2.2&lt; field&#x2F;&gt;\"></a>7.2.2&lt; field&#x2F;&gt;</h6><p>​\t表示向Document中添加一个属性。</p>\n<p>​\t常用属性：</p>\n<p>​\t\tname: 属性名</p>\n<p>​\t\ttype:属性类型。所有类型都是solr使用<fieldType>配置的</p>\n<p>​\t\tindexed: 是否建立索引</p>\n<p>​\t\tstored: solr是否把该属性值响应给搜索用户。</p>\n<p>​\t\trequired：该属性是否是必须的。默认id是必须的。</p>\n<p>​\t\tmultiValued：如果为true，表示该属性为复合属性，此属性中包含了多个其他的属性。常用在多个列作为搜索条件时，把这些列定义定义成一个新的复合属性，通过搜索一个复合属性就可以实现搜索多个列。当设置为true时与&lt; copyField source&#x3D;”” dest&#x3D;””&#x2F;&gt;结合使用</p>\n<h6 id=\"7-2-3-lt-uniqueKey-gt\"><a href=\"#7-2-3-lt-uniqueKey-gt\" class=\"headerlink\" title=\"7.2.3&lt; uniqueKey&gt;\"></a>7.2.3&lt; uniqueKey&gt;</h6><p>​\t唯一主键，Solr中默认定义id属性为唯一主键。ID的值是不允许重复的。</p>\n<h6 id=\"7-2-4-lt-dynamicField-gt\"><a href=\"#7-2-4-lt-dynamicField-gt\" class=\"headerlink\" title=\"7.2.4&lt; dynamicField&gt;\"></a>7.2.4&lt; dynamicField&gt;</h6><p>​\t名称中允许*进行通配。代表满足特定名称要求的一组属性。</p>\n<pre><code> msb_java    \n</code></pre>\n<p>​\tmsb_bigdata</p>\n<p>​\tmsb_UI</p>\n<p>​        msb_*</p>\n<h5 id=\"8、Dataimport\"><a href=\"#8、Dataimport\" class=\"headerlink\" title=\"8、Dataimport\"></a>8、Dataimport</h5><p>​\t可以使用Solr自带的Dataimport功能把数据库中数据快速导入到solr中.</p>\n<p>​\t<strong>必须保证managed-schema和数据库中表的列对应。，添加配置</strong></p>\n<h6 id=\"8-1-修改配置文件\"><a href=\"#8-1-修改配置文件\" class=\"headerlink\" title=\"8.1.修改配置文件\"></a>8.1.修改配置文件</h6><p>​\t修改solrconfig.xml，添加下面内容</p>\n<pre><code> &lt;!-- 配置数据导入的处理器 --&gt;\n  &lt;requestHandler name=&quot;/dataimport&quot; class=&quot;org.apache.solr.handler.dataimport.DataImportHandler&quot;&gt;\n    &lt;lst name=&quot;defaults&quot;&gt;\n      &lt;!--  加载data-config.xml  --&gt;\n      &lt;str name=&quot;config&quot;&gt;data-config.xml&lt;/str&gt;\n     &lt;/lst&gt;\n  &lt;/requestHandler&gt;\n</code></pre>\n<h6 id=\"8-2-新建data-config-xml\"><a href=\"#8-2-新建data-config-xml\" class=\"headerlink\" title=\"8.2.新建data-config.xml\"></a>8.2.新建data-config.xml</h6><p>​\t和solrconfig.xml同一目录下新建data-config.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;dataConfig&gt;\n        &lt;dataSource type=&quot;JdbcDataSource&quot;   \n                driver=&quot;com.mysql.jdbc.Driver&quot;   \n                url=&quot;jdbc:mysql://192.168.1.135:3306/mytest&quot;   \n                user=&quot;root&quot;   \n                password=&quot;root&quot;/&gt;\n        &lt;document&gt;\n            &lt;entity name=&quot;product&quot; query=&quot;SELECT id,name,price from t_product&quot;&gt;\n                &lt;!-- \n                 实现数据库的列和索引库的字段的映射\n                 column 指定数据库的列表\n                 name  指定索引库的字段名字，必须和schema.xml中定义的一样\n                 --&gt;\n                 &lt;field column=&quot;id&quot; name=&quot;id&quot;/&gt;\n                 &lt;field column=&quot;name&quot; name=&quot;name&quot;/&gt;\n                 &lt;field column=&quot;price&quot; name=&quot;price&quot;/&gt;\n            &lt;/entity&gt;\n         &lt;/document&gt;\n&lt;/dataConfig&gt;\n</code></pre>\n<h6 id=\"8-3-添加jar\"><a href=\"#8-3-添加jar\" class=\"headerlink\" title=\"8.3.添加jar\"></a>8.3.添加jar</h6><p>​\t向solr-webapp中添加<strong>三个jar</strong>。在<strong>dist中两个还有一个数据库驱动。（自己去maven-repository里面找一个 mysql-connector-java ）</strong></p>\n<img data-src=\"/2022/10/15/Solr-tool/solr-10.jpg\" class=\"\">\n\n\n<h6 id=\"8-4-操作\"><a href=\"#8-4-操作\" class=\"headerlink\" title=\"8.4.操作\"></a>8.4.操作</h6><p>​\t重启solr后，在可视化管理页面中进行数据导入。</p>\n<p>​\t注意：</p>\n<p>​\t点击导入按钮后，要记得点击刷新按钮。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/redis-tool/",
            "url": "http://example.com/2022/10/15/redis-tool/",
            "title": "redis",
            "date_published": "2022-10-15T04:52:38.205Z",
            "content_html": "<h3 id=\"redis安装\"><a href=\"#redis安装\" class=\"headerlink\" title=\"redis安装\"></a>redis安装</h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><h5 id=\"1-安装依赖C语言依赖\"><a href=\"#1-安装依赖C语言依赖\" class=\"headerlink\" title=\"1.安装依赖C语言依赖\"></a>1.安装依赖C语言依赖</h5><p>​\tredis使用C语言编写，所以需要安装C语言库</p>\n<pre><code> yum install -y gcc-c++ automake autoconf libtool make tcl \n</code></pre>\n<p>​\t</p>\n<h5 id=\"2-上传并解压\"><a href=\"#2-上传并解压\" class=\"headerlink\" title=\"2.上传并解压\"></a>2.上传并解压</h5><p>​\t把redis-5.0.5.tar.gz上传到&#x2F;usr&#x2F;local&#x2F;tmp中，解压文件</p>\n<pre><code> cd /usr/local/tmp\n\n tar zxf redis-5.0.5.tar.gz\n</code></pre>\n<h5 id=\"3-编译并安装\"><a href=\"#3-编译并安装\" class=\"headerlink\" title=\"3.编译并安装\"></a>3.编译并安装</h5><p>​\t进入解压文件夹</p>\n<pre><code>  cd /usr/local/tmp/redis-5.0.5/\n</code></pre>\n<p>​\t编译</p>\n<pre><code> make\n</code></pre>\n<p>​\t安装\t</p>\n<pre><code> make install PREFIX=/usr/local/redis\n</code></pre>\n<h5 id=\"4-开启守护进程\"><a href=\"#4-开启守护进程\" class=\"headerlink\" title=\"4.开启守护进程\"></a>4.开启守护进程</h5><p>​\t复制cd &#x2F;usr&#x2F;local&#x2F;tmp&#x2F;redis-5.0.5&#x2F;中redis.conf配置文件\t</p>\n<pre><code> cp redis.conf /usr/local/redis/bin/\n</code></pre>\n<p> <strong>修改配置文件</strong>\t</p>\n<pre><code> cd /usr/local/redis/bin/\n\n vim redis.conf\n</code></pre>\n<p>​\t把daemonize的值由no修改为yes</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/Redis-01.jpg\"></p>\n<h5 id=\"5-修改外部访问\"><a href=\"#5-修改外部访问\" class=\"headerlink\" title=\"5.修改外部访问\"></a>5.修改外部访问</h5><p>​\t在redis5中需要修改配置文件redis.conf允许外部访问。需要修改两处。</p>\n<p>​\t注释掉下面</p>\n<p>​\tbind 127.0.0.1</p>\n<pre><code> bind 127.0.0.1\n</code></pre>\n<p>​\tprotected-mode yes 改成 no</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/Redis-02.jpg\"></p>\n<h5 id=\"6-启动并测试\"><a href=\"#6-启动并测试\" class=\"headerlink\" title=\"6.启动并测试\"></a>6.启动并测试</h5><p>​\t启动redis</p>\n<pre><code class=\"shell\">./redis-server redis.conf\n</code></pre>\n<p>​\t重启redis</p>\n<pre><code>./redis-cli shutdown\n./redis-server redis.conf\n</code></pre>\n<p>​\t启动客户端工具</p>\n<p>​\t在redis5中客户端工具对命令会有提供功能。</p>\n<pre><code class=\"shell\">./redis-cli \n</code></pre>\n<h4 id=\"——2\"><a href=\"#——2\" class=\"headerlink\" title=\"——2\"></a>——2</h4><h5 id=\"1、拉取镜像文件\"><a href=\"#1、拉取镜像文件\" class=\"headerlink\" title=\"1、拉取镜像文件\"></a>1、拉取镜像文件</h5><pre><code class=\"shell\">docker pull redis[:(版本号)]\n</code></pre>\n<h5 id=\"2、去gitee库中下载redis配置文件（docker不自带配置文件）【也可不进行此步骤】\"><a href=\"#2、去gitee库中下载redis配置文件（docker不自带配置文件）【也可不进行此步骤】\" class=\"headerlink\" title=\"2、去gitee库中下载redis配置文件（docker不自带配置文件）【也可不进行此步骤】\"></a>2、去gitee库中下载redis配置文件（docker不自带配置文件）【也可不进行此步骤】</h5><p><strong>建议看完，先别操作，再看三，看完三之后再决定如何操作</strong></p>\n<p>然后按照文章内容进行，忽略下载。</p>\n<p>文章地址： <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamI1MS5uZXQvYXJ0aWNsZS8yMDMyNzQuaHRt\">https://www.jb51.net/article/203274.htm</span> </p>\n<p>、</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/1645177895314.png\" alt=\"1645177895314\"></p>\n<p> <strong>docker 镜像中没有redis.conf文件，要自己配置</strong> </p>\n<pre><code class=\"undefined\">git pull --rebase https://gitee.com/zjj3366/mydemo.git master\n</code></pre>\n<h5 id=\"3、创建一个redis-服务容器\"><a href=\"#3、创建一个redis-服务容器\" class=\"headerlink\" title=\"3、创建一个redis 服务容器\"></a>3、创建一个redis 服务容器</h5><p><strong>第二步进行了的</strong></p>\n<pre><code class=\"shell\">docker run -p 6379:6379 \\\n--name myredis  \\\n-v /usr/local/docker/redis.conf:/etc/redis/redis.conf   \\\n-v /usr/local/docker/data:/data  \\\n-d redis  \\\nredis-server  /etc/redis/redis.conf  \\\n--appendonly yes\n</code></pre>\n<p><strong>第二步没有进行的</strong></p>\n<pre><code class=\"shell\">docker run -p 6379:6379  \\\n--name myredis  \\\n-v /root/myredis/data:/data \\\n-v /root/myredis/conf/redis.conf:/etc/redis/redis.conf  \\\n-d redis:4.0  \\\nredis-server /etc/redis/redis.conf  \\\n--appendonly yes\n</code></pre>\n<p><strong>区别：</strong></p>\n<p>​\t其实也没有什么区别，只是映射的文件不同，也可以将第二步的文件直接创建到第二种创建服务容器的配置文件地址中去，这样也可使用第二个创建方式。</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/1645177877202.png\" alt=\"1645177877202\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/1645177918077.png\" alt=\"1645177918077\"></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/RabbitMQ-tool/",
            "url": "http://example.com/2022/10/15/RabbitMQ-tool/",
            "title": "RabbitMQ",
            "date_published": "2022-10-15T04:52:38.201Z",
            "content_html": "<h3 id=\"RabbitMQ安装\"><a href=\"#RabbitMQ安装\" class=\"headerlink\" title=\"RabbitMQ安装\"></a>RabbitMQ<strong>安装</strong></h3><h4 id=\"1-上传并解压\"><a href=\"#1-上传并解压\" class=\"headerlink\" title=\"1 上传并解压\"></a>1 <strong>上传并解压</strong></h4><p>​\t上传rabbitmq-server-generic-unix-3.7.18.tar.xz到&#x2F;usr&#x2F;loca&#x2F;tmp中</p>\n<pre><code>  cd /usr/local/tmp\n  \n  tar xf rabbitmq-server-generic-unix-3.7.18.tar.xz -C /usr/local/tmp\n</code></pre>\n<h4 id=\"2-复制到local下\"><a href=\"#2-复制到local下\" class=\"headerlink\" title=\"2 复制到local下\"></a>2 <strong>复制到local下</strong></h4><p>​\t复制解压文件到&#x2F;usr&#x2F;local下，命名为rabbitmq</p>\n<pre><code>  cp -r rabbitmq_server-3.7.18 /usr/local/rabbitmq\n</code></pre>\n<h4 id=\"3-配置环境变量\"><a href=\"#3-配置环境变量\" class=\"headerlink\" title=\"3 配置环境变量\"></a>3 <strong>配置环境变量</strong></h4><pre><code>  vim /etc/profile\n</code></pre>\n<p>​\t在文件中添加 </p>\n<pre><code>export PATH=$PATH:/usr/local/rabbitmq/sbin\n</code></pre>\n<p>​\t解析文件</p>\n<pre><code> source /etc/profile\n</code></pre>\n<h4 id=\"4-开启web管理插件\"><a href=\"#4-开启web管理插件\" class=\"headerlink\" title=\"4 开启web管理插件\"></a>4 <strong>开启web管理插件</strong></h4><p>​\t进入rabbitmq&#x2F;sbin目录</p>\n<pre><code> cd /usr/local/rabbitmq/sbin\n</code></pre>\n<pre><code> 查看插件列表\n</code></pre>\n<pre><code>  ./rabbitmq-plugins list\n</code></pre>\n<pre><code> 生效管理插件\n</code></pre>\n<pre><code>  ./rabbitmq-plugins enable rabbitmq_management\n</code></pre>\n<h4 id=\"5-后台运行\"><a href=\"#5-后台运行\" class=\"headerlink\" title=\"5 后台运行\"></a>5 <strong>后台运行</strong></h4><p>​\t启动rabbitmq。</p>\n<pre><code>  ./rabbitmq-server -detached\n</code></pre>\n<p>​\t停止命令，如果无法停止，使用kill -9 进程号进行关闭</p>\n<pre><code> ./rabbitmqctl stop_app\n</code></pre>\n<h4 id=\"6-查看web管理界面\"><a href=\"#6-查看web管理界面\" class=\"headerlink\" title=\"6 查看web管理界面\"></a>6 <strong>查看web管理界面</strong></h4><p>​\t默认可以在安装rabbitmq的电脑上通过用户名：guest密码guest进行访问web管理界面</p>\n<p>​\t端口号：15672（放行端口，或关闭防火墙）</p>\n<p>​\t在虚拟机浏览器中输入：</p>\n<p>​\t<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDoxNTY3Mi8=\">http://localhost:15672</span></p>\n<h3 id=\"RabbitMq账户管理\"><a href=\"#RabbitMq账户管理\" class=\"headerlink\" title=\"* RabbitMq账户管理\"></a>* RabbitMq账户管理</h3><h4 id=\"1-创建账户\"><a href=\"#1-创建账户\" class=\"headerlink\" title=\"1 创建账户\"></a>1 <strong>创建账户</strong></h4><p>​\t语法：.&#x2F;rabbitmqctl add_user username password</p>\n<pre><code> cd /usr/local/rabbitmq/sbin\n \n ./rabbitmqctl add_user mashibing mashibing\n</code></pre>\n<h4 id=\"2-给用户授予管理员角色\"><a href=\"#2-给用户授予管理员角色\" class=\"headerlink\" title=\"2 给用户授予管理员角色\"></a>2 <strong>给用户授予管理员角色</strong></h4><p>​\t其中smallming为新建用户的用户名</p>\n<pre><code> ./rabbitmqctl set_user_tags mashibing administrator\n</code></pre>\n<h4 id=\"3-给用户授权\"><a href=\"#3-给用户授权\" class=\"headerlink\" title=\"3 给用户授权\"></a>3 <strong>给用户授权</strong></h4><p>​\t“&#x2F;” 表示虚拟机</p>\n<p>​\tmashibing 表示用户名</p>\n<p>​\t“.<em>“ “.</em>“ “.*” 表示完整权限</p>\n<pre><code> ./rabbitmqctl set_permissions -p &quot;/&quot; mashibing &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;\n</code></pre>\n<h4 id=\"4-登录\"><a href=\"#4-登录\" class=\"headerlink\" title=\"4 登录\"></a>4 <strong>登录</strong></h4><p>​\t使用新建账户和密码在windows中访问rabbitmq并登录 </p>\n<p>​\t在浏览器地址栏输入：</p>\n<p>​\t<span class=\"exturl\" data-url=\"aHR0cDovL2lwOjE1NjcyLw==\">http://ip:15672/</span></p>\n<pre><code> 用户名：mashibing\n</code></pre>\n<p>​\t密码：mashibing</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/python-tool/",
            "url": "http://example.com/2022/10/15/python-tool/",
            "title": "python",
            "date_published": "2022-10-15T04:52:38.198Z",
            "content_html": "<h3 id=\"Python升级\"><a href=\"#Python升级\" class=\"headerlink\" title=\"Python升级\"></a>Python升级</h3><h4 id=\"一、查看当前python版本\"><a href=\"#一、查看当前python版本\" class=\"headerlink\" title=\"一、查看当前python版本\"></a>一、<strong>查看当前python版本</strong></h4><pre><code>#[root@ansible ~]# python -V\nPython 2.7.5\n</code></pre>\n<h4 id=\"二、下载新的python包并安装\"><a href=\"#二、下载新的python包并安装\" class=\"headerlink\" title=\"二、下载新的python包并安装\"></a>二、<strong>下载新的python包并安装</strong></h4><p>​\t进入python官网（<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucHl0aG9uLm9yZyks6YCJ5oup6ZyA6KaB55qE54mI5pysLuatpOWkhOaIkemAieaLqeW9k+WJjeacgOaWsOeJiOacrHB5dGhvbjMuNi4xLw==\">https://www.python.org），选择需要的版本。此处我选择当前最新版本Python3.6.1</span></p>\n<pre><code>yum install gcc gcc-c++ -y\n\nwget https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tar.xz\n\ntar xvf Python-3.7.3.tar.xz \n\ncd Python-3.7.3/\n\n ./configure\n \nmake\n\nmake install\n</code></pre>\n<h4 id=\"三、验证\"><a href=\"#三、验证\" class=\"headerlink\" title=\"三、验证\"></a>三、<strong>验证</strong></h4><pre><code>#python -V     #一个是旧版本，一个是新版本\nPython 2.7.5\n### python3 -V\nPython 3.7.3\n</code></pre>\n<h4 id=\"四、设置3-X为默认版本\"><a href=\"#四、设置3-X为默认版本\" class=\"headerlink\" title=\"四、设置3.X为默认版本\"></a>四、<strong>设置3.X为默认版本</strong></h4><p>​\t查看 Python 的路径，在 &#x2F;usr&#x2F;bin 下面。可以看到 python 链接的是 python 2.7，所以，执行 python 就相当于执行 python 2.7。</p>\n<pre><code>#[root@ansible ~]# ls -al /usr/bin | grep python\n-rwxr-xr-x.   1 root root       11232 Dec  2  2016 abrt-action-analyze-python\nlrwxrwxrwx.   1 root root           7 May 26  2017 python -&gt; python2\nlrwxrwxrwx.   1 root root           9 May 26  2017 python2 -&gt; python2.7\n-rwxr-xr-x.   1 root root        7136 Nov  6  2016 python2.7\n</code></pre>\n<p>将原来 python 的软链接重命名：</p>\n<pre><code>  mv /usr/bin/python /usr/bin/python.bak\n</code></pre>\n<p>将 python 链接至 python3：</p>\n<pre><code>  ln -s /usr/local/bin/python3 /usr/bin/python\n</code></pre>\n<h4 id=\"五、配置yum\"><a href=\"#五、配置yum\" class=\"headerlink\" title=\"五、配置yum\"></a>五、<strong>配置yum</strong></h4><p>​\t升级 Python 之后，由于将默认的 python 指向了 python3，yum 不能正常使用，需要编辑 yum 的配置文件，此时：</p>\n<pre><code>#[root@ansible-admin Python-3.7.3]# yum list\n  File &quot;/usr/bin/yum&quot;, line 30\n    except KeyboardInterrupt, e:\n\nSyntaxError: invalid syntax\n</code></pre>\n<p>​\t修改&#x2F;usr&#x2F;bin&#x2F;yum和&#x2F;usr&#x2F;libexec&#x2F;urlgrabber-ext-down，将 #!&#x2F;usr&#x2F;bin&#x2F;python 改为 #!&#x2F;usr&#x2F;bin&#x2F;python2.7，保存退出即可。</p>\n<blockquote>\n<p>vim &#x2F;usr&#x2F;bin&#x2F;yum</p>\n<p>vim &#x2F;usr&#x2F;libexec&#x2F;urlgrabber-ext-down</p>\n</blockquote>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/OpenSSL-tool/",
            "url": "http://example.com/2022/10/15/OpenSSL-tool/",
            "title": "OpenSSL",
            "date_published": "2022-10-15T04:52:38.193Z",
            "content_html": "<h3 id=\"OpenSSL安装教程（Windows）\"><a href=\"#OpenSSL安装教程（Windows）\" class=\"headerlink\" title=\"OpenSSL安装教程（Windows）\"></a>OpenSSL安装教程（Windows）</h3><p>openssl官网下载地址：<span class=\"exturl\" data-url=\"aHR0cDovL3NscHJvd2ViLmNvbS9wcm9kdWN0cy9XaW4zMk9wZW5TU0wuaHRtbA==\">http://slproweb.com/products/Win32OpenSSL.html</span></p>\n<h4 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境:\"></a>安装环境:</h4><blockquote>\n<p>windows 10<br>Win64 OpenSSL v1.1.1i</p>\n</blockquote>\n<h4 id=\"一-下载openssl安装版\"><a href=\"#一-下载openssl安装版\" class=\"headerlink\" title=\"一.下载openssl安装版\"></a>一.下载openssl安装版</h4><p>​\t我这里是win10 64位,所以选的中间那个</p>\n<img data-src=\"/2022/10/15/OpenSSL-tool/20201222101342278.png\" class=\"\" title=\"按照操作系统选择\"> \n\n\n\n<h4 id=\"二-安装过程\"><a href=\"#二-安装过程\" class=\"headerlink\" title=\"二.安装过程\"></a>二.安装过程</h4><p>​\t也没啥特殊的 ，一直next，只有两点注意：</p>\n<p>1、修改安装地址</p>\n<p>2、最后一步，不要勾选，会掏钱。</p>\n <img data-src=\"/2022/10/15/OpenSSL-tool/20201222102601218.png\" class=\"\" title=\"在这里插入图片描述\"> \n\n <img data-src=\"/2022/10/15/OpenSSL-tool/20201222102703276.png\" class=\"\" title=\"在这里插入图片描述\"> \n\n <img data-src=\"/2022/10/15/OpenSSL-tool/20201222102703268.png\" class=\"\" title=\"在这里插入图片描述\"> \n\n <img data-src=\"/2022/10/15/OpenSSL-tool/20201222102721958.png\" class=\"\" title=\"在这里插入图片描述\"> \n\n<img data-src=\"/2022/10/15/OpenSSL-tool/1650347562395.png\" class=\"\">\n\n\n<h4 id=\"三-配置环境变量\"><a href=\"#三-配置环境变量\" class=\"headerlink\" title=\"三.配置环境变量\"></a>三.配置环境变量</h4><img data-src=\"/2022/10/15/OpenSSL-tool/1650351119292.png\" class=\"\">\n\n\n <img data-src=\"/2022/10/15/OpenSSL-tool/1650351138506.png\" class=\"\" width=\"1650351138506\">\n\n\n\n<h4 id=\"四-测试\"><a href=\"#四-测试\" class=\"headerlink\" title=\"四.测试\"></a>四.测试</h4><pre><code class=\"sh\">openssl -version\n</code></pre>\n<img data-src=\"/2022/10/15/OpenSSL-tool/1650351011263.png\" class=\"\">\n\n\n\n\n<h3 id=\"OpenSSL安装（Linux）\"><a href=\"#OpenSSL安装（Linux）\" class=\"headerlink\" title=\"OpenSSL安装（Linux）\"></a>OpenSSL安装（Linux）</h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><p>参考链接：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3ZlY3Rvcl9kYXRhL2FydGljbGUvZGV0YWlscy8xMDc1NTc5NDE=\">https://blog.csdn.net/vector_data/article/details/107557941</span></p>\n<h5 id=\"1-安装依赖C语言依赖\"><a href=\"#1-安装依赖C语言依赖\" class=\"headerlink\" title=\"1.安装依赖C语言依赖\"></a>1.安装依赖C语言依赖</h5><p>​\tredis使用C语言编写，所以需要安装C语言库</p>\n<pre><code class=\"sh\">yum install -y gcc zlib \n</code></pre>\n<p>​\t</p>\n<h5 id=\"2-上传并解压\"><a href=\"#2-上传并解压\" class=\"headerlink\" title=\"2.上传并解压\"></a>2.上传并解压</h5><p>​\t把 <code>openssl-1.1.1j.tar.gz</code> 上传到&#x2F;usr&#x2F;local&#x2F;tmp中，解压文件</p>\n<pre><code> cd /usr/local/tmp\n\n tar zxf openssl-1.1.1j.tar.gz \n mv openssl-1.1.1j ../openssl\n \n</code></pre>\n<h5 id=\"3-编译并安装\"><a href=\"#3-编译并安装\" class=\"headerlink\" title=\"3.编译并安装\"></a>3.编译并安装</h5><p>​\t进入解压文件夹</p>\n<pre><code class=\"sh\">  cd /usr/local/openssl\n</code></pre>\n<p>​\t 配置编译 </p>\n<pre><code class=\"sh\">./config\n</code></pre>\n<p>​\t编译安装\t</p>\n<pre><code>make clean &amp;&amp; make install\n</code></pre>\n<p>​\t测试</p>\n<pre><code>openssl version -a\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/Nginx-tool/",
            "url": "http://example.com/2022/10/15/Nginx-tool/",
            "title": "Nginx",
            "date_published": "2022-10-15T04:52:38.188Z",
            "content_html": "<h3 id=\"nginx安装\"><a href=\"#nginx安装\" class=\"headerlink\" title=\"nginx安装\"></a>nginx安装</h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><h5 id=\"安装：yum\"><a href=\"#安装：yum\" class=\"headerlink\" title=\"安装：yum\"></a>安装：yum</h5><pre><code class=\"sh\"> yum install yum-utils\n</code></pre>\n<h5 id=\"切换目录：\"><a href=\"#切换目录：\" class=\"headerlink\" title=\"切换目录：\"></a>切换目录：</h5><pre><code class=\"sh\">cd /etc/yum.repos.d/\n</code></pre>\n<h5 id=\"创建文件：\"><a href=\"#创建文件：\" class=\"headerlink\" title=\"创建文件：\"></a>创建文件：</h5><pre><code class=\"sh\">vim nginx.repo\n</code></pre>\n<p><em>修改文件内容：</em></p>\n<pre><code class=\"sh\">[nginx-stable]\n\nname=nginx stable repo\n\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\n\ngpgcheck=1\n\nenabled=1\n\ngpgkey=https://nginx.org/keys/nginx_signing.key\n\nmodule_hotfixes=true\n\n[nginx-mainline]\n\nname=nginx mainline repo\n\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\n\ngpgcheck=1\n\nenabled=0\n\ngpgkey=https://nginx.org/keys/nginx_signing.key\n\nmodule_hotfixes=true\n</code></pre>\n<h5 id=\"Nginx的安装：\"><a href=\"#Nginx的安装：\" class=\"headerlink\" title=\"Nginx的安装：\"></a>Nginx的安装：</h5><pre><code class=\"sh\">yum install nginx\n</code></pre>\n<p>安装完成：我们的版本：nginx.x86_64 1:1.20.2-1.el7.ngx</p>\n<div name=\"nginx_install_2\">\n\n<h4 id=\"——2\"><a href=\"#——2\" class=\"headerlink\" title=\"——2\"></a>——2</h4><h5 id=\"1、拉取镜像\"><a href=\"#1、拉取镜像\" class=\"headerlink\" title=\"1、拉取镜像\"></a>1、拉取镜像</h5><pre><code class=\"shell\">docker pull nginx:1.16.1\n</code></pre>\n<h5 id=\"2、创建挂载数据卷\"><a href=\"#2、创建挂载数据卷\" class=\"headerlink\" title=\"2、创建挂载数据卷\"></a>2、创建挂载数据卷</h5><pre><code class=\"shell\">mkdir -p /root/nginx/conf\nvim /root/nginx/conf/nginx.conf\n</code></pre>\n<p><code>nginx.conf内容：</code></p>\n<pre><code class=\"shell\">user  root;\nworker_processes  1;\n \nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\n \n \nevents &#123;\n    worker_connections  1024;\n&#125;\n \n \nhttp &#123;\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n \n    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;\n                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;\n                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;\n \n    access_log  /var/log/nginx/access.log  main;\n \n    sendfile        on;\n#    #tcp_nopush     on;\n \n    keepalive_timeout  65;\n \n#    #gzip  on;\n    \n    \n    server &#123;\n        listen       80;\n        server_name  localhost;\n\n#    \t#charset koi8-r;\n#    \t#access_log  /var/log/nginx/host.access.log  main;\n\n        location / &#123;\n            root   /usr/share/nginx/html;\n            index  index.html index.htm;\n        &#125;\n\n#    \t#error_page  404              /404.html;\n\n#    \t# redirect server error pages to the static page /50x.html\n\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html &#123;\n            root   /usr/share/nginx/html;\n        &#125;\n   \n    &#125;\n&#125;\n\n</code></pre>\n<h5 id=\"3、创建容器\"><a href=\"#3、创建容器\" class=\"headerlink\" title=\"3、创建容器\"></a>3、创建容器</h5><pre><code class=\"shell\">### 注意ip一定要与检测ip相同\ndocker run \\\n-p 80:80 \\\n--name nginx  \\\n-v /root/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \\\n-d nginx:1.16.1 \n</code></pre>\n<h5 id=\"4、查看\"><a href=\"#4、查看\" class=\"headerlink\" title=\"4、查看\"></a>4、查看</h5><pre><code class=\"shell\">docker ps \n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/Nacos-tool/",
            "url": "http://example.com/2022/10/15/Nacos-tool/",
            "title": "Nacos",
            "date_published": "2022-10-15T04:52:38.178Z",
            "content_html": "<h3 id=\"Nacos安装\"><a href=\"#Nacos安装\" class=\"headerlink\" title=\"Nacos安装\"></a>Nacos安装</h3><p><strong>注：</strong></p>\n<ul>\n<li><p>安装之前必须 配置  <a href=\"#jdk_install\">jdk</a></p>\n</li>\n<li><p>安装之前必须 配置  <a href=\"#mysql_install\">mysql5.6.+</a></p>\n</li>\n</ul>\n<div name=\"nacos_install_1\">\n\n<h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><h5 id=\"1、准备安装包\"><a href=\"#1、准备安装包\" class=\"headerlink\" title=\"1、准备安装包\"></a>1、准备安装包</h5><p>官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FsaWJhYmEvbmFjb3MvcmVsZWFzZXM=\">https://github.com/alibaba/nacos/releases</span></p>\n<p>本篇我们选择version：2.0.3</p>\n<h5 id=\"2、上传并解压\"><a href=\"#2、上传并解压\" class=\"headerlink\" title=\"2、上传并解压\"></a>2、上传并解压</h5><pre><code class=\"shell\">tar -zxvf nacos-server-2.0.3 .tar.gz -C /usr/local/\n</code></pre>\n<h5 id=\"3、修改配置\"><a href=\"#3、修改配置\" class=\"headerlink\" title=\"3、修改配置\"></a>3、修改配置</h5><blockquote>\n<p>1、使用nacos-mysql.sql</p>\n<p>​\t\t为我们储存数据建立数据库、表</p>\n<p>2、<code>application.properties里面修改数据储存位置为mysql</code></p>\n</blockquote>\n<pre><code class=\"shell\">cd /usr/local/nacos/conf\n</code></pre>\n<pre><code class=\"sql\">-- 1 建立数据库\ncreate  database nacos_config;\nuse nacos_config;\n\nCREATE TABLE `config_info` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(255) DEFAULT NULL,\n  `content` longtext NOT NULL COMMENT &#39;content&#39;,\n  `md5` varchar(32) DEFAULT NULL COMMENT &#39;md5&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  `src_user` text COMMENT &#39;source user&#39;,\n  `src_ip` varchar(50) DEFAULT NULL COMMENT &#39;source ip&#39;,\n  `app_name` varchar(128) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;租户字段&#39;,\n  `c_desc` varchar(256) DEFAULT NULL,\n  `c_use` varchar(64) DEFAULT NULL,\n  `effect` varchar(64) DEFAULT NULL,\n  `type` varchar(64) DEFAULT NULL,\n  `c_schema` text,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;config_info&#39;;\n\n\nCREATE TABLE `config_info_aggr` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(255) NOT NULL COMMENT &#39;group_id&#39;,\n  `datum_id` varchar(255) NOT NULL COMMENT &#39;datum_id&#39;,\n  `content` longtext NOT NULL COMMENT &#39;内容&#39;,\n  `gmt_modified` datetime NOT NULL COMMENT &#39;修改时间&#39;,\n  `app_name` varchar(128) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;租户字段&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;增加租户字段&#39;;\n\n\n\nCREATE TABLE `config_info_beta` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(128) NOT NULL COMMENT &#39;group_id&#39;,\n  `app_name` varchar(128) DEFAULT NULL COMMENT &#39;app_name&#39;,\n  `content` longtext NOT NULL COMMENT &#39;content&#39;,\n  `beta_ips` varchar(1024) DEFAULT NULL COMMENT &#39;betaIps&#39;,\n  `md5` varchar(32) DEFAULT NULL COMMENT &#39;md5&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  `src_user` text COMMENT &#39;source user&#39;,\n  `src_ip` varchar(50) DEFAULT NULL COMMENT &#39;source ip&#39;,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;租户字段&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;config_info_beta&#39;;\n\n\nCREATE TABLE `config_info_tag` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(128) NOT NULL COMMENT &#39;group_id&#39;,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;tenant_id&#39;,\n  `tag_id` varchar(128) NOT NULL COMMENT &#39;tag_id&#39;,\n  `app_name` varchar(128) DEFAULT NULL COMMENT &#39;app_name&#39;,\n  `content` longtext NOT NULL COMMENT &#39;content&#39;,\n  `md5` varchar(32) DEFAULT NULL COMMENT &#39;md5&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  `src_user` text COMMENT &#39;source user&#39;,\n  `src_ip` varchar(50) DEFAULT NULL COMMENT &#39;source ip&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;config_info_tag&#39;;\n\n\nCREATE TABLE `config_tags_relation` (\n  `id` bigint(20) NOT NULL COMMENT &#39;id&#39;,\n  `tag_name` varchar(128) NOT NULL COMMENT &#39;tag_name&#39;,\n  `tag_type` varchar(64) DEFAULT NULL COMMENT &#39;tag_type&#39;,\n  `data_id` varchar(255) NOT NULL COMMENT &#39;data_id&#39;,\n  `group_id` varchar(128) NOT NULL COMMENT &#39;group_id&#39;,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;tenant_id&#39;,\n  `nid` bigint(20) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`nid`),\n  UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),\n  KEY `idx_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;config_tag_relation&#39;;\n\n\nCREATE TABLE `group_capacity` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#39;主键ID&#39;,\n  `group_id` varchar(128) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;Group ID，空字符表示整个集群&#39;,\n  `quota` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;配额，0表示使用默认值&#39;,\n  `usage` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;使用量&#39;,\n  `max_size` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;单个配置大小上限，单位为字节，0表示使用默认值&#39;,\n  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;聚合子配置最大个数，，0表示使用默认值&#39;,\n  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#39;,\n  `max_history_count` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;最大变更历史数量&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_group_id` (`group_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;集群、各Group容量信息表&#39;;\n\n\nCREATE TABLE `his_config_info` (\n  `id` bigint(64) unsigned NOT NULL,\n  `nid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `data_id` varchar(255) NOT NULL,\n  `group_id` varchar(128) NOT NULL,\n  `app_name` varchar(128) DEFAULT NULL COMMENT &#39;app_name&#39;,\n  `content` longtext NOT NULL,\n  `md5` varchar(32) DEFAULT NULL,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `src_user` text,\n  `src_ip` varchar(50) DEFAULT NULL,\n  `op_type` char(10) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT &#39;&#39; COMMENT &#39;租户字段&#39;,\n  PRIMARY KEY (`nid`),\n  KEY `idx_gmt_create` (`gmt_create`),\n  KEY `idx_gmt_modified` (`gmt_modified`),\n  KEY `idx_did` (`data_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;多租户改造&#39;;\n\n\nCREATE TABLE `tenant_capacity` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#39;主键ID&#39;,\n  `tenant_id` varchar(128) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;Tenant ID&#39;,\n  `quota` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;配额，0表示使用默认值&#39;,\n  `usage` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;使用量&#39;,\n  `max_size` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;单个配置大小上限，单位为字节，0表示使用默认值&#39;,\n  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;聚合子配置最大个数&#39;,\n  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#39;,\n  `max_history_count` int(10) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;最大变更历史数量&#39;,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;租户容量信息表&#39;;\n\n\nCREATE TABLE `tenant_info` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;id&#39;,\n  `kp` varchar(128) NOT NULL COMMENT &#39;kp&#39;,\n  `tenant_id` varchar(128) default &#39;&#39; COMMENT &#39;tenant_id&#39;,\n  `tenant_name` varchar(128) default &#39;&#39; COMMENT &#39;tenant_name&#39;,\n  `tenant_desc` varchar(256) DEFAULT NULL COMMENT &#39;tenant_desc&#39;,\n  `create_source` varchar(32) DEFAULT NULL COMMENT &#39;create_source&#39;,\n  `gmt_create` bigint(20) NOT NULL COMMENT &#39;创建时间&#39;,\n  `gmt_modified` bigint(20) NOT NULL COMMENT &#39;修改时间&#39;,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),\n  KEY `idx_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#39;tenant_info&#39;;\n\nCREATE TABLE `users` (\n    `username` varchar(50) NOT NULL PRIMARY KEY,\n    `password` varchar(500) NOT NULL,\n    `enabled` boolean NOT NULL\n);\n\nCREATE TABLE `roles` (\n    `username` varchar(50) NOT NULL,\n    `role` varchar(50) NOT NULL,\n    UNIQUE INDEX `idx_user_role` (`username` ASC, `role` ASC) USING BTREE\n);\n\nCREATE TABLE `permissions` (\n    `role` varchar(50) NOT NULL,\n    `resource` varchar(255) NOT NULL,\n    `action` varchar(8) NOT NULL,\n    UNIQUE INDEX `uk_role_permission` (`role`,`resource`,`action`) USING BTREE\n);\n\nINSERT INTO users (username, password, enabled) VALUES (&#39;nacos&#39;, &#39;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#39;, TRUE);\n\nINSERT INTO roles (username, role) VALUES (&#39;nacos&#39;, &#39;ROLE_ADMIN&#39;);\n</code></pre>\n<pre><code class=\"shell\">###2 先留取备份\ncp application.properties application.properties.bk\n\nvim application.properties\n\n### 在application.properties最后添加以下内容\nspring.datasource.platform=mysql\n\ndb.num=1\ndb.url.0=jdbc:mysql://127.0.0.1:3306/nacos_config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;serverTimezone=UTC\ndb.user=root\ndb.password=root\n</code></pre>\n<h5 id=\"4、开启nacos\"><a href=\"#4、开启nacos\" class=\"headerlink\" title=\"4、开启nacos\"></a>4、开启nacos</h5><pre><code class=\"shell\">/usr/local/nacos/bin/startup.sh\n</code></pre>\n<h5 id=\"5、查看\"><a href=\"#5、查看\" class=\"headerlink\" title=\"5、查看\"></a>5、查看</h5><ul>\n<li>测试之前先关闭防火墙</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMS41Mjo4ODQ4L25hY29z\">http://192.168.1.52:8848/nacos</span></p>\n<h3 id=\"Nacos集群配置\"><a href=\"#Nacos集群配置\" class=\"headerlink\" title=\"Nacos集群配置\"></a>Nacos集群配置</h3><ul>\n<li>前提</li>\n</ul>\n<p>#&gt; 1、安装  <a href=\"#jdk_install\">jdk</a></p>\n<blockquote>\n</blockquote>\n<p>#&gt; 2、安装之前必须 配置  <a href=\"#mysql_install\">mysql5.6.+</a></p>\n<blockquote>\n</blockquote>\n<p>#&gt; 3、配置 <a href=\"#nginx_install_1\">nginx</a></p>\n<blockquote>\n</blockquote>\n<p>#&gt; 4、配置 <a href=\"#nacos_install_1\">Nacos（单机版-1）</a></p>\n<ul>\n<li>懒加载</li>\n</ul>\n<blockquote>\n<p>我们启动nginx之后可能不会立即开始代理，打开日志等一会，没有结果的时候重配一下</p>\n</blockquote>\n<h4 id=\"——1-1\"><a href=\"#——1-1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><p>#​\t* 此例中  <code>nginx:1.16</code> 安装教程为： <a href=\"#nacos_install_1\">Nacos（单机版-1）</a></p>\n<h5 id=\"1、修改集群配置文件\"><a href=\"#1、修改集群配置文件\" class=\"headerlink\" title=\"1、修改集群配置文件\"></a>1、修改集群配置文件</h5><p>​\t这里开始正式配置集群，首先我们要更改   <strong>cluter.conf</strong>   这个配置文件，当然我们也需要备份，但是这里它的<strong>原始名称</strong>为：<strong>cluster.conf.example</strong> ，我们需要把它保留同时复制出一个cluster.conf来进行更改</p>\n<p><strong>注：对于要集群启动的所有nacos都要做这步操作</strong></p>\n<pre><code class=\"shell\">cd /usr/local/nacos/conf\n\n### 先备份\ncp cluster.conf.example cluster.conf\n</code></pre>\n<p>修改<code>cluster.conf</code></p>\n<pre><code class=\"shell\">### 格式： ip地址:端口号\n###\n### Copyright 1999-2018 Alibaba Group Holding Ltd.\n###\n### Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n### you may not use this file except in compliance with the License.\n### You may obtain a copy of the License at\n###\n###      http://www.apache.org/licenses/LICENSE-2.0\n###\n### Unless required by applicable law or agreed to in writing, software\n### distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n### WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n### See the License for the specific language governing permissions and\n### limitations under the License.\n###\n\n###it is ip\n###example\n###192.168.16.101:8847\n###192.168.16.102\n###192.168.16.10\n\n###ip:port\n192.168.124.133:3333\n192.168.124.133:4444\n192.168.124.133:5555\n</code></pre>\n<h5 id=\"2、编辑Nacos的启动脚本startup-sh\"><a href=\"#2、编辑Nacos的启动脚本startup-sh\" class=\"headerlink\" title=\"2、编辑Nacos的启动脚本startup.sh\"></a>2、编辑Nacos的启动脚本startup.sh</h5><pre><code class=\"shell\">cd /usr/local/nacos/bin\n\n### 先备份\ncp startup.sh starup.sh.bk\nvim  startup.sh \n</code></pre>\n<pre><code class=\"shell\">###1  在while 的变量中添加 o 并且在case 中添加对应处理\n        o)\n            PORT=$OPTARG;;\n        \n###2  在nohup 和&quot;$JAVA_OPT_EXT_FIX&quot;之前配置这个\n     $JAVA -Dserver.port=$&#123;PORT&#125;  \n \n</code></pre>\n<img data-src=\"/2022/10/15/Nacos-tool/1648643016965.png\" class=\"\">\n\n\n<img data-src=\"/2022/10/15/Nacos-tool/1648643157451.png\" class=\"\">\n\n\n\n\n\n\n<h5 id=\"3、配置nginx\"><a href=\"#3、配置nginx\" class=\"headerlink\" title=\"3、配置nginx\"></a>3、配置nginx</h5><p>下图是http的转发，但是还是TCP 的更好</p>\n<pre><code class=\"shell\">    \n    upstream  cluster&#123;\n    server 192.168.1.52:3333;\n    server 192.168.1.52:4444;\n    server 192.168.1.52:5555;\n    &#125;\n\n    proxy_pass  http://cluter;\n</code></pre>\n<p><strong>图片中 <code>cluster</code>写错了 少了一个<code>s</code> ，其实问题也不大，但是要专业~~</strong></p>\n<img data-src=\"/2022/10/15/Nacos-tool/1648643539716.png\" class=\"\">\n\n\n<p>TCP格式：</p>\n<pre><code class=\"sh\">worker_processes  1;\n\nevents &#123;\n    worker_connections  1024;\n&#125;\n\nstream &#123;\n      upstream nacos &#123;\n        server 192.168.1.52:8848;\n        server 192.168.1.52:8868;\n        server 192.168.1.52:8888;\n      &#125;\n\n\n     server &#123;\n        listen  81;\n        proxy_pass nacos;\n     &#125;\n&#125;\n</code></pre>\n<h5 id=\"4、启动Nginx\"><a href=\"#4、启动Nginx\" class=\"headerlink\" title=\"4、启动Nginx\"></a>4、启动Nginx</h5><pre><code class=\"shell\">\n</code></pre>\n<h5 id=\"5、查看测试\"><a href=\"#5、查看测试\" class=\"headerlink\" title=\"5、查看测试\"></a>5、查看测试</h5><p><span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMS41Mi9uYWNvcw==\">http://192.168.1.52:80/nacos</span></p>\n<h5 id=\"6、Nacos持久化\"><a href=\"#6、Nacos持久化\" class=\"headerlink\" title=\"6、Nacos持久化\"></a>6、Nacos持久化</h5><p>我们在配置的时候没有修改他的数据库，用的是自带的deery，如果是真的要部署要修改成mysql。这个熟悉</p>\n<ol>\n<li>在Linux系统上执行SQL脚本，具体位置在nacos目录下的conf中，这里的操作和之前是一样的，我们可以直接打开这个文件然后拷贝到数据库中执行，当然也是要创建数据库使用数据库然后在复制脚本内容，执行即可</li>\n</ol>\n<pre><code class=\"java\">create database nacos_config;\nuse nacos_config;\n</code></pre>\n<img data-src=\"/2022/10/15/Nacos-tool/image-20210929175710498.png\" class=\"\">\n\n\n<ol start=\"2\">\n<li>修改application.properties配置文件，但是修改之前我们最好做一个备份。</li>\n</ol>\n<pre><code class=\"java\">cp application.properties application.properties.init\n</code></pre>\n<ol start=\"3\">\n<li>这里的修改和我们之间的在win上的修改是完全一样的，所以我们只要打开这个文件，加上对应的内容即可</li>\n</ol>\n<pre><code class=\"java\">spring.datasource.platform=mysql\n\ndb.num=1\ndb.url.0=jdbc:mysql://127.0.0.1:3306/nacos_config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;serverTimezone=UTC\ndb.user=root\ndb.password=123456\n</code></pre>\n<ol start=\"4\">\n<li>还要注意一点，如果是一台机子上部署要修改服务端口</li>\n</ol>\n<pre><code class=\"java\">#*************** Spring Boot Related Configurations ***************#\n##### Default web context path:\nserver.servlet.contextPath=/nacos\n##### Default web server port:\n###f服务端口\nserver.port=8888/8868\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/MySQL-tool/",
            "url": "http://example.com/2022/10/15/MySQL-tool/",
            "title": "MySQL",
            "date_published": "2022-10-15T04:52:38.166Z",
            "content_html": "<h3 id=\"MySQL安装（Windows）\"><a href=\"#MySQL安装（Windows）\" class=\"headerlink\" title=\"MySQL安装（Windows）\"></a>MySQL安装（Windows）</h3><h4 id=\"【1】MySQL的版本：\"><a href=\"#【1】MySQL的版本：\" class=\"headerlink\" title=\"【1】MySQL的版本：\"></a>【1】MySQL的版本：</h4><p>近期主要历史版本有5.0&#x2F;5.1&#x2F;5.5&#x2F;5.6&#x2F;5.7，目前最新版本是MySQL8。6.0曾经是个内部试验版本，已取消了。</p>\n<p>MySQL8.0的版本历史</p>\n<ol>\n<li>2016-09-12第一个DM(development milestone)版本8.0.0发布</li>\n<li>2018-04-19第一个GA(General Availability)版本开始，8.0.11发布</li>\n<li>2018-07-27 8.0.12GA发布</li>\n<li>2018-10-22 8.0.13GA发布</li>\n<li>2019-01-21 8.0.14GA发布</li>\n<li>2019-02-01 8.0.15GA发布</li>\n<li>最新的版本是8.0.18,2019年10月14日正式发布</li>\n<li>….后续更新</li>\n</ol>\n<h4 id=\"【2】官方下载地址：\"><a href=\"#【2】官方下载地址：\" class=\"headerlink\" title=\"【2】官方下载地址：\"></a>【2】官方下载地址：</h4><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXYubXlzcWwuY29tL2Rvd25sb2Fkcy93aW5kb3dzL2luc3RhbGxlci84LjAuaHRtbA==\">https://dev.mysql.com/downloads/windows/installer/8.0.html</span></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646193598821.png\" class=\"\">\n\n\n\n\n<h4 id=\"【3】安装过程：\"><a href=\"#【3】安装过程：\" class=\"headerlink\" title=\"【3】安装过程：\"></a>【3】安装过程：</h4><p><strong>1.双击MySQL安装文件mysql-installer-community-8.0.18.0.msi，出现安装类型选项。</strong></p>\n<ul>\n<li><p>Developer Default：开发者默认</p>\n</li>\n<li><p>Server only：只安装服务器端 </p>\n</li>\n<li><p>Client only：只安装客户端</p>\n</li>\n<li><p>Full：安装全部选项</p>\n</li>\n<li><p>Custom：自定义安装</p>\n</li>\n</ul>\n<img data-src=\"/2022/10/15/MySQL-tool/1646193860553.png\" class=\"\">\n\n\n<p><strong>2.选择，然后继续：</strong></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646193913998.png\" class=\"\">\n\n\n<p><strong>3.进入产品配置向导，配置多个安装细节，点击Next按钮即可。</strong></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646193920702.png\" class=\"\">\n\n\n<p><strong>4.高可靠性High Availability，采用默认选项即可。</strong></p>\n<ul>\n<li><p>Standalone MySQL Server&#x2F;Classic MySQL Replication:独立MySQL服务器&#x2F;经典MySQL复制</p>\n</li>\n<li><p>InnoDB Cluster:InnoDB集群</p>\n</li>\n</ul>\n<img data-src=\"/2022/10/15/MySQL-tool/1646193926612.png\" class=\"\">\n\n\n<p><strong>5.类型和网络 Type and Networking，采用默认选项即可。记住MySQL的监听端口默认是3306。</strong></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646193950590.png\" class=\"\">\n\n\n<p><strong>6.身份验证方法Authentication Method，采用默认选项即可。</strong></p>\n <img data-src=\"/2022/10/15/MySQL-tool/1646193956569.png\" class=\"\" width=\"1646193956569\">\n\n<p><strong>7.账户和角色 Accounts and Roles。MySQL管理员账户名称是root，在此处指定root用户的密码。还可以在此处通过Add User按钮添加其他新账户，此处省略该操作。</strong></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646193968510.png\" class=\"\">\n\n\n<p><strong>8.Windows服务：Windows Service。</strong></p>\n<ul>\n<li><p>Configure MySQL Server as a Windows Service:给MySQL服务器配置一个服务项。</p>\n</li>\n<li><p>Windows Service Name:服务名称，采用默认名称MySQL80即可。</p>\n</li>\n<li><p>Start the MySQL at System Startup：系统启动时开启MySQL服务</p>\n</li>\n</ul>\n<img data-src=\"/2022/10/15/MySQL-tool/1646193985805.png\" class=\"\">\n\n\n\n\n\n\n<p><strong>9.Apply Configuration：点击Execute按钮执行开始应用这些配置项。</strong></p>\n<ul>\n<li><p>Writing configuration file: 写配置文件。</p>\n</li>\n<li><p>Updating Windows Firewall rules：更新Windows防火墙规则</p>\n</li>\n<li><p>Adjusting Windows services：调整Windows服务</p>\n</li>\n<li><p>Initializing database：初始化数据库</p>\n</li>\n<li><p>Starting the server： 启动服务器</p>\n</li>\n<li><p>Applying security setting：应用安全设置</p>\n</li>\n<li><p>Updating the Start menu link：更新开始菜单快捷方式链接</p>\n</li>\n</ul>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194015388.png\" class=\"\">\n\n\n<p><strong>PS：如果配置出错，查看右侧的log，查看对应错误信息。</strong><br><strong>执行完成后，如下图所示。单击Finish完成安装，进入产品配置环节。</strong></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194023800.png\" class=\"\">\n\n\n<p><strong>10.产品配置Product Configuration到此结束：点击Next按钮。</strong></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194031356.png\" class=\"\">\n\n\n<p><strong>11.安装完成 Installation Complete。点击Finish按钮完成安装。</strong></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194038230.png\" class=\"\">\n\n\n\n\n<h4 id=\"【4】MySQL配置、登录\"><a href=\"#【4】MySQL配置、登录\" class=\"headerlink\" title=\"【4】MySQL配置、登录\"></a>【4】MySQL配置、登录</h4><p><strong>【1】登录：</strong><br>访问MySQL服务器对应的命令：mysql.exe ,位置：C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin</p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194179663.png\" class=\"\">\n\n\n\n\n<p>（mysql.exe需要带参数执行，所以直接在图形界面下执行该命令会自动结束）</p>\n<p>打开控制命令台：win+r:</p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194204312.png\" class=\"\">\n\n\n<p>执行mysql.exe命令的时候出现错误：</p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194212295.png\" class=\"\">\n\n\n<p>需要配置环境变量path:</p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194221073.png\" class=\"\">\n\n\n<p><strong>注意：控制命令台必须重启才会生效：</strong></p>\n<p><strong>登录的命令：mysql  -hlocalhost -uroot –p</strong></p>\n<ul>\n<li><p>mysql：bin目录下的文件mysql.exe。mysql是MySQL的命令行工具，是一个客户端软件，可以对任何主机的mysql服务（即后台运行的mysqld）发起连接。</p>\n</li>\n<li><p>-h：host主机名。后面跟要访问的数据库服务器的地址；<strong>如果是登录本机，可以省略</strong></p>\n</li>\n<li><p>-u：user 用户名。后面跟登录数据的用户名，第一次安装后以root用户来登录，是MySQL的管理员用户</p>\n</li>\n<li><p>-p:   password 密码。一般不直接输入，而是回车后以保密方式输入。 </p>\n  <img data-src=\"/2022/10/15/MySQL-tool/1646194262329.png\" class=\"\" width=\"1646194262329\"></li>\n</ul>\n<p><strong>【2】访问数据库</strong></p>\n<p>显示MySQL中的数据库列表：</p>\n<pre><code class=\"shell\">show databases;\n</code></pre>\n<p> 默认有四个自带的数据库，每个数据库中可以有多个数据库表、视图等对象。</p>\n<p>切换当前数据库的命令：</p>\n<pre><code class=\"shell\">use mysql;\n</code></pre>\n<ul>\n<li><p>MySQL下可以有多个数据库，如果要访问哪个数据库，需要将其置为当前数据库。</p>\n</li>\n<li><p>该命令的作用就是将数据库mysql（默认提供的四个数据库之一的名字）置为当前数据库</p>\n</li>\n</ul>\n<p>显示当前数据库的所有数据库表：</p>\n<pre><code class=\"shell\">show tables;\n</code></pre>\n<p>MySQL 层次：不同项目对应不同的数据库组成 - 每个数据库中有很多表  - 每个表中有很多数据</p>\n<p><strong>【3】退出数据库</strong></p>\n<p>退出数据库可以使用quit或者exit命令完成，也可以用\\q;  完成退出操作</p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194349092.png\" class=\"\">\n\n\n\n\n\n\n<h4 id=\"【5】卸载\"><a href=\"#【5】卸载\" class=\"headerlink\" title=\"【5】卸载\"></a>【5】卸载</h4><p><strong>1)停止MySQL服务：在命令行模式下执行net stop mysql或者在Windows服务窗口下停止服务</strong></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194422719.png\" class=\"\">\n\n\n<p><strong>2)在控制面板中删除MySQL软件</strong></p>\n<img data-src=\"/2022/10/15/MySQL-tool/1646194431091.png\" class=\"\">\n\n\n<p><strong>3)删除软件文件夹：直接删除安装文件夹C:\\Program Files\\MySQL，其实此时该文件夹已经被删除或者剩下一个空文件夹。</strong></p>\n<p><strong>4)删除数据文件夹：直接删除文件夹C:\\ProgramData\\MySQL。此步不要忘记，否则会影响MySQL的再次安装。</strong><br><strong>（ProgramData文件夹可能是隐藏的，显示出来即可）</strong><br><strong>（MySQL文件下的内容才是真正的MySQL中数据）</strong></p>\n<p><strong>5)删除path环境变量中关于MySQL安装路径的配置</strong> </p>\n<h3 id=\"MySQL-安装（Linux）\"><a href=\"#MySQL-安装（Linux）\" class=\"headerlink\" title=\"MySQL 安装（Linux）\"></a>MySQL 安装（Linux）</h3><h4 id=\"——1-1\"><a href=\"#——1-1\" class=\"headerlink\" title=\"——1.1\"></a>——1.1</h4><p>MySQL安装</p>\n<h5 id=\"1、卸载原来的版本\"><a href=\"#1、卸载原来的版本\" class=\"headerlink\" title=\"1、卸载原来的版本\"></a>1、卸载原来的版本</h5><h6 id=\"1、查看mysql的安装情况\"><a href=\"#1、查看mysql的安装情况\" class=\"headerlink\" title=\"1、查看mysql的安装情况\"></a>1、查看mysql的安装情况</h6><pre><code class=\"sh\">rpm -qa | grep -i mysql\n</code></pre>\n<img data-src=\"/2022/10/15/MySQL-tool/1570605325400.png\" class=\"\">\n\n\n<h6 id=\"2、删除上图安装的软件\"><a href=\"#2、删除上图安装的软件\" class=\"headerlink\" title=\"2、删除上图安装的软件\"></a>2、删除上图安装的软件</h6><pre><code class=\"sh\">rpm -ev --nodeps mysql57-community-release-el5-7.noarch\nrpm -ev --nodeps mysql-community-server-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-community-client-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-community-libs-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-community-common-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-5.7.18-1.el5.x86_64\nrpm -ev --nodeps mysql-community-libs-compat-5.7.18-1.el5.x86_64\n</code></pre>\n<h6 id=\"3、都删除成功之后，查找相关的mysql的文件\"><a href=\"#3、都删除成功之后，查找相关的mysql的文件\" class=\"headerlink\" title=\"3、都删除成功之后，查找相关的mysql的文件\"></a>3、都删除成功之后，查找相关的mysql的文件</h6><pre><code class=\"sh\">find / -name mysql\n</code></pre>\n<img data-src=\"/2022/10/15/MySQL-tool/1570605553095.png\" class=\"\">\n\n\n<h6 id=\"4、删除全部文件\"><a href=\"#4、删除全部文件\" class=\"headerlink\" title=\"4、删除全部文件\"></a>4、删除全部文件</h6><pre><code class=\"sh\">rm -rf /etc/selinux/targeted/active/modules/100/mysql\nrm -rf /root/mysql\nrm -rf /root/mysql/data/mysql\nrm -rf /var/lib/mysql\nrm -rf /var/lib/mysql/mysql\nrm -rf /usr/share/mysql\n</code></pre>\n<h6 id=\"5、再次执行命令\"><a href=\"#5、再次执行命令\" class=\"headerlink\" title=\"5、再次执行命令\"></a>5、再次执行命令</h6><pre><code class=\"shell\">rpm -qa | grep -i mysql\n###如果没有显式则表示卸载完成\n</code></pre>\n<h5 id=\"2、删除mariadb-libs-不可省略\"><a href=\"#2、删除mariadb-libs-不可省略\" class=\"headerlink\" title=\"2、删除mariadb-libs(不可省略)\"></a>2、删除mariadb-libs(不可省略)</h5><pre><code class=\"sh\">### 检查mariadb-libs\nrpm -qa|grep mariadb\n### 卸载mariadb-libs\nyum remove mariadb-libs\n</code></pre>\n<h5 id=\"3、安装MySQL\"><a href=\"#3、安装MySQL\" class=\"headerlink\" title=\"3、安装MySQL\"></a>3、安装MySQL</h5><h6 id=\"1，输入\"><a href=\"#1，输入\" class=\"headerlink\" title=\"1，输入\"></a>1，输入</h6><p>wegt <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXYubXlzcWwuY29tL2dldC9teXNxbCVFNyU4OSU4OCVFNiU5QyVBQyVFNSU4RiVCNy1jb21tdW5pdHktcmVsZWFzZS1lbCVFNSVBNCVBNyVFNyU4OSU4OCVFNiU5QyVBQy0lRTUlQjAlOEYlRTclODklODglRTYlOUMlQUMubm9hcmNoLnJwbQ==\">https://dev.mysql.com/get/mysql版本号-community-release-el大版本-小版本.noarch.rpm</span></p>\n<pre><code class=\"sh\">wget https://dev.mysql.com/get/mysql57-community-release-el5-7.noarch.rpm\n</code></pre>\n<h6 id=\"2、安装数据源\"><a href=\"#2、安装数据源\" class=\"headerlink\" title=\"2、安装数据源\"></a>2、安装数据源</h6><pre><code class=\"sh\">yum install mysql57-community-release-el5-7.noarch.rpm\n</code></pre>\n<h6 id=\"3、查看mysql源是否安装成功\"><a href=\"#3、查看mysql源是否安装成功\" class=\"headerlink\" title=\"3、查看mysql源是否安装成功\"></a>3、查看mysql源是否安装成功</h6><pre><code class=\"sh\">yum repolist enabled | grep &quot;mysql.*-community.*&quot;\n</code></pre>\n<h6 id=\"4、安装数据库\"><a href=\"#4、安装数据库\" class=\"headerlink\" title=\"4、安装数据库\"></a>4、安装数据库</h6><pre><code class=\"sh\">yum install mysql-community-server\n\n\n\n### 如果过期可以在运行安装程序之前导入密钥\nrpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022\n</code></pre>\n<h6 id=\"5、启动mysql\"><a href=\"#5、启动mysql\" class=\"headerlink\" title=\"5、启动mysql\"></a>5、启动mysql</h6><pre><code class=\"sh\">### centos7\nsystemctl restart mysqld\nsystemctl status mysqld\n\n\n### centos6\nservice mysqld start\n\nservice mysqld status\n</code></pre>\n<h6 id=\"6、显示mysql的随机密码\"><a href=\"#6、显示mysql的随机密码\" class=\"headerlink\" title=\"6、显示mysql的随机密码\"></a>6、显示mysql的随机密码</h6><pre><code class=\"sh\">grep &#39;temporary password&#39; /var/log/mysqld.log\n</code></pre>\n<img data-src=\"/2022/10/15/MySQL-tool/image-20220827193405451.png\" class=\"\">\n\n\n<h6 id=\"7、登录并修改mysql密码\"><a href=\"#7、登录并修改mysql密码\" class=\"headerlink\" title=\"7、登录并修改mysql密码\"></a>7、登录并修改mysql密码</h6><p>登录：mysql -u root -p   \t\t然后输入上面生成的密码</p>\n<p><strong><em>修改自定义密码，设置自己想要的密码</em></strong></p>\n<pre><code class=\"sql\">-- ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;密码&#39;;\n\nALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;root&#39;;\n</code></pre>\n<p><strong><em>失败了的话就修改策略，将策略降低一下就可以了</em></strong></p>\n<p>查看密码策略：</p>\n<pre><code class=\"sql\">SHOW VARIABLES LIKE &#39;validate_password%&#39;;\n</code></pre>\n<p>修改密码策略</p>\n<pre><code class=\"sql\">-- 修改密码长度：（长度）\nset global validate_password.length=1;\n-- 修改密码等级：（等级）\nset global validate_password.policy=0;\n</code></pre>\n<h5 id=\"4、其他配置\"><a href=\"#4、其他配置\" class=\"headerlink\" title=\"4、其他配置\"></a>4、其他配置</h5><h6 id=\"1-开机自启\"><a href=\"#1-开机自启\" class=\"headerlink\" title=\"1.开机自启\"></a>1.开机自启</h6><pre><code class=\"sh\">### 开机启动\nsystemctl enable mysql\n### 关闭自动启动\nsystemctl disable mysqld\n</code></pre>\n<h6 id=\"2-远程连接\"><a href=\"#2-远程连接\" class=\"headerlink\" title=\"2.远程连接\"></a>2.远程连接</h6><h6 id=\"方法一、创建一个用户-支持远程连接\"><a href=\"#方法一、创建一个用户-支持远程连接\" class=\"headerlink\" title=\"方法一、创建一个用户 支持远程连接\"></a>方法一、创建一个用户 支持远程连接</h6><p>①登录 ：mysql -u root -p</p>\n<p>②创建用户： create user ‘aaa‘@’%’ identified by ‘123456’;</p>\n<p>③授权所有权限给user这个新用户 ：grant all on <em>.</em> to ‘aaa‘@’%’;</p>\n<p>④退出mysql：quit;</p>\n<h6 id=\"方法二、设置root用户支持远程连接\"><a href=\"#方法二、设置root用户支持远程连接\" class=\"headerlink\" title=\"方法二、设置root用户支持远程连接\"></a>方法二、设置root用户支持远程连接</h6><p>①登录：mysql -u root -p （ 注：系统提示输入数据库root用户的密码，输入完成后即进入mysql控制台，这个命令的第一个mysql是执行命令，第二个mysql是系统数据名称，不一样的。）</p>\n<p>②设置权限：</p>\n<p>赋予权限格式： grant 权限 on 数据库对象 to 用户@IP(或者相应正则)</p>\n<pre><code class=\"sql\">-- 新建用户规则或者直接修改root用户的规则 ，2 选一\nuse mysql;\n\n-- 这里表示赋予该用户所有数据库所有表（*.*表示所有表），%表示所有IP地址。\nGRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;\n-- 使root能再任何host访问\nupdate user set host = &#39;%&#39; where user = &#39;root&#39;;      \n\n-- 刷新\nFLUSH PRIVILEGES;\n</code></pre>\n<p>③查看：</p>\n<pre><code class=\"sql\">use mysql;\nSELECT HOST,USER FROM USER;\n</code></pre>\n<img data-src=\"/2022/10/15/MySQL-tool/920952e9041b4af1a8a49eb64e0f4430.jpeg\" class=\"\">\n\n\n<p> ④退出mysql：quit;</p>\n<h4 id=\"——2\"><a href=\"#——2\" class=\"headerlink\" title=\"——2\"></a>——2</h4><h5 id=\"1、查询镜像\"><a href=\"#1、查询镜像\" class=\"headerlink\" title=\"1、查询镜像\"></a>1、查询镜像</h5><pre><code class=\"shell\">docker search mysql\n</code></pre>\n<h5 id=\"2、拉取镜像\"><a href=\"#2、拉取镜像\" class=\"headerlink\" title=\"2、拉取镜像\"></a>2、拉取镜像</h5><pre><code class=\"shell\">docker pull mysql:5.7\n</code></pre>\n<h5 id=\"3、构建容器\"><a href=\"#3、构建容器\" class=\"headerlink\" title=\"3、构建容器\"></a>3、构建容器</h5><p>先自己创建配置文件基础模板（<strong>要是后期要修改配置文件必须加入 模板中的两个元素，不然容器启动会出错</strong>）</p>\n<pre><code class=\"shell\">mkdir -p /root/mysql/conf\nvim  /root/mysql/conf/my.cnf\n</code></pre>\n<p><strong>模板内容：</strong></p>\n<pre><code class=\"shell\">### Copyright (c) 2016, 2021, Oracle and/or its affiliates.\n###\n### This program is free software; you can redistribute it and/or modify\n### it under the terms of the GNU General Public License, version 2.0,\n### as published by the Free Software Foundation.\n###\n### This program is also distributed with certain software (including\n### but not limited to OpenSSL) that is licensed under separate terms,\n### as designated in a particular file or component or in included license\n### documentation.  The authors of MySQL hereby grant you an additional\n### permission to link the program and your derivative works with the\n### separately licensed software that they have included with MySQL.\n###\n### This program is distributed in the hope that it will be useful,\n### but WITHOUT ANY WARRANTY; without even the implied warranty of\n### MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n### GNU General Public License, version 2.0, for more details.\n###\n### You should have received a copy of the GNU General Public License\n### along with this program; if not, write to the Free Software\n### Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA\n\n\n!includedir /etc/mysql/conf.d/\n!includedir /etc/mysql/mysql.conf.d/\n\n[mysql]\ndefault-character-set=utf8\n[mysqld]\ncharacter_set_server=utf8\ninit_connect=&#39;SET NAMES utf8&#39;\nlower_case_table_names = 1\n</code></pre>\n<p><strong>构建容器</strong></p>\n<pre><code class=\"shell\">docker run \\\n-p 3306:3306 \\\n-v /root/mysql/data:/var/lib/mysql \\\n-v /root/mysql/logs:/logs \\\n-v /root/.bashrc:/root/.bashrc \\\n-v /root/mysql/conf/my.cnf:/etc/mysql/my.cnf \\\n-e MYSQL_ROOT_PASSWORD=root \\\n--name mysql \\\n--hostname node1 \\\n--restart=always \\\n-d mysql:5.7\n</code></pre>\n<p><strong>注</strong>：出错时将本地映射文件检查一下，要是不需要配置，只需映射直接删掉就可，以后再改配置文件</p>\n<h5 id=\"4、进入容器\"><a href=\"#4、进入容器\" class=\"headerlink\" title=\"4、进入容器\"></a>4、进入容器</h5><pre><code class=\"shell\">docker exec -it mysql /bin/bash\n或者\ndocker exec -it mysql mysql -uroot -p\n</code></pre>\n<h5 id=\"5、查看远程连接\"><a href=\"#5、查看远程连接\" class=\"headerlink\" title=\"5、查看远程连接\"></a>5、查看远程连接</h5><p>还有一些方法也可以试一下</p>\n<pre><code class=\"shell\">1.赋予权限格式：grant 权限 on 数据库对象 to 用户@IP(或者相应正则)\n\n　　　　注：可以赋予select,delete,update,insert,index等权限精确到某一个数据库某一个表。\n\n　　　　GRANT ALL PRIVILEGES ON *.* TO &#39;用户名&#39;@&#39;%&#39; IDENTIFIED BY &#39;密码&#39; WITH GRANT OPTION;\n      GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;\n\n　　　　这里表示赋予该用户所有数据库所有表（*.*表示所有表），%表示所有IP地址。\n\n2.刷新权限：FLUSH PRIVILEGES;\n\n3.查看权限：select user,host from mysql.user;\n\n二.意外\n　　1.配置文件种指定了blind-address：\n#　　　　查看Mysql配置文件种（一般是/etc/my.cnf种）是否指定了blind-address，这表示只能是某个或某几个ip能连接。如果有就将它注释了，前面加#号注释。然后从启mysql。\n    　重启mysql：service mysqld restart,如果安装的是Mariadb（我的就是）,则需要使用systemctl restart mariadb.service\n    　\n    2.防火墙的原因：\n　　　　可能会报：ERROR 2003 (HY000): Can&#39;t connect to MySQL server on &#39;你要连接的IP&#39; (111)。\n\n　　　　原因：1.可能是Mysql端口不对（默认是3306），只需加参数 -P 你的端口指定就行；\n　　　　\n　　　2.还有可能是有防火墙阻止，可以通过telnet来测试（可以直接关闭防火墙）。\n　　　　　　　　　　防火墙相关命令：\n\n　　　　　　　　　　　　（1）查看防火墙状态：service  iptables status或者systemctl status firewalld或者firewall-cmd --state\n\n　　　　　　　　　　　　（2）暂时关闭防火墙：systemctl stop firewalld或者service  iptables stop或者systemctl stop firewalld.service\n\n　　　　　　　　　　　　（3）永久关闭防火墙：systemctl disable firewalld或者chkconfig iptables off或者systemctl disable firewalld.service\n\n　　　　　　　　　　　　（4）重启防火墙：systemctl enable firewalld或者service iptables restart  或者systemctl restart firewalld.service\n\n 　　　　　　　　　　　　 (5)永久关闭后重启：chkconfig iptables on\n\n　　\n\n　　3.端口未开启：（我遇到的就是这个原因）\n　　　　　　Mysql：ERROR 2003 (HY000) 110（连接超时）\n\n　　　　　　查看你的服务器是否把对应端口打开，未打开启动就行了。　\n　　　　　　\n   4.Navicat连接MySQL，出现2059 - authentication plugin &#39;caching_sha2_password&#39;的解决方案\n      \n      0先进入容器，\n      docker exec -it mysql mysql -uroot -p\n      \n#  \t1#修改加密规则password是自己的密码，root也是登陆账户，下同。\n      use mysql;\n    ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;root&#39; PASSWORD EXPIRE NEVER; \n    \n##\t2 #更新一下用户的密码 \n    ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;root&#39;;\n    \n##\t3#刷新权限 \n    FLUSH PRIVILEGES; \n    \n##\t4#更新一下用户的密码\n    ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;root&#39;; \n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/MyCat-tool/",
            "url": "http://example.com/2022/10/15/MyCat-tool/",
            "title": "MyCat",
            "date_published": "2022-10-15T04:52:38.160Z",
            "content_html": "<h2 id=\"MyCat（Linux）\"><a href=\"#MyCat（Linux）\" class=\"headerlink\" title=\"MyCat（Linux）\"></a>MyCat（Linux）</h2><h3 id=\"Server安装\"><a href=\"#Server安装\" class=\"headerlink\" title=\"(Server安装)\"></a>(Server安装)</h3><ul>\n<li>前提：</li>\n</ul>\n<p>#* 1、<a href=\"#jdk_install\">jdk安装</a></p>\n<p>#* 2、<a href=\"#mysql_install\">mysql安装</a></p>\n<ul>\n<li><p>官网：<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5teWNhdC5vcmcuY24v\">http://www.mycat.org.cn/</span></p>\n</li>\n<li><p>首先准备四台虚拟机，安装好mysql，方便后续做读写分离和主从复制。**(3.3内容)**</p>\n<pre><code class=\"shell\">192.168.85.45 node01\n192.168.85.46 node02\n192.168.85.47 node03\n192.168.85.48 node04\n</code></pre>\n</li>\n</ul>\n<h4 id=\"1、下载MyCat\"><a href=\"#1、下载MyCat\" class=\"headerlink\" title=\"1、下载MyCat\"></a>1、下载MyCat</h4><p><span class=\"exturl\" data-url=\"aHR0cDovL2RsLm15Y2F0Lm9yZy5jbi8xLjYuNy42LzIwMjEwOTMwMjEzMDQ5L015Y2F0LXNlcnZlci0xLjYuNy42LXJlbGVhc2UtMjAyMTA5MzAyMTMwNDktbGludXgudGFyLmd6\">http://dl.mycat.org.cn/1.6.7.6/20210930213049/Mycat-server-1.6.7.6-release-20210930213049-linux.tar.gz</span></p>\n<pre><code class=\"shell\">windows下载安装包\n</code></pre>\n<h4 id=\"2、上传并解压压缩文件\"><a href=\"#2、上传并解压压缩文件\" class=\"headerlink\" title=\"2、上传并解压压缩文件\"></a>2、上传并解压压缩文件</h4><pre><code class=\"shell\"> tar -zxvf Mycat-server-1.6.7.5-release-20200422133810-linux.tar.gz -C /usr/local/ \n</code></pre>\n<h4 id=\"3、修改配置\"><a href=\"#3、修改配置\" class=\"headerlink\" title=\"3、修改配置\"></a>3、修改配置</h4><p>0、配置环境变量（可选）</p>\n<pre><code class=\"shell\">vim /etc/profile\n### 添加如下配置信息：\nexport MYCAT_HOME=/usr/local/mycat\nexport PATH=$MYCAT_HOME/bin:$PATH:$JAVA_HOME/bin\n\n### 生效\nsource /etc/profile\n</code></pre>\n<p><strong>修改server.xml schema.xml之前先备份</strong></p>\n<pre><code class=\"shell\">cd /usr/local/mycat\n\ncd conf\n\ncp server.xml server.xml.list\ncp schema.xml schema.xml.list\n</code></pre>\n<p>1、修改完成后的  <strong>server.xml</strong></p>\n<pre><code class=\"xml\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!-- - - Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); \n        - you may not use this file except in compliance with the License. - You \n        may obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 \n        - - Unless required by applicable law or agreed to in writing, software - \n        distributed under the License is distributed on an &quot;AS IS&quot; BASIS, - WITHOUT \n        WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the \n        License for the specific language governing permissions and - limitations \n        under the License. --&gt;\n&lt;!DOCTYPE mycat:server SYSTEM &quot;server.dtd&quot;&gt;\n&lt;mycat:server xmlns:mycat=&quot;http://io.mycat/&quot;&gt;\n        &lt;user name=&quot;root&quot; defaultAccount=&quot;true&quot;&gt;\n                &lt;property name=&quot;password&quot;&gt;root&lt;/property&gt;\n                &lt;property name=&quot;schemas&quot;&gt;TESTDB&lt;/property&gt;\n                &lt;property name=&quot;defaultSchema&quot;&gt;TESTDB&lt;/property&gt;\n        &lt;/user&gt;\n&lt;/mycat:server&gt;\n</code></pre>\n<p>2、修改完成后的 schema.xml</p>\n<pre><code class=\"xml\">&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;\n&lt;mycat:schema xmlns:mycat=&quot;http://io.mycat/&quot;&gt;\n        &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dn1&quot;&gt;\n        &lt;/schema&gt;\n        &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;msb&quot; /&gt;\n        &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;\n                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;\n                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;\n                &lt;writeHost host=&quot;hostM1&quot; url=&quot;192.168.1.45:3306&quot; user=&quot;root&quot;\n                                   password=&quot;root&quot;&gt;\n                         &lt;readHost host=&quot;hostS1&quot; url=&quot;192.168.1.46:3306&quot; user=&quot;root&quot; password=&quot;root&quot;&gt;&lt;/readHost&gt;\n                &lt;/writeHost&gt;\n        &lt;/dataHost&gt;\n&lt;/mycat:schema&gt;\n</code></pre>\n<p>3、修改 <strong>hosts</strong>  文件</p>\n<pre><code class=\"shell\">vim /etc/hosts\n\n###添加\n###ip name\n192.168.1.164 node01\n</code></pre>\n<h4 id=\"4、启动mycat\"><a href=\"#4、启动mycat\" class=\"headerlink\" title=\"4、启动mycat\"></a>4、启动mycat</h4><p>​\t\tmycat的启动有两种方式，一种是控制台启动，一种是后台启动，在初学的时候建议大家使用控制台启动的方式，当配置文件写错之后，可以方便的看到错误，及时修改，但是在生产环境中，使用后台启动的方式比较稳妥。</p>\n<p>​\t\t<strong>控制台启动：</strong></p>\n<pre><code class=\"shell\">cd /usrlocal/mycat/bin\n./mycat console\n\n###加入环境变量后可直接启动\nmycat console\n</code></pre>\n<p>​\t\t<strong>后台启动：</strong></p>\n<pre><code class=\"shell\">cd /usrlocal/mycat/bin\n./mycat start\n\n###加入环境变量后可直接启动\nmycat start\n</code></pre>\n<p>​\t\t按照如上配置在安装的时候应该不会报错，如果出现错误，根据错误的提示解决即可。</p>\n<h4 id=\"5、登录验证\"><a href=\"#5、登录验证\" class=\"headerlink\" title=\"5、登录验证\"></a>5、登录验证</h4><p>​\t\t<strong>管理窗口的登录</strong></p>\n<p>​\t\t从另外的虚拟机去登录访问当前mycat，输入如下命令即可</p>\n<pre><code>mysql -uroot -proot -P 9066 -h ip\n</code></pre>\n<p>​\t\t此时访问的是mycat的管理窗口，可以通过show @@help查看可以执行的命令</p>\n<p>​\t\t<strong>数据窗口的登录</strong></p>\n<p>​\t\t从另外的虚拟机去登录访问mycat，输入命令如下：【用户设置】</p>\n<pre><code>mysql -uroot -proot -P8066 -h ip\n</code></pre>\n<p>​\t\t当都能够成功的时候以为着mycat已经搭建完成。</p>\n<h3 id=\"mycat-web\"><a href=\"#mycat-web\" class=\"headerlink\" title=\"mycat-web\"></a>mycat-web</h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><h5 id=\"1、下载mycat-web安装包\"><a href=\"#1、下载mycat-web安装包\" class=\"headerlink\" title=\"1、下载mycat-web安装包\"></a>1、下载mycat-web安装包</h5><p>​\t官方地址：<span class=\"exturl\" data-url=\"aHR0cDovL2RsLm15Y2F0Lm9yZy5jbi8=\">http://dl.mycat.org.cn/</span></p>\n<h5 id=\"2、解压安装包到-x2F-usr-x2F-local目录\"><a href=\"#2、解压安装包到-x2F-usr-x2F-local目录\" class=\"headerlink\" title=\"2、解压安装包到&#x2F;usr&#x2F;local目录\"></a>2、解压安装包到&#x2F;usr&#x2F;local目录</h5><pre><code class=\"shell\">tar -zxvf Mycat-web-1.0-SNAPSHOT-20170102153329-linux.tar.gz -C /usr/local/\n</code></pre>\n<h4 id=\"3、进入mycat-web的目录运行启动命令\"><a href=\"#3、进入mycat-web的目录运行启动命令\" class=\"headerlink\" title=\"3、进入mycat-web的目录运行启动命令\"></a>3、进入mycat-web的目录运行启动命令</h4><pre><code class=\"shell\">    ./start.sh &amp;\n</code></pre>\n<h4 id=\"4、mycat-web的服务端口是8082，查看服务是否启动\"><a href=\"#4、mycat-web的服务端口是8082，查看服务是否启动\" class=\"headerlink\" title=\"4、mycat-web的服务端口是8082，查看服务是否启动\"></a>4、mycat-web的服务端口是8082，查看服务是否启动</h4><pre><code class=\"shell\">    netstat -nlpt | grep 8082\n</code></pre>\n<h4 id=\"5、通过地址访问服务\"><a href=\"#5、通过地址访问服务\" class=\"headerlink\" title=\"5、通过地址访问服务\"></a>5、通过地址访问服务</h4><pre><code class=\"shell\">    192.168.1.164:8082/mycat/\n</code></pre>\n<h4 id=\"6、mycat-web配置\"><a href=\"#6、mycat-web配置\" class=\"headerlink\" title=\"6、mycat-web配置\"></a>6、mycat-web配置</h4><h5 id=\"6-1、配置zookeeper-可选\"><a href=\"#6-1、配置zookeeper-可选\" class=\"headerlink\" title=\"6.1、配置zookeeper(可选)\"></a>6.1、配置zookeeper(可选)</h5><pre><code class=\"shell\">cd /usr/local/mycat-web/mycat-web/WEB-INF/classes\n\n###修改mycat.properties文件，可以修改zookeeper的地址\nvim mycat.properties\n</code></pre>\n<h5 id=\"6-2、添加mycat实例\"><a href=\"#6-2、添加mycat实例\" class=\"headerlink\" title=\"6.2、添加mycat实例\"></a>6.2、添加mycat实例</h5><pre><code>* 在页面的mycat配置\n\n* mycat服务管理中添加mycat实例，需要填写相关的参数\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/Keepalived-tool/",
            "url": "http://example.com/2022/10/15/Keepalived-tool/",
            "title": "Keepalived",
            "date_published": "2022-10-15T04:52:38.149Z",
            "content_html": "<h3 id=\"Keepalived安装\"><a href=\"#Keepalived安装\" class=\"headerlink\" title=\"Keepalived安装\"></a>Keepalived安装</h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><h5 id=\"1、准备好Keepalived安装包\"><a href=\"#1、准备好Keepalived安装包\" class=\"headerlink\" title=\"1、准备好Keepalived安装包\"></a>1、准备好Keepalived安装包</h5><h5 id=\"2、解压到-x2F-usr-x2F-local目录\"><a href=\"#2、解压到-x2F-usr-x2F-local目录\" class=\"headerlink\" title=\"2、解压到&#x2F;usr&#x2F;local目录\"></a>2、解压到&#x2F;usr&#x2F;local目录</h5><pre><code class=\"shell\">tar -zxvf /usr/local/tmp/keepalived-1.4.5.tar.gz -C /usr/local/\n</code></pre>\n<h5 id=\"3、安装需要依赖的环境组件\"><a href=\"#3、安装需要依赖的环境组件\" class=\"headerlink\" title=\"3、安装需要依赖的环境组件\"></a>3、安装需要依赖的环境组件</h5><pre><code class=\"shell\">yum install gcc openssl-devel popt-devel -y\n</code></pre>\n<h5 id=\"4、进入到解压目录，进行编译\"><a href=\"#4、进入到解压目录，进行编译\" class=\"headerlink\" title=\"4、进入到解压目录，进行编译\"></a>4、进入到解压目录，进行编译</h5><pre><code>cd /usr/local/keepalived-1.4.5\n./configure --prefix=/usr/local/keepalived\t\n</code></pre>\n<h5 id=\"5、编译完成之后，进行安装\"><a href=\"#5、编译完成之后，进行安装\" class=\"headerlink\" title=\"5、编译完成之后，进行安装\"></a>5、编译完成之后，进行安装</h5><pre><code class=\"shell\">make &amp;&amp; make install\n</code></pre>\n<h5 id=\"6、将keepalived的服务注册为系统服务\"><a href=\"#6、将keepalived的服务注册为系统服务\" class=\"headerlink\" title=\"6、将keepalived的服务注册为系统服务\"></a>6、将keepalived的服务注册为系统服务</h5><pre><code class=\"shell\">cp  -rf   /usr/local/keepalived-1.4.5/keepalived/etc/init.d/keepalived /etc/init.d/\nmkdir /etc/keepalived\ncp   -rf  /usr/local/keepalived/etc/keepalived/keepalived.conf /etc/keepalived/\ncp   -rf  /usr/local/keepalived-1.4.5/keepalived/etc/sysconfig/keepalived /etc/sysconfig/\ncp   -rf  /usr/local/keepalived/sbin/keepalived /usr/sbin/\n</code></pre>\n<h5 id=\"7、修改配置文件\"><a href=\"#7、修改配置文件\" class=\"headerlink\" title=\"7、修改配置文件\"></a>7、修改配置文件</h5><pre><code class=\"shell\">vim  /etc/keepalived/keepalived.conf\n</code></pre>\n<p><strong>CentOS-6   下的配置文件</strong></p>\n<pre><code class=\"shell\">! Configuration File for keepalived\nglobal_defs &#123;\n   notification_email &#123;\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   &#125;\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 127.0.0.1\n   smtp_connect_timeout 30\n   router_id LVS_DEVEL\n   vrrp_skip_check_adv_addr\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n&#125;\n\nvrrp_instance VI_1 &#123;\n##\t# 配置为主\n    state MASTER\n#    # 设置网卡\n    interface eth0\n#     # 虚拟路由ID，全局唯一\n    virtual_router_id 51\n#    # 优先级，权重值\n    priority 100\n    advert_int 1\n    authentication &#123;\n        auth_type PASS\n        auth_pass 1111\n    &#125;\n    virtual_ipaddress &#123;\n         192.168.1.100/24  dev eth0 label eth0:3:\n    &#125;\n&#125;\n</code></pre>\n<p><strong>CentOS-7   下的配置文件</strong></p>\n<pre><code class=\"conf\">! Configuration File for keepalived\nglobal_defs &#123;\n   notification_email &#123;\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   &#125;\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 127.0.0.1\n   smtp_connect_timeout 30\n   router_id LVS_DEVEL\n   vrrp_skip_check_adv_addr\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n&#125;\n\nvrrp_instance VI_1 &#123;\n##\t# 配置为主\n    state MASTER\n#    # 设置网卡\n    interface ens33\n#     # 虚拟路由ID，全局唯一\n    virtual_router_id 51\n#    # 优先级，权重值\n    priority 100\n    advert_int 1\n    authentication &#123;\n        auth_type PASS\n        auth_pass 1111\n    &#125;\n    virtual_ipaddress &#123;\n        192.168.1.100/24 \n    &#125;\n&#125;\n</code></pre>\n<h6 id=\"8、启动keepalived\"><a href=\"#8、启动keepalived\" class=\"headerlink\" title=\"8、启动keepalived\"></a>8、启动keepalived</h6><pre><code class=\"shell\">service keepalived start\n###或者\nsystemctl start keepalived.service\n</code></pre>\n<h6 id=\"9、登录验证\"><a href=\"#9、登录验证\" class=\"headerlink\" title=\"9、登录验证\"></a>9、登录验证</h6><pre><code class=\"shell\">mysql -uroot -p123456 -h 192.168.1.100 -P 48066\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/Kafka-tool/",
            "url": "http://example.com/2022/10/15/Kafka-tool/",
            "title": "Kafka",
            "date_published": "2022-10-15T04:52:38.146Z",
            "content_html": "<h3 id=\"Kafka-安装\"><a href=\"#Kafka-安装\" class=\"headerlink\" title=\"Kafka 安装\"></a>Kafka 安装</h3><blockquote>\n<p>安装前提，kafka安装运行最低支持jdk7；本篇演示版本是基于jdk1.8；</p>\n</blockquote>\n<p>官方下载地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHA6Ly9rYWZrYS5hcGFjaGUub3JnL2Rvd25sb2Fkcw==\">Apache Kafka</span></p>\n<p>kafka 是由scala语言编写，下载稳定版本，即前一个版本</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/v2-9f6503ade62cfa48df87cc9da984e87d_720w.jpg\" alt=\"img\"></p>\n<p>点击进入后，按如下方式点击下载</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/v2-bd19bea83d1cb978fbeed614ee126da6_720w.jpg\" alt=\"img\"></p>\n<p>下载完成后进行解压缩</p>\n<pre><code class=\"sh\">tar -zxvf kafka_2.12-2.8.0.tgz \nmv kafka_2.12-2.8.0 /usr/local/kafka\n</code></pre>\n<p>解压完成后进入kafka目录</p>\n<pre><code class=\"sh\">cd /usr/local/kafka\n</code></pre>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/v2-dfe360dfc7561953761f8ce69f782f4d_720w.png\" alt=\"img\"></p>\n<p>kafka 是基于 Zookeeper 的消息管理系统，所以启动的时候是需要使用到 Zookeeper ，但其内置了Zookeeper ，所以只需要根据bin目录下的文件进行启动即可</p>\n<p>启动Zookeeper 服务端命令</p>\n<pre><code class=\"text\">./bin/zookeeper-server-start.sh ./config/zookeeper.properties \n</code></pre>\n<p>Zookeeper 启动成功后会出现 <code>binding to port 0.0.0.0/0.0.0.0:2181</code> 所示结果表示启动成功；</p>\n<p><img data-src=\"https://pic1.zhimg.com/80/v2-6be2f91cd4ec47d589d3c5b58584c4b8_720w.png\" alt=\"img\"></p>\n<p>启动kafka服务端命令</p>\n<pre><code class=\"text\"> ./bin/kafka-server-start.sh  ./config/server.properties\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/JRebel-tool/",
            "url": "http://example.com/2022/10/15/JRebel-tool/",
            "title": "JRebel安装",
            "date_published": "2022-10-15T04:52:38.145Z",
            "content_html": "<h3 id=\"资料在网盘里面\"><a href=\"#资料在网盘里面\" class=\"headerlink\" title=\"资料在网盘里面\"></a>资料在网盘里面</h3>",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/HDFS-tool/",
            "url": "http://example.com/2022/10/15/HDFS-tool/",
            "title": "HDFS安装",
            "date_published": "2022-10-15T04:52:38.132Z",
            "content_html": "<h3 id=\"HDFS安装\"><a href=\"#HDFS安装\" class=\"headerlink\" title=\"HDFS安装\"></a>HDFS安装</h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><h4 id=\"——2\"><a href=\"#——2\" class=\"headerlink\" title=\"——2\"></a>——2</h4><p>1.拉取Hadoop镜像（可以在docker hub上找合适的镜像）：</p>\n<pre><code class=\"shell\">docker pull singularities/hadoop\n</code></pre>\n<p>2.创建docker-compose.yml文件（可以在文本编辑器中写好后，复制），内容如下：</p>\n<pre><code class=\"yml\">version: &quot;2&quot;\n\nservices:\n  namenode:\n    image: singularities/hadoop\n    command: start-hadoop namenode\n    environment:\n      HDFS_USER: hdfsuser\n    ports:\n      - &quot;8020:8020&quot;\n      - &quot;14000:14000&quot;\n      - &quot;50070:50070&quot;\n      - &quot;10020:10020&quot;\n      - &quot;13562:13562&quot;\n      - &quot;19888:19888&quot;\n  datanode:\n    image: singularities/hadoop\n    command: start-hadoop datanode namenode\n    environment:\n      HDFS_USER: hdfsuser\n    links:\n      - namenode\n</code></pre>\n<p>3.创建hadoop，执行如下命令</p>\n<pre><code class=\"shell\">docker-compose up -d\ndocker ps\n</code></pre>\n<p>4.开启多个datanode</p>\n<pre><code class=\"shell\">docker-compose scale datanode=3\ndocker ps\n</code></pre>\n<p>5.查看hadoop控制面板。由于服务刚初始化，可能需要等一会。访问类似如下url：</p>\n<pre><code class=\"ruby\">#http://192.168.1.195:50070/dfshealth.html#tab-datanode\n</code></pre>\n<p>6.进入任意hadoop相关容器，<strong>直接进行hdfs基础操作</strong><br>在任意datanode的容器中操作hdfs，会自动同步到其他的datanode容器中。</p>\n<pre><code class=\"bash\">### 查看所有命令\nhadoop fs\n### 创建目录\n#hadoop fs -mkdir /hdfs #在根目录下创建hdfs文件夹\n### 查看目录\n#hadoop fs -ls  /   #列出根目录下的文件列表\n### 创建多级目录\nhadoop fs -mkdir -p /hdfs/d1/d2\n### 上传文件到HDFS\n#echo &quot;hello world&quot; &gt;&gt; local.txt   #创建文件\n#hadoop fs -put local.txt /hdfs/   #上传文件到hdfs\n### 下载hdfs文件\nhadoop fs -get /hdfs/local.txt\n### 删除hdfs中的文件\nhadoop fs -rm /hdfs/local.txt\n### 删除hdfs中的目录\nhadoop fs -rmdir /hdfs/d1/d2\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/HAProxy-tool/",
            "url": "http://example.com/2022/10/15/HAProxy-tool/",
            "title": "HAProxy安装",
            "date_published": "2022-10-15T04:52:38.129Z",
            "content_html": "<h4 id=\"HAProxy安装\"><a href=\"#HAProxy安装\" class=\"headerlink\" title=\"HAProxy安装\"></a>HAProxy安装</h4><h5 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h5><h6 id=\"1、准备好HAProxy的安装包\"><a href=\"#1、准备好HAProxy的安装包\" class=\"headerlink\" title=\"1、准备好HAProxy的安装包\"></a>1、准备好HAProxy的安装包</h6><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcmMuZmVkb3JhcHJvamVjdC5vcmcvcmVwby9wa2dzL2hhcHJveHkv\">https://src.fedoraproject.org/repo/pkgs/haproxy/</span></p>\n<h6 id=\"2、解压到-x2F-usr-x2F-local目录\"><a href=\"#2、解压到-x2F-usr-x2F-local目录\" class=\"headerlink\" title=\"2、解压到&#x2F;usr&#x2F;local目录\"></a>2、解压到&#x2F;usr&#x2F;local目录</h6><h6 id=\"3、进入到解压后的目录，查看内核版本，进行编译\"><a href=\"#3、进入到解压后的目录，查看内核版本，进行编译\" class=\"headerlink\" title=\"3、进入到解压后的目录，查看内核版本，进行编译\"></a>3、进入到解压后的目录，查看内核版本，进行编译</h6><pre><code class=\"shell\">cd cd /usr/local/haproxy-1.8.25/\n\n### 查看内核版本3.10=31\nuname -r\n\nmake TARGET=linux31\n</code></pre>\n<h6 id=\"4、编译完成之后，开始进行安装\"><a href=\"#4、编译完成之后，开始进行安装\" class=\"headerlink\" title=\"4、编译完成之后，开始进行安装\"></a>4、编译完成之后，开始进行安装</h6><pre><code class=\"shell\">make install PREFIX=/usr/local/haproxy\n</code></pre>\n<h6 id=\"5、安装完成之后，创建目录，创建HAProxy配置文件\"><a href=\"#5、安装完成之后，创建目录，创建HAProxy配置文件\" class=\"headerlink\" title=\"5、安装完成之后，创建目录，创建HAProxy配置文件\"></a>5、安装完成之后，创建目录，创建HAProxy配置文件</h6><pre><code class=\"shell\">mkdir -p /usr/data/haproxy\nmkdir /usr/local/haproxy/conf\nvi /usr/local/haproxy/conf、haproxy.conf\n</code></pre>\n<p>6、向配置文件中添加配置信息</p>\n<pre><code class=\"shell\">    global\n        log 127.0.0.1 local0\n##\t\t#log 127.0.0.1 local1 notice\n##\t\t#log loghost local0 info\n        maxconn 4096\n        chroot /usr/local/haproxy\n        pidfile /usr/data/haproxy/haproxy.pid\n        uid 99\n        gid 99\n        daemon\n##\t\t#debug\n##\t\t#quiet\ndefaults\n        log global\n        mode tcp\n        option abortonclose\n        option redispatch\n        retries 3\n        maxconn 2000\n        timeout connect 5000\n        timeout client 50000\n        timeout server 50000\nlisten proxy_status\n    bind :48066\n        mode tcp\n        balance roundrobin\n        server mycat_1 192.168.85.111:8066 check inter 10s\n        server mycat_2 192.168.85.112:8066 check inter 10s\nfrontend admin_stats\n    bind :7777\n        mode http\n        stats enable\n        option httplog\n        maxconn 10\n        stats refresh 30s\n        stats uri /admin\n        stats auth admin:123123\n        stats hide-version\n        stats admin if TRUE\n</code></pre>\n<ul>\n<li>stats uri &#x2F;admin                   \t\t   <strong>账号</strong></li>\n<li>stats auth admin:123123       \t   <strong>密码</strong></li>\n</ul>\n<h6 id=\"7、启动haproxy服务\"><a href=\"#7、启动haproxy服务\" class=\"headerlink\" title=\"7、启动haproxy服务\"></a>7、启动haproxy服务</h6><pre><code class=\"shell\">    /usr/local/haproxy/sbin/haproxy -f /usr/local/haproxy/conf/haproxy.conf\n</code></pre>\n<h6 id=\"8、查看haproxy的进程，如果存在则说明没有问题\"><a href=\"#8、查看haproxy的进程，如果存在则说明没有问题\" class=\"headerlink\" title=\"8、查看haproxy的进程，如果存在则说明没有问题\"></a>8、查看haproxy的进程，如果存在则说明没有问题</h6><pre><code class=\"shell\">    ps -ef | grep haproxy\n</code></pre>\n<h6 id=\"9、打开浏览器访问-用户名为admin，密码为123123\"><a href=\"#9、打开浏览器访问-用户名为admin，密码为123123\" class=\"headerlink\" title=\"9、打开浏览器访问,用户名为admin，密码为123123\"></a>9、打开浏览器访问,用户名为admin，密码为123123</h6><p>​\t<span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMS4xNjQ6Nzc3Ny9hZG1pbg==\">http://192.168.1.164:7777/admin</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/Erlang-tool/",
            "url": "http://example.com/2022/10/15/Erlang-tool/",
            "title": "Erlang",
            "date_published": "2022-10-15T04:52:38.124Z",
            "content_html": "<h3 id=\"Erlang安装\"><a href=\"#Erlang安装\" class=\"headerlink\" title=\"Erlang安装\"></a><strong>Erlang安装</strong></h3><h4 id=\"——1\"><a href=\"#——1\" class=\"headerlink\" title=\"——1\"></a>——1</h4><p>​\tRabbitMQ是使用Erlang语言编写的，所以需要先配置Erlang</p>\n<h5 id=\"1-修改主机名\"><a href=\"#1-修改主机名\" class=\"headerlink\" title=\"1 修改主机名\"></a>1 <strong>修改主机名</strong></h5><p>​\tRabbitMQ是通过主机名进行访问的，必须指定能访问的主机名。</p>\n<pre><code>  vim /etc/sysconfig/network\n  \n  添加\n  NETWORKING=yes\n#  HOSTNAME=node-1 #名字可以随意\n</code></pre>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/RabbitMQ-06.jpg\"></p>\n<pre><code>    vim /etc/hosts\n  \n    ip network_hostname\neg: 192.168.1.195 node-1  \n</code></pre>\n<p>​\t新添加了一行，前面为服务器ip，空格后面添加计算机主机名</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/RabbitMQ-07.jpg\"></p>\n<h5 id=\"2-安装依赖\"><a href=\"#2-安装依赖\" class=\"headerlink\" title=\"2 安装依赖\"></a>2 <strong>安装依赖</strong></h5><pre><code>  yum -y install make gcc gcc-c++ kernel-devel m4 ncurses-devel openssl-devel unixODBC unixODBC-devel\n</code></pre>\n<h5 id=\"3-上传并解压\"><a href=\"#3-上传并解压\" class=\"headerlink\" title=\"3 上传并解压\"></a>3 <strong>上传并解压</strong></h5><p>​\t上传otp_src_22.0.tar.gz到&#x2F;usr&#x2F;local&#x2F;tmp目录中，进入目录并解压。</p>\n<pre><code> 解压时注意，此压缩包不具有gzip属性，解压参数没有z，只有xf\n</code></pre>\n<pre><code>  cd /usr/local/tmp\n  tar xf otp_src_22.0.tar.gz -C /usr/local/tmp\n</code></pre>\n<h5 id=\"4-配置参数\"><a href=\"#4-配置参数\" class=\"headerlink\" title=\"4 配置参数\"></a>4 <strong>配置参数</strong></h5><p>​\t先新建&#x2F;usr&#x2F;local&#x2F;erlang文件夹，作为安装文件夹</p>\n<pre><code>  mkdir -p /usr/local/erlang\n</code></pre>\n<p>​\t 进入文件夹</p>\n<pre><code>  cd otp_src_22.0\n</code></pre>\n<p>​\t 配置参数</p>\n<pre><code>  ./configure --prefix=/usr/local/erlang --with-ssl --enable-threads --enable-smp-support --enable-kernel-poll --enable-hipe --without-javac\n</code></pre>\n<h5 id=\"5-编译并安装\"><a href=\"#5-编译并安装\" class=\"headerlink\" title=\"5 编译并安装\"></a>5 <strong>编译并安装</strong></h5><p>​\t编译 </p>\n<pre><code>  make\n</code></pre>\n<p>​\t 安装</p>\n<pre><code>  make install\n</code></pre>\n<h5 id=\"6-修改环境变量\"><a href=\"#6-修改环境变量\" class=\"headerlink\" title=\"6 修改环境变量\"></a>6 <strong>修改环境变量</strong></h5><p>​\t修改&#x2F;etc&#x2F;profile文件</p>\n<pre><code> vim /etc/profile\n</code></pre>\n<p>​\t 在文件中添加下面代码 </p>\n<pre><code>export PATH=$PATH:/usr/local/erlang/bin\n</code></pre>\n<p>​\t运行文件，让修改内容生效</p>\n<pre><code>  source /etc/profile\n</code></pre>\n<h5 id=\"7-查看配置是否成功\"><a href=\"#7-查看配置是否成功\" class=\"headerlink\" title=\"7 查看配置是否成功\"></a>7 <strong>查看配置是否成功</strong></h5><pre><code>  erl -version\n</code></pre>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/RabbitMQ-08.jpg\"></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/docker-tool/",
            "url": "http://example.com/2022/10/15/docker-tool/",
            "title": "docker安装",
            "date_published": "2022-10-15T04:52:38.118Z",
            "content_html": "<h3 id=\"Docker安装（Linux）\"><a href=\"#Docker安装（Linux）\" class=\"headerlink\" title=\"Docker安装（Linux）\"></a>Docker安装（Linux）</h3><p>docker官网，自己选定自己的Linux版本，按照官方文档配置即可，以下CentOS7的</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL2luc3RhbGwvY2VudG9zLw==\">https://docs.docker.com/engine/install/centos/</span></p>\n<h4 id=\"1、卸载原有的环境：\"><a href=\"#1、卸载原有的环境：\" class=\"headerlink\" title=\"1、卸载原有的环境：\"></a>1、卸载原有的环境：</h4><pre><code class=\"shell\">sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-selinux \\\n                  docker-engine-selinux \\\n                  docker-engine\n</code></pre>\n<h4 id=\"2、安装对应的依赖环境和镜像地址\"><a href=\"#2、安装对应的依赖环境和镜像地址\" class=\"headerlink\" title=\"2、安装对应的依赖环境和镜像地址\"></a>2、安装对应的依赖环境和镜像地址</h4><pre><code class=\"shell\">sudo yum install -y yum-utils \n</code></pre>\n<p>官方安装(慢)</p>\n<pre><code class=\"shell\">sudo yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo\n</code></pre>\n<p>安装过慢设置镜像 </p>\n<pre><code class=\"shell\">sudo yum-config-manager \\ --add-repo \\ http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n</code></pre>\n<h4 id=\"3、直接安装docker-CE\"><a href=\"#3、直接安装docker-CE\" class=\"headerlink\" title=\"3、直接安装docker CE\"></a>3、直接安装docker CE</h4><pre><code class=\"shell\">sudo yum install -y docker-ce docker-ce-cli containerd.io\n</code></pre>\n<p>报错时，大概率为<strong>镜像仓库问题</strong> ，直接执行 <strong>步骤五</strong> 的补充，再安装</p>\n<h4 id=\"4、启动docker服务\"><a href=\"#4、启动docker服务\" class=\"headerlink\" title=\"4、启动docker服务\"></a>4、启动docker服务</h4><pre><code class=\"shell\">sudo systemctl start docker \n</code></pre>\n<h4 id=\"5、查看docker的版本\"><a href=\"#5、查看docker的版本\" class=\"headerlink\" title=\"5、查看docker的版本\"></a>5、查看docker的版本</h4><pre><code class=\"shell\">sudo docker version \n</code></pre>\n<p>**补充：通过官方的镜像地址下载docker会比较慢， **</p>\n<ul>\n<li>配置阿里云的镜像地址： <strong>经历过3的镜像库问题也就是配置阿里云镜像地址</strong></li>\n</ul>\n<pre><code class=\"shell\">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n</code></pre>\n<ul>\n<li>yum更新下即可：</li>\n</ul>\n<pre><code class=\"shell\">yum makecache fast \n</code></pre>\n<h4 id=\"6、开机启动docker\"><a href=\"#6、开机启动docker\" class=\"headerlink\" title=\"6、开机启动docker\"></a>6、开机启动docker</h4><pre><code class=\"shell\">sudo systemctl enable docker\n</code></pre>\n<ul>\n<li>补充：docker pull 下载镜像太慢，更换源进行网络加速的解决方案</li>\n</ul>\n<pre><code class=\"shell\">步骤1：\nsudo mkdir -p /etc/docker\n\n步骤2：\nsudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;\n&#123;\n  &quot;registry-mirrors&quot;: [&quot;https://glhlrb75.mirror.aliyuncs.com&quot;]\n&#125;\nEOF\n或者（老师的）\nsudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;\n&#123; \n    &quot;registry-mirrors&quot;: [&quot;https://v9j5rufo.mirror.aliyuncs.com&quot;] \n&#125;\nEOF\n\n步骤3：\nsudo systemctl daemon-reload\n\n步骤4：\nsudo systemctl restart docker\n</code></pre>\n<h4 id=\"7、使用\"><a href=\"#7、使用\" class=\"headerlink\" title=\"7、使用\"></a>7、使用</h4><p><a href=\"https://blog.csdn.net/qq_25760623/article/details/88657491\"><strong>阿里云安装docker：</strong></a></p>\n<p> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI1NzYwNjIzL2FydGljbGUvZGV0YWlscy84ODY1NzQ5MQ==\">https://blog.csdn.net/qq_25760623/article/details/88657491</span> </p>\n<h3 id=\"Docker-Compose安装（Linux）\"><a href=\"#Docker-Compose安装（Linux）\" class=\"headerlink\" title=\"Docker-Compose安装（Linux）\"></a>Docker-Compose安装（Linux）</h3><h4 id=\"方式一\"><a href=\"#方式一\" class=\"headerlink\" title=\"方式一\"></a>方式一</h4><p>官网地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vY29tcG9zZQ==\">https://docs.docker.com/compose</span> </p>\n<p>#<strong>推荐</strong>： 国内地址：<span class=\"exturl\" data-url=\"aHR0cDovL2dldC5kYW9jbG91ZC5pby8jaW5zdGFsbC1jb21wb3Nl\">http://get.daocloud.io/#install-compose</span></p>\n<pre><code class=\"shell\">sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker- compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose\n</code></pre>\n<p>速度比较慢的话使用下面的地址： </p>\n<pre><code class=\"shell\">curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.0/docker- compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose\n</code></pre>\n<p>修改文件夹权限 </p>\n<pre><code class=\"shell\">chmod +x /usr/local/bin/docker-compose\n</code></pre>\n<p>建立软连接 </p>\n<pre><code class=\"shell\">ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n</code></pre>\n<p>校验是否安装成功</p>\n<pre><code class=\"shell\">docker-compose --version\n</code></pre>\n<h4 id=\"方式二\"><a href=\"#方式二\" class=\"headerlink\" title=\"方式二\"></a>方式二</h4><p><strong>手动下载 docker-compose 到本地，然后上传到 linux 服务器的 &#x2F;usr&#x2F;local&#x2F;bin 路径下</strong></p>\n<p>（1）百度网盘：链接: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMW9fMlhzSUxmd2NBN21Sbi1mN0Exd0E=\">https://pan.baidu.com/s/1o_2XsILfwcA7mRn-f7A1wA</span> 提取码: qiue  —— 网盘中 docker-compose 版本：2.2.2</p>\n<p>（2）也可以去GitHub上下：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9jb21wb3NlL3JlbGVhc2Vz\">https://github.com/docker/compose/releases</span></p>\n<img data-src=\"/2022/10/15/docker-tool/1376119-20211222005944642-1364547608.png\" class=\"\">\n\n\n\n\n<ol start=\"5\">\n<li>重命名：</li>\n</ol>\n<p>mv docker-compose-linux-x86_64 docker-compose</p>\n<ol start=\"6\">\n<li>授权：</li>\n</ol>\n<p> chmod +x .&#x2F;docker-compose </p>\n<ol start=\"7\">\n<li>查看版本：</li>\n</ol>\n<p>docker-compose –version</p>\n<img data-src=\"/2022/10/15/docker-tool/1376119-20211222005757511-1189151957.png\" class=\"\">\n\n\n\n\n\n\n\n\n\n\n<h4 id=\"升级（方式三）\"><a href=\"#升级（方式三）\" class=\"headerlink\" title=\"升级（方式三）\"></a>升级（方式三）</h4><ul>\n<li>下载，命令如下👇：</li>\n</ul>\n<pre><code class=\"shell\">sudo curl -L https://get.daocloud.io/docker/compose/releases/download/1.26.2/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose\n</code></pre>\n<p>#&gt; 因Github国内访问不太稳定所以使用DaoCloud提供加速：<span class=\"exturl\" data-url=\"aHR0cDovL2dldC5kYW9jbG91ZC5pby8jaW5zdGFsbC1jb21wb3Nl\">链接</span>，你<strong>可以通过URL中的版本号，自定义下载你所需要的版本文件。</strong></p>\n<ul>\n<li>对命令进行一个授权</li>\n</ul>\n<pre><code class=\"shell\">sudo chmod +x /usr/local/bin/docker-compose\n</code></pre>\n<ul>\n<li>查看compose版本命令</li>\n</ul>\n<pre><code class=\"shell\">docker-compose --version\n</code></pre>\n<ul>\n<li>卸载</li>\n</ul>\n<pre><code class=\"shell\">sudo rm /usr/local/bin/docker-compose\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/Maven-tool/",
            "url": "http://example.com/2022/10/15/Maven-tool/",
            "title": "Maven-tool",
            "date_published": "2022-10-15T04:44:33.394Z",
            "content_html": "<h3 id=\"Maven-安装\"><a href=\"#Maven-安装\" class=\"headerlink\" title=\"Maven 安装\"></a>Maven 安装</h3><blockquote>\n<p>要是新版本 <code>IDEA</code> 则不需要修改 <code>Maven</code> , <code>IDEA</code>中默认整合了 <code>Maven</code>，只不过是版本问题</p>\n</blockquote>\n<img data-src=\"/2022/10/15/Maven-tool/image-20220513150641401.png\" class=\"\">\n\n\n\n\n<h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><p>下载地址： <span class=\"exturl\" data-url=\"aHR0cDovL21hdmVuLmFwYWNoZS5vcmcv\">http://maven.apache.org/</span></p>\n<img data-src=\"/2022/10/15/Maven-tool/image-20220513150648442.png\" class=\"\">\n\n\n<img data-src=\"/2022/10/15/Maven-tool/image-20220513150655417.png\" class=\"\">\n\n\n\n\n<p>目录结构：</p>\n<img data-src=\"/2022/10/15/Maven-tool/image-20220513150703248.png\" class=\"\">\n\n\n\n<p>bin：存放的是执行文件，命令<br>在IDEA中可以直接集成Maven:</p>\n<img data-src=\"/2022/10/15/Maven-tool/image-20220513150710943.png\" class=\"\">\n\n\n\n<p>conf目录：下面有一个非常重要的配置文件–》settings.xml—》maven的核心配置文件&#x2F;全局配置文件。</p>\n<div name=\".m2_create\">\n\n<blockquote>\n<p><strong>注：</strong>如果没有 <code>.m2</code> 目录 ，自己手动执行mvn命令：</p>\n</blockquote>\n<pre><code>mvn help:system\n</code></pre>\n<h4 id=\"远程仓库\"><a href=\"#远程仓库\" class=\"headerlink\" title=\"远程仓库\"></a>远程仓库</h4><p>默认的远程仓库使用的Apache提供的中央仓库：<br><span class=\"exturl\" data-url=\"aHR0cHM6Ly9tdm5yZXBvc2l0b3J5LmNvbS8=\">https://mvnrepository.com/</span></p>\n<h4 id=\"仓库配置\"><a href=\"#仓库配置\" class=\"headerlink\" title=\"仓库配置\"></a>仓库配置</h4><p>#修改 <a href=\"#.m2_create\">.m2&#x2F;settings.xm（没有就戳我！！！！）</a></p>\n<blockquote>\n<p>一般都在本地：C:\\Users\\Lenovo\\.m2\\settings.xml</p>\n</blockquote>\n<pre><code class=\"xml\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;!--\nLicensed to the Apache Software Foundation (ASF) under one\nor more contributor license agreements.  See the NOTICE file\ndistributed with this work for additional information\nregarding copyright ownership.  The ASF licenses this file\nto you under the Apache License, Version 2.0 (the\n&quot;License&quot;); you may not use this file except in compliance\nwith the License.  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing,\nsoftware distributed under the License is distributed on an\n&quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, either express or implied.  See the License for the\nspecific language governing permissions and limitations\nunder the License.\n--&gt;\n\n&lt;!--\n | This is the configuration file for Maven. It can be specified at two levels:\n |\n |  1. User Level. This settings.xml file provides configuration for a single user,\n |                 and is normally provided in $&#123;user.home&#125;/.m2/settings.xml.\n |\n |                 NOTE: This location can be overridden with the CLI option:\n |\n |                 -s /path/to/user/settings.xml\n |\n |  2. Global Level. This settings.xml file provides configuration for all Maven\n |                 users on a machine (assuming they&#39;re all using the same Maven\n |                 installation). It&#39;s normally provided in\n |                 $&#123;maven.home&#125;/conf/settings.xml.\n |\n |                 NOTE: This location can be overridden with the CLI option:\n |\n |                 -gs /path/to/global/settings.xml\n |\n | The sections in this sample file are intended to give you a running start at\n | getting the most out of your Maven installation. Where appropriate, the default\n | values (values used when the setting is not specified) are provided.\n |\n |--&gt;\n&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; \n          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n          xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;\n          \n          &gt;\n  &lt;!-- localRepository\n   | The path to the local repository maven will use to store artifacts.\n   |\n   | Default: $&#123;user.home&#125;/.m2/repository\n  &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;\n  --&gt;\n   &lt;!--Maven 本地仓库--&gt;\n  &lt;localRepository&gt;D:\\_Porgram_IT\\maven-repository&lt;/localRepository&gt;\n  \n  &lt;!-- interactiveMode\n   | This will determine whether maven prompts you when it needs input. If set to false,\n   | maven will use a sensible default value, perhaps based on some other setting, for\n   | the parameter in question.\n   |\n   | Default: true\n  &lt;interactiveMode&gt;true&lt;/interactiveMode&gt;\n  --&gt;\n\n  &lt;!-- offline\n   | Determines whether maven should attempt to connect to the network when executing a build.\n   | This will have an effect on artifact downloads, artifact deployment, and others.\n   |\n   | Default: false\n  &lt;offline&gt;false&lt;/offline&gt;\n  --&gt;\n\n  &lt;!-- pluginGroups\n   | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.\n   | when invoking a command line like &quot;mvn prefix:goal&quot;. Maven will automatically add the group identifiers\n   | &quot;org.apache.maven.plugins&quot; and &quot;org.codehaus.mojo&quot; if these are not already contained in the list.\n   |--&gt;\n  &lt;pluginGroups&gt;\n    &lt;!-- pluginGroup\n     | Specifies a further group identifier to use for plugin lookup.\n    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;\n    --&gt;\n  &lt;/pluginGroups&gt;\n\n  &lt;!-- proxies\n   | This is a list of proxies which can be used on this machine to connect to the network.\n   | Unless otherwise specified (by system property or command-line switch), the first proxy\n   | specification in this list marked as active will be used.\n   |--&gt;\n  &lt;proxies&gt;\n    &lt;!-- proxy\n     | Specification for one proxy, to be used in connecting to the network.\n     |\n    &lt;proxy&gt;\n      &lt;id&gt;optional&lt;/id&gt;\n      &lt;active&gt;true&lt;/active&gt;\n      &lt;protocol&gt;http&lt;/protocol&gt;\n      &lt;username&gt;proxyuser&lt;/username&gt;\n      &lt;password&gt;proxypass&lt;/password&gt;\n      &lt;host&gt;proxy.host.net&lt;/host&gt;\n      &lt;port&gt;80&lt;/port&gt;\n      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;\n    &lt;/proxy&gt;\n    --&gt;\n  &lt;/proxies&gt;\n\n  &lt;!-- servers\n   | This is a list of authentication profiles, keyed by the server-id used within the system.\n   | Authentication profiles can be used whenever maven must make a connection to a remote server.\n   |--&gt;\n   &lt;servers&gt;\n    &lt;!-- server\n     | Specifies the authentication information to use when connecting to a particular server, identified by\n     | a unique name within the system (referred to by the &#39;id&#39; attribute below).\n     |\n     | NOTE: You should either specify username/password OR privateKey/passphrase, since these pairings are\n     |       used together.\n     |\n    &lt;server&gt;\n      &lt;id&gt;deploymentRepo&lt;/id&gt;\n      &lt;username&gt;repouser&lt;/username&gt;\n      &lt;password&gt;repopwd&lt;/password&gt;\n    &lt;/server&gt;\n    --&gt;\n\n    &lt;!-- Another sample, using keys to authenticate.\n    &lt;server&gt;\n      &lt;id&gt;siteServer&lt;/id&gt;\n      &lt;privateKey&gt;/path/to/private/key&lt;/privateKey&gt;\n      &lt;passphrase&gt;optional; leave empty if not used.&lt;/passphrase&gt;\n    &lt;/server&gt;\n    --&gt;\n  &lt;/servers&gt;\n\n  &lt;!-- mirrors\n   | This is a list of mirrors to be used in downloading artifacts from remote repositories.\n   |\n   | It works like this: a POM may declare a repository to use in resolving certain artifacts.\n   | However, this repository may have problems with heavy traffic at times, so people have mirrored\n   | it to several places.\n   |\n   | That repository definition will have a unique id, so we can create a mirror reference for that\n   | repository, to be used as an alternate download site. The mirror site will be the preferred\n   | server for that repository.\n   |--&gt;\n  &lt;mirrors&gt;\n    &lt;mirror&gt; \n        &lt;!-- 指定镜像ID（可自己改名） --&gt;\n        &lt;id&gt;nexus-aliyun&lt;/id&gt; \n        &lt;!-- 匹配中央仓库（阿里云的仓库名称，不可以自己起名，必须这么写）--&gt;\n        &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\n        &lt;!-- 指定镜像名称（可自己改名）  --&gt;   \n        &lt;name&gt;Nexus aliyun&lt;/name&gt; \n        &lt;!-- 指定镜像路径（镜像地址） --&gt;\n        &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt; \n    &lt;/mirror&gt;\n    \n    &lt;mirror&gt;  \n      &lt;id&gt;alimaven&lt;/id&gt;  \n      &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;  \n      &lt;name&gt;aliyun maven&lt;/name&gt;  \n      &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;  \n    &lt;/mirror&gt;\n    &lt;!-- mirror\n     | Specifies a repository mirror site to use instead of a given repository. The repository that\n     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used\n     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.\n     |\n    &lt;mirror&gt;\n      &lt;id&gt;mirrorId&lt;/id&gt;\n      &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;\n      &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;\n      &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt;\n    &lt;/mirror&gt;\n     --&gt;\n     \n  &lt;/mirrors&gt;\n\n  &lt;!-- profiles\n   | This is a list of profiles which can be activated in a variety of ways, and which can modify\n   | the build process. Profiles provided in the settings.xml are intended to provide local machine-\n   | specific paths and repository locations which allow the build to work in the local environment.\n   |\n   | For example, if you have an integration testing plugin - like cactus - that needs to know where\n   | your Tomcat instance is installed, you can provide a variable here such that the variable is\n   | dereferenced during the build process to configure the cactus plugin.\n   |\n   | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles\n   | section of this document (settings.xml) - will be discussed later. Another way essentially\n   | relies on the detection of a system property, either matching a particular value for the property,\n   | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a\n   | value of &#39;1.4&#39; might activate a profile when the build is executed on a JDK version of &#39;1.4.2_07&#39;.\n   | Finally, the list of active profiles can be specified directly from the command line.\n   |\n   | NOTE: For profiles defined in the settings.xml, you are restricted to specifying only artifact\n   |       repositories, plugin repositories, and free-form properties to be used as configuration\n   |       variables for plugins in the POM.\n   |\n   |--&gt;\n  &lt;profiles&gt;\n    &lt;profile&gt;\n      &lt;id&gt;jdk-1.8&lt;/id&gt;\n      &lt;activation&gt;\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n        &lt;jdk&gt;1.8&lt;/jdk&gt;\n      &lt;/activation&gt;\n      &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt;\n      &lt;/properties&gt;\n    &lt;/profile&gt;\n\n    &lt;!-- profile\n     | Specifies a set of introductions to the build process, to be activated using one or more of the\n     | mechanisms described above. For inheritance purposes, and to activate profiles via &lt;activatedProfiles/&gt;\n     | or the command line, profiles have to have an ID that is unique.\n     |\n     | An encouraged best practice for profile identification is to use a consistent naming convention\n     | for profiles, such as &#39;env-dev&#39;, &#39;env-test&#39;, &#39;env-production&#39;, &#39;user-jdcasey&#39;, &#39;user-brett&#39;, etc.\n     | This will make it more intuitive to understand what the set of introduced profiles is attempting\n     | to accomplish, particularly when you only have a list of profile id&#39;s for debug.\n     |\n     | This profile example uses the JDK version to trigger activation, and provides a JDK-specific repo.\n    &lt;profile&gt;\n      &lt;id&gt;jdk-1.4&lt;/id&gt;\n\n      &lt;activation&gt;\n        &lt;jdk&gt;1.4&lt;/jdk&gt;\n      &lt;/activation&gt;\n\n      &lt;repositories&gt;\n        &lt;repository&gt;\n          &lt;id&gt;jdk14&lt;/id&gt;\n          &lt;name&gt;Repository for JDK 1.4 builds&lt;/name&gt;\n          &lt;url&gt;http://www.myhost.com/maven/jdk14&lt;/url&gt;\n          &lt;layout&gt;default&lt;/layout&gt;\n          &lt;snapshotPolicy&gt;always&lt;/snapshotPolicy&gt;\n        &lt;/repository&gt;\n      &lt;/repositories&gt;\n    &lt;/profile&gt;\n    --&gt;\n\n    &lt;!--\n     | Here is another profile, activated by the system property &#39;target-env&#39; with a value of &#39;dev&#39;,\n     | which provides a specific path to the Tomcat instance. To use this, your plugin configuration\n     | might hypothetically look like:\n     |\n     | ...\n     | &lt;plugin&gt;\n     |   &lt;groupId&gt;org.myco.myplugins&lt;/groupId&gt;\n     |   &lt;artifactId&gt;myplugin&lt;/artifactId&gt;\n     |\n     |   &lt;configuration&gt;\n     |     &lt;tomcatLocation&gt;$&#123;tomcatPath&#125;&lt;/tomcatLocation&gt;\n     |   &lt;/configuration&gt;\n     | &lt;/plugin&gt;\n     | ...\n     |\n     | NOTE: If you just wanted to inject this configuration whenever someone set &#39;target-env&#39; to\n     |       anything, you could just leave off the &lt;value/&gt; inside the activation-property.\n     |\n    &lt;profile&gt;\n      &lt;id&gt;env-dev&lt;/id&gt;\n\n      &lt;activation&gt;\n        &lt;property&gt;\n          &lt;name&gt;target-env&lt;/name&gt;\n          &lt;value&gt;dev&lt;/value&gt;\n        &lt;/property&gt;\n      &lt;/activation&gt;\n\n      &lt;properties&gt;\n        &lt;tomcatPath&gt;/path/to/tomcat/instance&lt;/tomcatPath&gt;\n      &lt;/properties&gt;\n    &lt;/profile&gt;\n    --&gt;\n  &lt;/profiles&gt;\n\n  &lt;!-- activeProfiles\n   | List of profiles that are active for all builds.\n   |\n  &lt;activeProfiles&gt;\n    &lt;activeProfile&gt;alwaysActiveProfile&lt;/activeProfile&gt;\n    &lt;activeProfile&gt;anotherAlwaysActiveProfile&lt;/activeProfile&gt;\n  &lt;/activeProfiles&gt;\n  --&gt;\n&lt;/settings&gt;\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/15/CentOS-7-tool/",
            "url": "http://example.com/2022/10/15/CentOS-7-tool/",
            "title": "CentOS-7安装",
            "date_published": "2022-10-15T04:42:32.306Z",
            "content_html": "<p><strong>1.下载镜像文件</strong></p>\n<p>  <span class=\"exturl\" data-url=\"aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuLw==\"> 清华大学开源软件镜像站</span>  </p>\n<p><strong>2.开始安装</strong></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489101763.png\" alt=\"1646489101763\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489187835.png\" alt=\"1646489187835\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489210450.png\" alt=\"1646489210450\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489375149.png\" alt=\"1646489375149\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489450527.png\" alt=\"1646489450527\"></p>\n<p><strong>3.开始进去虚拟机配置我们的软件</strong></p>\n<p><strong>3.1语言</strong></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489591914.png\" alt=\"1646489591914\"></p>\n<p><strong>3.2时区、软件选择</strong></p>\n<p>软件选择：按照自己的需求选，第一次多选也不要少选</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489600666.png\" alt=\"1646489600666\"></p>\n<p>4.硬、软配置完成，开始安装，同时要创建管理员Root 和 基础用户</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489605373.png\" alt=\"1646489605373\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489621243.png\" alt=\"1646489621243\"></p>\n<p>5.安装成功</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646489626446.png\" alt=\"1646489626446\"></p>\n<p><strong>系统配置</strong></p>\n<div name=\"Linux_install_centos7\">进入系统后~</div>\n\n<p>1、首先配置网络</p>\n<p>要先切换到 root 用户上去，不然没权限。</p>\n<pre><code class=\"shell\">方式一\nsudo -i\npassword:当前普通用户密码\n\n方式二\nsu -\npassword：root用户密码\n</code></pre>\n<p> 将  **ONBOOT ** 改为 yes ： </p>\n<pre><code class=\"shell\"> vim /etc/sysconfig/network-scripts/ifcfg-ens33\n</code></pre>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646490152508.png\" alt=\"1646490152508\"></p>\n<p>重启网络</p>\n<pre><code class=\"shell\">service network restart\n\n### 检查是否通畅\nping 114.114.114.114\n</code></pre>\n<p>2、 安装net-tools 和 vim（<strong>有的话可直接跳过</strong>）</p>\n<pre><code class=\"shell\">yum install -y net-tools vim\n</code></pre>\n<p>检查自己的ip</p>\n<pre><code class=\"shell\">ifconfig\n</code></pre>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/onlymarryu/typora-ims-test@master/img/1646490384192.png\" alt=\"1646490384192\"></p>\n<p>3 启动sshd服务</p>\n<pre><code class=\"shell\">service sshd start\n</code></pre>\n<div name=\"Linux_minInstall_4\"></div >\n\n<p>4、修改登录，让Root用户直接登录</p>\n<p>#<a href=\"#problem-6\">具体步骤</a>   \t\t</p>\n<div name=\"Linux_minInstall_5\"></div >\n\n<p>5、修改DNS连接,让xshell访问快一点</p>\n<p>#<a href=\"#problem-5\">具体步骤</a></p>\n<p>6、 <strong>关闭指定端口防火墙：</strong> </p>\n<pre><code class=\"shell\">systemctl status firewalld  \n\n###开启80端口\n\nfirewall-cmd --zone=public --add-port=80/tcp --permanent  \n\n###开启3306端口\n\nfirewall-cmd --zone=public --add-port=3306/tcp --permanent  \n\n###重启防火墙：\n\nfirewall-cmd --reload\n\n关闭防火墙 ，重启失效(Linux系统一重启Linux中的防火墙又会被开起)\nservice firewalld stop\n禁用防火墙，永久有效\nsystemctl disable firewalld 或者  systemctl disable firewalld.service\n启动防火墙 (对禁用的防火墙进行启动)\nsystemctl enable firewalld\n</code></pre>\n",
            "tags": []
        }
    ]
}